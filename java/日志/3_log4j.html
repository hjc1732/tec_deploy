<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Log4j | 技术侦探</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <script charset="utf-8" async="async" src="/js/jquery.min.js"></script>
    <script charset="utf-8" async="async" src="/js/fingerprint2.min.js"></script>
    <script charset="utf-8" async="async" src="https://s9.cnzz.com/z_stat.php?id=1278232949&amp;web_id=1278232949"></script>
    <script>
              var _hmt = _hmt || [];
              (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?0b31b4c146bf7126aed5009e1a4a11c8";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
              })();
            </script>
    <meta name="description" content="技术并不是我们所追求的目的,而是技术创新世界">
    <meta property="article:modified_time" content="null">
    <meta property="og:title" content="Log4j">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/java/%E6%97%A5%E5%BF%97/3_log4j.html">
    <meta name="twitter:title" content="Log4j">
    <meta name="twitter:url" content="/java/%E6%97%A5%E5%BF%97/3_log4j.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="robots" content="all">
    <meta name="author" content="小傅哥">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="keywords" content="Java基础">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.ee4e0787.css" as="style"><link rel="preload" href="/assets/css/styles.css?v=1720663609756" as="style"><link rel="preload" href="/assets/js/cg-styles.js?v=1720663609756" as="script"><link rel="preload" href="/assets/js/cg-app.js?v=1720663609756" as="script"><link rel="preload" href="/assets/js/cg-4.js?v=1720663609756" as="script"><link rel="preload" href="/assets/js/cg-39.js?v=1720663609756" as="script"><link rel="preload" href="/assets/js/cg-1.js?v=1720663609756" as="script"><link rel="preload" href="/assets/js/cg-92.js?v=1720663609756" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.ee4e0787.css"><link rel="stylesheet" href="/assets/css/styles.css?v=1720663609756">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">技术侦探</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="nav-link">
  javaSE
</a></li><li class="dropdown-subitem"><a href="/java/javaWeb/01_Web开发基础.html" class="nav-link">
  javaWeb
</a></li><li class="dropdown-subitem"><a href="/java/JUC/1、JUC概述.html" class="nav-link">
  JUC
</a></li><li class="dropdown-subitem"><a href="/java/响应式编程/前置知识.html" class="nav-link">
  响应式编程
</a></li><li class="dropdown-subitem"><a href="/设计模式/概述/概述.html" class="nav-link">
  设计模式
</a></li><li class="dropdown-subitem"><a href="/java/日志/1_日志简介.html" class="nav-link">
  日志
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/jdbc/01_JDBC.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/db/mysql/Mysql基础/01_MySQL概述.html" class="nav-link">
  mysql
</a></li></ul></li><li class="dropdown-item"><h4>
          补充
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/补充/Retrofit2.html" class="nav-link">
  Retrofit2
</a></li><li class="dropdown-subitem"><a href="/java/补充/rxJava/rxJava.html" class="nav-link">
  rxJava
</a></li><li class="dropdown-subitem"><a href="/java/补充/lua.html" class="nav-link">
  lua
</a></li><li class="dropdown-subitem"><a href="/java/补充/JVM.html" class="nav-link">
  jvm
</a></li><li class="dropdown-subitem"><a href="/java/补充/枚举.html" class="nav-link">
  枚举
</a></li><li class="dropdown-subitem"><a href="/java/补充/线程池.html" class="nav-link">
  线程池
</a></li><li class="dropdown-subitem"><a href="/java/补充/自定义注解.html" class="nav-link">
  自定义注解
</a></li></ul></li><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端/前端基础/01_HTML.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-subitem"><a href="/前端/vue/01_ECMAScript6入门.html" class="nav-link">
  vue
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          架构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/架构/项目搭建/项目搭建.html" class="nav-link">
  项目搭建
</a></li><li class="dropdown-subitem"><a href="/框架/架构/DDD架构/01-ddd是什么.html" class="nav-link">
  DDD
</a></li></ul></li><li class="dropdown-item"><h4>
          ORM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Mybatis/01_MyBatis快速入门.html" class="nav-link">
  Mybatis
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring全家桶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringSecurity/SpringSecurity.html" class="nav-link">
  SpringSecurity
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="nav-link">
  SpringCloudAlibaba
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/中间件/ElasticSearch/ElasticSearch.html" class="nav-link">
  中间件 | 自研轮子
</a></div><div class="nav-item"><a href="/部署/linux/01_Linux_安装.html" class="nav-link">
  部署|运维
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目练手" class="dropdown-title"><span class="title">项目练手</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cj.hjcwzx.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  营销抽奖
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://520.hjcwzx.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  研究生工作平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/实战/实用工具类/DocUtils.html" class="nav-link">
  实用工具类
</a></li><li class="dropdown-item"><!----> <a href="/实战/商城/项目笔记.html" class="nav-link">
  锋迷铺子
</a></li></ul></div></div><div class="nav-item"><a href="https://www.hjcwzx.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  网站迁移
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/更新日志/更新日志.html" class="nav-link">
  更新日志
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="nav-link">
  javaSE
</a></li><li class="dropdown-subitem"><a href="/java/javaWeb/01_Web开发基础.html" class="nav-link">
  javaWeb
</a></li><li class="dropdown-subitem"><a href="/java/JUC/1、JUC概述.html" class="nav-link">
  JUC
</a></li><li class="dropdown-subitem"><a href="/java/响应式编程/前置知识.html" class="nav-link">
  响应式编程
</a></li><li class="dropdown-subitem"><a href="/设计模式/概述/概述.html" class="nav-link">
  设计模式
</a></li><li class="dropdown-subitem"><a href="/java/日志/1_日志简介.html" class="nav-link">
  日志
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/jdbc/01_JDBC.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/db/mysql/Mysql基础/01_MySQL概述.html" class="nav-link">
  mysql
</a></li></ul></li><li class="dropdown-item"><h4>
          补充
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/补充/Retrofit2.html" class="nav-link">
  Retrofit2
</a></li><li class="dropdown-subitem"><a href="/java/补充/rxJava/rxJava.html" class="nav-link">
  rxJava
</a></li><li class="dropdown-subitem"><a href="/java/补充/lua.html" class="nav-link">
  lua
</a></li><li class="dropdown-subitem"><a href="/java/补充/JVM.html" class="nav-link">
  jvm
</a></li><li class="dropdown-subitem"><a href="/java/补充/枚举.html" class="nav-link">
  枚举
</a></li><li class="dropdown-subitem"><a href="/java/补充/线程池.html" class="nav-link">
  线程池
</a></li><li class="dropdown-subitem"><a href="/java/补充/自定义注解.html" class="nav-link">
  自定义注解
</a></li></ul></li><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端/前端基础/01_HTML.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-subitem"><a href="/前端/vue/01_ECMAScript6入门.html" class="nav-link">
  vue
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          架构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/架构/项目搭建/项目搭建.html" class="nav-link">
  项目搭建
</a></li><li class="dropdown-subitem"><a href="/框架/架构/DDD架构/01-ddd是什么.html" class="nav-link">
  DDD
</a></li></ul></li><li class="dropdown-item"><h4>
          ORM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Mybatis/01_MyBatis快速入门.html" class="nav-link">
  Mybatis
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring全家桶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringSecurity/SpringSecurity.html" class="nav-link">
  SpringSecurity
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="nav-link">
  SpringCloudAlibaba
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/中间件/ElasticSearch/ElasticSearch.html" class="nav-link">
  中间件 | 自研轮子
</a></div><div class="nav-item"><a href="/部署/linux/01_Linux_安装.html" class="nav-link">
  部署|运维
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目练手" class="dropdown-title"><span class="title">项目练手</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cj.hjcwzx.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  营销抽奖
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://520.hjcwzx.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  研究生工作平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/实战/实用工具类/DocUtils.html" class="nav-link">
  实用工具类
</a></li><li class="dropdown-item"><!----> <a href="/实战/商城/项目笔记.html" class="nav-link">
  锋迷铺子
</a></li></ul></div></div><div class="nav-item"><a href="https://www.hjcwzx.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  网站迁移
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/更新日志/更新日志.html" class="nav-link">
  更新日志
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>日志</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/日志/1_日志简介.html" class="sidebar-link">日志简介</a></li><li><a href="/java/日志/2_JUL.html" class="sidebar-link">JUL</a></li><li><a href="/java/日志/3_log4j.html" class="active sidebar-link">Log4j</a></li><li><a href="/java/日志/4_JCL.html" class="sidebar-link">JCL</a></li><li><a href="/java/日志/5_SLF4J.html" class="sidebar-link">SLF4J</a></li><li><a href="/java/日志/6_Logback.html" class="sidebar-link">Logback</a></li><li><a href="/java/日志/7_Log4j2.html" class="sidebar-link">Log4j2</a></li><li><a href="/java/日志/8_springboot日志实现.html" class="sidebar-link">Springboot日志实现</a></li></ul></section></li></ul> </aside> <div><main class="page"> <div class="theme-default-content content__default"><h1 id="log4j"><a href="#log4j" class="header-anchor">#</a> Log4j</h1> <p>官方网站：</p> <p>https://logging.apache.org/log4j/1.2/</p> <h2 id="log4j简介"><a href="#log4j简介" class="header-anchor">#</a> Log4j简介</h2> <p>Log4j是Apache的一个开源项目，通过使用Log4j，我们可以控制日志信息输送的目的地是控制台、文件、GUI组件，甚至是套接口服务器、NT的事件记录器、UNIX Syslog 守护进程等；我们也可以控制每一条日志的输出格式；通过定义每一条日志信息的级别，我们能够更加细致地控制日志的生成过程。最令人感兴趣的就是，这些可以通过一个配置文件来灵活地进行配置，而不需要修改应用的代码。</p> <p>Log4j-&gt;JUL</p> <h2 id="log4j组件介绍"><a href="#log4j组件介绍" class="header-anchor">#</a> Log4j组件介绍</h2> <p>Log4j主要由 Loggers(日志记录器)、Appenders（输出控制器）和 Layout（日志格式化器）组成。其中 Loggers 控制日志的输出以及输出级别；Appenders 指定日志的输出方式（输出到控制台、文件等）；Layout 控制日志信息的输出格式。</p> <ul><li><strong>Loggers</strong></li></ul> <p>日志记录器，负责收集处理日志记录，实例的命名就是类的全限定名，如cn.giteasy.log4j.XX，Logger的名字大小写敏感，</p> <p>其命名有继承机制：例如：</p> <p>name为 top.tec.log4j 的 logger 会继承 name 为 top.tec。</p> <p><strong>Root Logger 根Logger</strong></p> <p><strong>top</strong></p> <p><strong>top.tec.log4j</strong></p> <p><strong>top.tec.log4j.test</strong></p> <p><strong>top.tec.log4j.test.xxx</strong></p> <p>父Logger所做的日志属性设置，会直接影响到子Logger</p> <p>Log4J 中有一个特殊的 logger 叫做“root”，他是所有 logger 的根，也就意味着其他所有的 logger 都会直接 或者间接地继承自root。root logger可以用 Logger.getRootLogger()方法获取。</p> <p>自 log4j 1.2 版以来，Logger 类已经取代了 Category 类。对于熟悉早期版本的 log4j的人来说， Logger类可以被视为 Category 类的别名。</p> <p>关于日志级别信息，例如 DEBUG、INFO、WARN、ERROR…级别是分大小的</p> <p>DEBUG&lt; INFO&lt; WARN &lt; ERROR，分别用来指定这条日志信息的重要程度，Log4j 输出日志的规则是：只输出级别不低于设定级别的日志信息，假设Loggers级别设定为INFO，则INFO、WARN、ERROR级别的日志信息都会输出，而级别比 INFO 低的 DEBUG 则不会输出。</p> <ul><li><strong>AppendersL</strong></li></ul> <p>记录日志以及定义日志的级别仅仅是 Log4j的基本功能,Log4j日志系统还提供许多强大的功能，比如允许把日志输出到不同的地方，如控制台（Console）、文件（Files）等，可以根据天数或者文件大小产生新的文件，可以以流的形式发送到其它地方等等。</p> <p>常用Appenders：</p> <table><thead><tr><th><strong>Appender</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td>ConsoleAppender</td> <td>将日志输出到控制台</td></tr> <tr><td>FileAppender</td> <td>将日志输出到文件中</td></tr> <tr><td>DailyRollingFileAppender</td> <td>将日志输出到一个日志文件，并且每天输出到一个新的文件</td></tr> <tr><td>RollingFileAppender</td> <td>将日志信息输出到一个日志文件，并且指定文件的尺寸，当文件大小达到指定尺寸时，会自动把文件改名，同时产生一个新的文件</td></tr> <tr><td>JDBCAppender</td> <td>把日志信息保存到数据库中</td></tr></tbody></table> <ul><li><strong>Layouts</strong></li></ul> <p>有时用户希望根据自己的喜好格式化自己的日志输出,Log4j可以在Appenders的后面附加 Layouts 来完成这个功能。Layouts 提供四种日志输出样式，如根据 HTML 样式、自由指定样式、包含日志级别与信息的样式和包含日志时间、线程、类别等信息的样式。</p> <p>常用 Layouts：</p> <table><thead><tr><th><strong>Layout</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td>HTMLLayout</td> <td>格式化日志输出为HTML表格形式。</td></tr> <tr><td>SimpleLayout</td> <td>简单的日志输出格式化，打印的日志格式如默认INFO级别的消息。</td></tr> <tr><td>PatternLayout</td> <td>最强大的格式化组件，可以根据自定义格式输出日志，如果没有指定转换格式，就是用默认的转换格式e</td></tr></tbody></table> <h2 id="日志输出格式说明"><a href="#日志输出格式说明" class="header-anchor">#</a> 日志输出格式说明</h2> <p>使用PatternLayout可以自定义格式输出，是我们最常用的方式。</p> <p>这种格式化输出采用类似于 C 语言的 printf 函数的打印格式格式化日志信息，具体的占位符及其含义如下：</p> <table><thead><tr><th><strong>占位符</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td>%m</td> <td>输出代码中指定的日志信息。</td></tr> <tr><td>%p</td> <td>输出优先级， DEBUG、INFO等</td></tr> <tr><td>%n</td> <td>换行符</td></tr> <tr><td>%r</td> <td>输出自应用启动到输出该 log 信息耗费的毫秒数e</td></tr> <tr><td>%c</td> <td>输出打印语句所属的类的全名</td></tr> <tr><td>%t</td> <td>输出产生该日志的线程全名。</td></tr> <tr><td>%d</td> <td>输出服务器当前时间，默认为 ISO8601，也可以指定格式，如：%d{yyyy年MM月dd日 HH:mm:ss.SSS}</td></tr> <tr><td>%l</td> <td>输出日志时间发生的位置，包括类名、线程、及在代码中的行数。如：Test.main(Test.java:10)</td></tr> <tr><td>%F</td> <td>输出日志消息产生时所在的文件名称。</td></tr> <tr><td>%L</td> <td>输出代码中的行号</td></tr> <tr><td>%%</td> <td>输出一个 &quot;%&quot; 字符</td></tr></tbody></table> <p>可以在%与字符之间加上修饰符来控制最小宽度、最大宽度、和文本的对齐方式，如：</p> <p>%5c 	输出类全名称，最小宽度是5，类全名称长度&lt;5，默认的情况下右对齐；</p> <p>%-5c 	输出类全名称，最小宽度是5，类全名称长度&lt;5，&quot;-&quot;号指定左对齐,会有空格；</p> <p>%.5c 	输出类全名称，最大宽度是 5，类全名称长度&gt;5，就会将左边多出的字符截掉，&lt;5不会有空格；</p> <p>%20.30c  输出类全名称&lt;20 补空格，并且右对齐，&gt;30 字符，就从左边将超出的字符截掉</p> <h2 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h2> <h3 id="引入依赖"><a href="#引入依赖" class="header-anchor">#</a> 引入依赖</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.13.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--这是log4j1.0版本的最后一个版本，后面都使用的是log4j2--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="入门案例"><a href="#入门案例" class="header-anchor">#</a> 入门案例</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testLog4j</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token comment">//配置初始化信息：</span>
        <span class="token class-name">BasicConfigurator</span><span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;INFO信息 =========testLog4j========= &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>如果不进行配置上面的第5行代码，你将会得到如下提示：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>log4j<span class="token operator">:</span><span class="token constant">WARN</span> <span class="token class-name">No</span> appenders could be found <span class="token keyword">for</span> logger <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>giteasy<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>TestLog4jv1</span>
log4j<span class="token operator">:</span><span class="token constant">WARN</span> <span class="token class-name">Please</span> initialize the log4j system properly<span class="token punctuation">.</span>
log4j<span class="token operator">:</span><span class="token constant">WARN</span> <span class="token class-name">See</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>logging<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>org<span class="token operator">/</span>log4j<span class="token operator">/</span><span class="token number">1.2</span><span class="token operator">/</span>faq<span class="token punctuation">.</span>html#noconfig <span class="token keyword">for</span> more info<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>查看源码可知， 默认情况下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">BasicConfigurator</span><span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//1. 创建了根节点的对象，Logger root = Logger.getRootLogger();</span>
<span class="token comment">//2. 根节点添加了ConsoleAppender对象，（表示默认打印到控制台，自定义的格式化输出）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>源码org.apache.log4j.BasicConfigurator#configure()</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Logger</span> root <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getRootLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         root<span class="token punctuation">.</span><span class="token function">addAppender</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConsoleAppender</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PatternLayout</span><span class="token punctuation">(</span><span class="token string">&quot;%r [%t] %p %c %x - %m%n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="日志级别"><a href="#日志级别" class="header-anchor">#</a> 日志级别</h3> <p>Log4j提供了8个日志输出级别：</p> <table><thead><tr><th><strong>级别</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td>ALL</td> <td>最低级别，用于打开所有级别的日志记录</td></tr> <tr><td>TRACE</td> <td>程序推进下的追踪信息，这个追踪信息的日志级别非常低，一般情况下是不会使用的</td></tr> <tr><td>DEBUG</td> <td>消息的细粒度信息输出，对调试应用程序是非常有帮助的，主要是配合开发，在开发过程中打印一些重要的运行信息</td></tr> <tr><td>INFO</td> <td>消息的粗粒度级别运行信息</td></tr> <tr><td>WARN</td> <td>表示警告，程序在运行过程中会出现的有可能会发生的隐形错误  注意：有些信息不是错误，但是这个级别的输出目的是为了给程序员以提示</td></tr> <tr><td>ERROR</td> <td>系统的错误信息，发生的错误不影响系统的运行，  一般情况下，如果不想输出太多的日志，则使用该级别即可。</td></tr> <tr><td>FATAL</td> <td>表示严重错误，一旦发生系统就不可能继续运行的严重错误， 如果这种级别的错误出现了，表示程序可以停止运行了</td></tr> <tr><td>OFF</td> <td>最高等级的级别，用于关闭所有的日志记录</td></tr></tbody></table> <p>其中DEBUG是在我们没有进行设置的情况下，为Log4j默认的日志级别</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testLog4j</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//加载初始化</span>
        <span class="token class-name">BasicConfigurator</span><span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Log4jTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token string">&quot;fatal信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;error信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;warning信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;info信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//默认级别为debug, 所以trace打印未输出</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;debug信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;trace信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">}</span>

<span class="token comment">//打印结果</span>
<span class="token number">0</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">FATAL</span> <span class="token class-name"><span class="token namespace">top<span class="token punctuation">.</span>tec<span class="token punctuation">.</span></span>Log4jTest</span>  <span class="token operator">-</span> fatal信息
<span class="token number">0</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">ERROR</span> <span class="token class-name"><span class="token namespace">top<span class="token punctuation">.</span>tec<span class="token punctuation">.</span></span>Log4jTest</span>  <span class="token operator">-</span> error信息
<span class="token number">0</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">WARN</span> <span class="token class-name"><span class="token namespace">top<span class="token punctuation">.</span>tec<span class="token punctuation">.</span></span>Log4jTest</span>  <span class="token operator">-</span> warning信息
<span class="token number">0</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">top<span class="token punctuation">.</span>tec<span class="token punctuation">.</span></span>Log4jTest</span>  <span class="token operator">-</span> info信息
<span class="token number">0</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">DEBUG</span> <span class="token class-name"><span class="token namespace">top<span class="token punctuation">.</span>tec<span class="token punctuation">.</span></span>Log4jTest</span>  <span class="token operator">-</span> debug信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="log4j的正确打开方式"><a href="#log4j的正确打开方式" class="header-anchor">#</a> Log4j的正确打开方式</h3> <p>在正常项目开始中一船都是使用配置文件的方式进行Log4j的配置，而不是使用*BasicConfigurator.configure();*进行初始化。</p> <p>通过对BasicConfigurator.configure();源码的分析，我们的配置文件需要提供Logger、Appender、Layout这3个组件信息</p> <p><img src="data:image/png;base64,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" alt="img"></p> <p>分析Logger.getLogger(this.getClass());</p> <p><img src="/assets/img/1643441593606-d4b78519-d9d7-4bfa-b04b-1b1d3cfcdd3d.3e360a50.png" alt="img"></p> <p>进入LogManager类</p> <p><img src="/assets/img/1643441712314-d4dcb610-a9e0-4c9a-a124-90c06bee3345.232d8295.png" alt="img"></p> <p>可以看到有多个常量信息，配置文件的格式
log4j.properties
log4j.xml
log4j.configuration
...
...</p> <p>继续查看LogManager类，可以看到有个static代码块，其中</p> <p><img src="/assets/img/1643441888446-4d4006ed-dfa0-46c6-9260-176f16ef7357.d5091608.png" alt="img"></p> <p>表示，Log4j会在类路径下查找log4j.properties, 对于当前演示项目，会在resources目录下</p> <p>在LogManager类中继续往下看，看到</p> <p><img src="/assets/img/1643442026986-f07d6baa-70df-4602-90b7-b6f39e74f36d.b1112caf.png" alt="img"></p> <p>进入selectAndConfigure方法</p> <p><img src="/assets/img/1643442112192-7053cb47-15cc-4ab4-b576-08a6a5a79d9d.cc083990.png" alt="img"></p> <p>进入PropertyConfigurator类，有很多常量信息
其中以下是必须配置的：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">ROOT_LOGGER_PREFIX</span> <span class="token operator">=</span> <span class="token string">&quot;log4j.rootLogger&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">APPENDER_PREFIX</span> <span class="token operator">=</span> <span class="token string">&quot;log4j.appender.&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>通过源码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token class-name">String</span> prefix <span class="token operator">=</span> <span class="token string">&quot;log4j.appender.&quot;</span> <span class="token operator">+</span> appenderName<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可知我们需要配置一个appenderName（起名要见名知意，我们起名为console,在控制台输出打印日志）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>它的取值为log4j为我们提供的appender类     例如:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span></span>ConsoleAppender</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们同时指定输出的格式：
通过源码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token class-name">String</span> layoutPrefix <span class="token operator">=</span> prefix <span class="token operator">+</span> <span class="token string">&quot;.layout&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​<br>
配置：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>layout<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span></span>SimpleLayout</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>通过log4j.rootLogger继续在类中搜索</p> <p>找到void configureRootCategory方法
在这个方法中执行了this.parsecategory方法,观察该方法以下代码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   stringTokenizer st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringTokenizer</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>表示要以逗号的方式来切割字符串，证明了log4j.rootLogger的取值，其中可以有多个值，使用逗号进行分隔
通过代码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token class-name">String</span> levelstr <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>表示切割后的第一个值是日志的级别
通过代码：
​</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token keyword">while</span><span class="token punctuation">(</span>st<span class="token punctuation">.</span><span class="token function">hasMoreTokens</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>表示接下来的值，是可以通过while循环遍历得到的
第2~第n个值，就是我们配置的其他的信息，这个信息就是appenderName
所以我们的配置的方式应是如下样式的：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> log4j<span class="token punctuation">.</span>rootLogger<span class="token operator">=</span>日志级别<span class="token punctuation">,</span>appenderName1<span class="token punctuation">,</span>appenderName2<span class="token punctuation">,</span>appenderName3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>表示可以同时在根节点上配置多个日志输出的途径</p> <p>log4j.properties</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>log4j<span class="token punctuation">.</span>rootLogger <span class="token operator">=</span> trace<span class="token punctuation">,</span>consoleAppender

#<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
#配置appender输出方式为控制台输出

log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span></span>ConsoleAppender</span>
    
#配置appender控制台输出的格式
#log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span></span>SimpleLayout</span>
    
#以html格式输出
#log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span></span>HTMLLayout</span>
    
#自定义格式
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span></span>PatternLayout</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>conversionPattern <span class="token operator">=</span> <span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd <span class="token constant">HH</span><span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">.</span><span class="token constant">SSS</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token operator">%</span>t<span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">-</span><span class="token number">5</span>p <span class="token operator">%</span>l <span class="token operator">%</span>m<span class="token operator">%</span>n
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="打印log4j本身的详细信息"><a href="#打印log4j本身的详细信息" class="header-anchor">#</a> 打印log4j本身的详细信息</h3> <p>查看源码LogManager类中的方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token function">getLoggerRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>找到代码</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">LogLog</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>LogLog会使用debug级别的输出为我们展现日志输出详细信息</p> <p>LogLog是什么？
Logger是记录系统的日志，那么LogLog是用来记录Logger的日志信息的</p> <p>进入到LogLog.debug(msg，ex);方法中</p> <p><img src="/assets/img/1643442776008-13bd04d4-95a3-4428-b365-c5dded1bfee5.c3694850.png" alt="img">
通过代码：if（debugEnabled &amp;&amp; !quietMode){
观察到if判断中的这两个开关都必须开启才行
!quietMode是已经启动的状态，不需要我们去管
debugEnabled默认是关闭的
所以我们只需要设置debugEnabled为true就可以了</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">LogLog</span><span class="token punctuation">.</span><span class="token function">setInternalDebugging</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token comment">//打开Logger日志的开关</span>
        <span class="token class-name">LogLog</span><span class="token punctuation">.</span><span class="token function">setInternalDebugging</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        
        <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Log4jTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        logger<span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token string">&quot;fatal信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;error信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;warning信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;info信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;debug信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;trace信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">/**
         * 可以看到控制台，输出我们输出的日志信息外，多出以下信息：
         * 以下信息记录了Log4j从初始化到配置完成的日志
         */</span>
        
<span class="token comment">//结果</span>
log4j<span class="token operator">:</span> <span class="token class-name">Trying</span> <span class="token keyword">to</span> <span class="token namespace">find</span> <span class="token punctuation">[</span>log4j<span class="token punctuation">.</span>xml<span class="token punctuation">]</span> using context classloader <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>Launcher</span>$<span class="token class-name">AppClassLoader</span><span class="token annotation punctuation">@18b4aac2.
log4j</span><span class="token operator">:</span> <span class="token class-name">Trying</span> <span class="token keyword">to</span> <span class="token namespace">find</span> <span class="token punctuation">[</span>log4j<span class="token punctuation">.</span>xml<span class="token punctuation">]</span> using <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>Launcher</span>$<span class="token class-name">AppClassLoader</span><span class="token annotation punctuation">@18b4aac2</span> <span class="token keyword">class</span> loader<span class="token punctuation">.</span>
log4j<span class="token operator">:</span> <span class="token class-name">Trying</span> <span class="token keyword">to</span> <span class="token namespace">find</span> <span class="token punctuation">[</span>log4j<span class="token punctuation">.</span>xml<span class="token punctuation">]</span> using <span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span class="token function">getSystemResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
log4j<span class="token operator">:</span> <span class="token class-name">Trying</span> <span class="token keyword">to</span> <span class="token namespace">find</span> <span class="token punctuation">[</span>log4j<span class="token punctuation">.</span>properties<span class="token punctuation">]</span> using context classloader <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>Launcher</span>$<span class="token class-name">AppClassLoader</span><span class="token annotation punctuation">@18b4aac2.
log4j</span><span class="token operator">:</span> <span class="token class-name">Using</span> <span class="token constant">URL</span> <span class="token punctuation">[</span>file<span class="token operator">:</span><span class="token operator">/</span><span class="token class-name">D</span><span class="token operator">:</span><span class="token operator">/</span>project<span class="token operator">/</span>study_code_collection<span class="token operator">/</span>learn<span class="token operator">-</span>log<span class="token operator">/</span>target<span class="token operator">/</span>classes<span class="token operator">/</span>log4j<span class="token punctuation">.</span>properties<span class="token punctuation">]</span> <span class="token keyword">for</span> automatic log4j configuration<span class="token punctuation">.</span>
log4j<span class="token operator">:</span> <span class="token class-name">Reading</span> configuration from <span class="token constant">URL</span> file<span class="token operator">:</span><span class="token operator">/</span><span class="token class-name">D</span><span class="token operator">:</span><span class="token operator">/</span>project<span class="token operator">/</span>study_code_collection<span class="token operator">/</span>learn<span class="token operator">-</span>log<span class="token operator">/</span>target<span class="token operator">/</span>classes<span class="token operator">/</span>log4j<span class="token punctuation">.</span>properties
log4j<span class="token operator">:</span> <span class="token class-name">Parsing</span> <span class="token keyword">for</span> <span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token keyword">with</span> <span class="token namespace">value</span><span class="token operator">=</span><span class="token punctuation">[</span>trace<span class="token punctuation">,</span>consoleAppender<span class="token punctuation">]</span><span class="token punctuation">.</span>
log4j<span class="token operator">:</span> <span class="token class-name">Level</span> token is <span class="token punctuation">[</span>trace<span class="token punctuation">]</span><span class="token punctuation">.</span>
log4j<span class="token operator">:</span> <span class="token class-name">Category</span> root set <span class="token keyword">to</span> <span class="token constant">TRACE</span>
log4j<span class="token operator">:</span> <span class="token class-name">Parsing</span> appender named <span class="token string">&quot;consoleAppender&quot;</span><span class="token punctuation">.</span>
log4j<span class="token operator">:</span> <span class="token class-name">Parsing</span> layout options <span class="token keyword">for</span> <span class="token string">&quot;consoleAppender&quot;</span><span class="token punctuation">.</span>
log4j<span class="token operator">:</span> <span class="token class-name">End</span> of parsing <span class="token keyword">for</span> <span class="token string">&quot;consoleAppender&quot;</span><span class="token punctuation">.</span>
log4j<span class="token operator">:</span> <span class="token class-name">Parsed</span> <span class="token string">&quot;consoleAppender&quot;</span> options<span class="token punctuation">.</span>
log4j<span class="token operator">:</span> <span class="token class-name">Finished</span> configuring<span class="token punctuation">.</span>
<span class="token constant">FATAL</span> <span class="token operator">-</span> fatal信息
<span class="token constant">ERROR</span> <span class="token operator">-</span> error信息
<span class="token constant">WARN</span> <span class="token operator">-</span> warning信息
<span class="token constant">INFO</span> <span class="token operator">-</span> info信息
<span class="token constant">DEBUG</span> <span class="token operator">-</span> debug信息
<span class="token constant">TRACE</span> <span class="token operator">-</span> trace信息

        
        
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="log4j-properties配置祥解"><a href="#log4j-properties配置祥解" class="header-anchor">#</a> log4j.properties配置祥解</h3> <p>HTMLLayout
SimpleLayout
PatternLayout</p> <p>其中PatternLayout是我们最常使用的格式, 查看源码 PatternLayout 类
setConversionPattern这个方法就是该PatternLayout的核心方法
根据方法名可知，我们需要在配置文件中将我们的layout配置一个conversionPattern属性</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>ConsoleAppender

#配置appender控制台输出的格式
#log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>SimpleLayout

#以html格式输出
#log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>HTMLLayout

log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>PatternLayout

log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>conversionPattern <span class="token operator">=</span> <span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd <span class="token constant">HH</span><span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">.</span><span class="token constant">SSS</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token operator">%</span>t<span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">-</span>5p <span class="token operator">%</span>l <span class="token operator">%</span>m<span class="token operator">%</span>n
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="/assets/img/image-20240708220215477.d40cb291.png" alt="image-20240708220215477"></p> <p><img src="/assets/img/image-20240708220306129.985cb12a.png" alt="image-20240708220306129"></p> <h3 id="输出日志到文件中"><a href="#输出日志到文件中" class="header-anchor">#</a> 输出日志到文件中</h3> <p>实际项目中一般都是输出到文件中，在此之前我们在配置文件中的配置是输出到控制台，我们也可能将日志输出到文件，在输出到控制台的基础上，保留原先的配置，添加输出到文件的配置，做多方向的输出。</p> <p><em>日志文件要保存到磁盘的什么位置？</em></p> <p>查看FileAppender的源码，看到属性信息</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">boolean</span> fileAppend；<span class="token comment">//表示是否追加信息，通过构造方法赋值为true</span>
<span class="token keyword">protected</span> <span class="token keyword">int</span> buffersize；<span class="token comment">//缓冲区的大小，通过构造方法赋值为8192</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>继续观察，找到setFile方法，这个方法就是用来指定文件位置的方法
通过ognl，可以推断setFile方法操作的属性就是file, 由此可知配置*</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>fileAppender<span class="token punctuation">.</span>file <span class="token operator">=</span> <span class="token class-name">D</span><span class="token operator">:</span>\\log4j_test<span class="token punctuation">.</span>log
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果有输出中文的需求，需要设置编码？
观察FileAppender的父类
找到protected String encoding;属性
由此可知配置：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>fileAppender<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token constant">UTF</span><span class="token operator">-</span><span class="token number">8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>完整配置文件log4j.properties</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>log4j<span class="token punctuation">.</span>rootLogger <span class="token operator">=</span> trace<span class="token punctuation">,</span>consoleAppender<span class="token punctuation">,</span>fileAppender


#<span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">*</span>
#配置appender输出方式为控制台输出

log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>ConsoleAppender
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>PatternLayout
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>conversionPattern <span class="token operator">=</span> <span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd <span class="token constant">HH</span><span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">.</span><span class="token constant">SSS</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token operator">%</span>t<span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">-</span>5p <span class="token operator">%</span>l <span class="token operator">%</span>m<span class="token operator">%</span>n

#<span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">*</span>
#配置appender输出到文件中
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>fileAppender <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>FileAppender
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>fileAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>PatternLayout
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>fileAppender<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>conversionPattern <span class="token operator">=</span> <span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd <span class="token constant">HH</span><span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">.</span><span class="token constant">SSS</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token operator">%</span>t<span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">-</span>5p <span class="token operator">%</span>l <span class="token operator">%</span>m<span class="token operator">%</span>n
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>fileAppender<span class="token punctuation">.</span>file <span class="token operator">=</span> <span class="token constant">D</span><span class="token operator">:</span>\\log4j_test<span class="token punctuation">.</span>log
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>fileAppender<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token constant">UTF</span><span class="token operator">-</span><span class="token number">8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="按文件大小拆分日志文件"><a href="#按文件大小拆分日志文件" class="header-anchor">#</a> 按文件大小拆分日志文件</h3> <p>FileAppender为我们提供了好用的子类来进一步的对于文件输出进行处理
<strong>RollingFileAppender</strong> <strong>DailyRollingFileAppender</strong></p> <p>其中RollingFileAppender为按照文件大小进行拆分.</p> <p>如何进行RollingFileAppender相关配置？</p> <p>观察RollingFileAppender的源码</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">long</span> maxFilesize <span class="token operator">=</span> <span class="token number">10485760L</span>；<span class="token comment">//表示拆分文件的大小</span>
<span class="token keyword">protected</span> <span class="token keyword">int</span> maxBackupIndex <span class="token operator">=</span> <span class="token number">1</span>；<span class="token comment">//表示拆分文件的数量</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>完整配置文件log4j.properties</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>log4j<span class="token punctuation">.</span>rootLogger <span class="token operator">=</span> trace<span class="token punctuation">,</span>rollingFileAppender


#配置appender输出到文件中<span class="token punctuation">,</span>按文件大小进行拆分
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rollingFileAppender <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>RollingFileAppender
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rollingFileAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>PatternLayout
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rollingFileAppender<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>conversionPattern <span class="token operator">=</span> <span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd <span class="token constant">HH</span><span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">.</span><span class="token constant">SSS</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token operator">%</span>t<span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">-</span>5p <span class="token operator">%</span>l <span class="token operator">%</span>m<span class="token operator">%</span>n
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rollingFileAppender<span class="token punctuation">.</span>file <span class="token operator">=</span> <span class="token constant">D</span><span class="token operator">:</span>\\log4j_test<span class="token punctuation">.</span>log
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rollingFileAppender<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token constant">UTF</span><span class="token operator">-</span><span class="token number">8</span>
#指定日志文件大小，只要超过1MB，那么则生成另外一个文件
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rollingFileAppender<span class="token punctuation">.</span>maxFileSize <span class="token operator">=</span> 1MB
#指定文件数量，文件最多生成<span class="token number">5</span>个，超过<span class="token number">5</span>个，会覆盖时间最早的那个文件
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rollingFileAppender<span class="token punctuation">.</span>maxBackupIndex <span class="token operator">=</span> <span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="按时间拆分日志文件"><a href="#按时间拆分日志文件" class="header-anchor">#</a> 按时间拆分日志文件</h3> <p>DailyRollingFileAppender</p> <p>查看DailyRollingFileAppender类源码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">private</span> String datePattern <span class="token operator">=</span> <span class="token string">&quot; &quot;</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd&quot;；<span class="token comment">//默认是按照天来进行拆分的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>完整配置文件log4j.properties</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>log4j<span class="token punctuation">.</span>rootLogger <span class="token operator">=</span> trace<span class="token punctuation">,</span>dailyRollingFileAppender


#<span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">*</span>
#配置appender输出到文件中<span class="token punctuation">,</span>按时间进行拆分
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dailyRollingFileAppender <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>DailyRollingFileAppender
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dailyRollingFileAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>PatternLayout
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dailyRollingFileAppender<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>conversionPattern <span class="token operator">=</span> <span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd <span class="token constant">HH</span><span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">.</span><span class="token constant">SSS</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token operator">%</span>t<span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">-</span>5p <span class="token operator">%</span>l <span class="token operator">%</span>m<span class="token operator">%</span>n
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dailyRollingFileAppender<span class="token punctuation">.</span>file <span class="token operator">=</span> <span class="token constant">D</span><span class="token operator">:</span>\\log4j_test<span class="token punctuation">.</span>log
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dailyRollingFileAppender<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token constant">UTF</span><span class="token operator">-</span><span class="token number">8</span>
#按照秒进行拆分  <span class="token string">'.'</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd <span class="token constant">HH</span><span class="token operator">-</span>mm<span class="token operator">-</span>ss
#按照天进行拆分  <span class="token string">'.'</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd
#按照月进行拆分  <span class="token string">'.'</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dailyRollingFileAppender<span class="token punctuation">.</span>datePattern <span class="token operator">=</span> <span class="token string">'.'</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="将日志持久化到数据库"><a href="#将日志持久化到数据库" class="header-anchor">#</a> 将日志持久化到数据库</h3> <p>创建表结构</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>	<span class="token comment">-- 字段的制定可以根据需求进行调整</span>
     <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> my_log<span class="token punctuation">(</span>
             id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
             name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'项目名称'</span><span class="token punctuation">,</span>
             create_time <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
             thread <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'线程名称'</span><span class="token punctuation">,</span>
             <span class="token keyword">level</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'日志级别'</span><span class="token punctuation">,</span>
             category <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'所在类的全路径'</span><span class="token punctuation">,</span>
             message <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'日志消息'</span><span class="token punctuation">,</span>
             <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
     <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>导入数据库驱动</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token comment">&lt;!-- 将日志持久化到数据库 --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.32<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>配置log4j.properties</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>log4j<span class="token punctuation">.</span>rootLogger <span class="token operator">=</span> trace<span class="token punctuation">,</span>dbAppender

#<span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">*</span>
#配置appender输出到数据库
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dbAppender <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>JDBCAppender
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dbAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>PatternLayout
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dbAppender<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token constant">UTF</span><span class="token operator">-</span><span class="token number">8</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dbAppender<span class="token punctuation">.</span>Driver <span class="token operator">=</span> com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dbAppender<span class="token punctuation">.</span><span class="token constant">URL</span> <span class="token operator">=</span> jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>test
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dbAppender<span class="token punctuation">.</span>User <span class="token operator">=</span> root
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dbAppender<span class="token punctuation">.</span>Password <span class="token operator">=</span> <span class="token number">123456</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>dbAppender<span class="token punctuation">.</span>sql <span class="token operator">=</span> <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">my_log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>create_time<span class="token punctuation">,</span>thread<span class="token punctuation">,</span>level<span class="token punctuation">,</span>category<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token function">values</span> <span class="token punctuation">(</span><span class="token string">'myapp'</span><span class="token punctuation">,</span><span class="token string">'%d{yyyy-MM-dd HH:mm:ss.SSS}'</span><span class="token punctuation">,</span><span class="token string">'%t'</span><span class="token punctuation">,</span><span class="token string">'%p'</span><span class="token punctuation">,</span><span class="token string">'%l'</span><span class="token punctuation">,</span><span class="token string">'%m'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="自定义logger"><a href="#自定义logger" class="header-anchor">#</a> 自定义Logger</h3> <p>目前为止我们所创建的Logger对象，默认都是继承rootLogger，配置文件中是这样配置的：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> log4j<span class="token punctuation">.</span>rootLogger <span class="token operator">=</span> trace<span class="token punctuation">,</span>consoleAppender<span class="token punctuation">,</span>dbAppender
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​<br>
我们也可以自定义logger，让其他logger来继承这个logger，这种继承关系就是按照包结构的关系来进行指定的
例如我们一直使用的</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>Logger logger <span class="token operator">=</span> Logger<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>路径就是：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>top<span class="token punctuation">.</span>tec<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>test<span class="token punctuation">.</span>Log4jTest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>它的父logger就是上层的路径或者是更上层的路径,例如：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>top<span class="token punctuation">.</span>tec<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>test
top<span class="token punctuation">.</span>tec<span class="token punctuation">.</span>log4j
top<span class="token punctuation">.</span>tec
top
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>参照Log4j源码是如何加载配置文件的。
在源码Propertyconfigurator类中，我们看到常量：log4j.logger.</p> <p><img src="/assets/img/1643444348223-039c4cc2-1f1d-4e2b-b298-2900415c8135.1d578788.png" alt="img">
这个属性值log4j.logger., 就是我们在配置文件中自定义logger时使用的前缀
例如我们自定义的Logger为：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>log4j<span class="token punctuation">.</span>logger<span class="token punctuation">.</span>top<span class="token punctuation">.</span>tec<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>test <span class="token operator">=</span> error<span class="token punctuation">,</span>fileAppender
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果自定义Logger与RootLogger都进行了配置，会使用哪个？
\1. <strong>如果自定义Logger与RootLogger配置的输出位置是不同的 则取二者的并集，配置的位置都会进行输出操作</strong>
\2. <strong>如果自定义Logger与RootLogger配置的日志级别不同，以自定的父logger的级别进行输出</strong></p> <p>完整配置文件log4j.properties</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>#配置根节点
log4j<span class="token punctuation">.</span>rootLogger <span class="token operator">=</span> trace<span class="token punctuation">,</span>consoleAppender

<span class="token function">#自定义Logger</span><span class="token punctuation">(</span>父节点输出到控制台<span class="token punctuation">)</span><span class="token punctuation">(</span>这里是根节点的父节点<span class="token punctuation">)</span>
log4j<span class="token punctuation">.</span>logger<span class="token punctuation">.</span>top<span class="token punctuation">.</span>tec<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>test <span class="token operator">=</span> info<span class="token punctuation">,</span>consoleAppender


#<span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">*</span>
#配置appender输出方式为控制台输出

log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>ConsoleAppender
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>PatternLayout
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>conversionPattern <span class="token operator">=</span> <span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd <span class="token constant">HH</span><span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">.</span><span class="token constant">SSS</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token operator">%</span>t<span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">-</span>5p <span class="token operator">%</span>l <span class="token operator">%</span>m<span class="token operator">%</span>n
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="自定义logger的应用场景"><a href="#自定义logger的应用场景" class="header-anchor">#</a> 自定义logger的应用场景</h3> <p>之所以要自定义logger，就是为了针对不同系统、不同包路径下的输出信息做更加灵活的输出操作,</p> <p>*例如：
*     我们，需要对org.apache包下的日志单独进行配置
*     <em>log4j.logger.org.apache=error,consoleAppender</em></p> <p>完整配置文件log4j.properties</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>#根节点
log4j<span class="token punctuation">.</span>rootLogger <span class="token operator">=</span> trace<span class="token punctuation">,</span>consoleAppender

<span class="token function">#配置apache的Logger</span><span class="token punctuation">(</span>这里就是根节点的父节点<span class="token punctuation">)</span>
log4j<span class="token punctuation">.</span>logger<span class="token punctuation">.</span>org<span class="token punctuation">.</span>apache <span class="token operator">=</span> error<span class="token punctuation">,</span>consoleAppender

#也可以这样<span class="token punctuation">,</span>只配置级别，打印org<span class="token punctuation">.</span>apache下的日志，就不会根节点打印一次，父节点打印一次了
# log4j<span class="token punctuation">.</span>logger<span class="token punctuation">.</span>org<span class="token punctuation">.</span>apache <span class="token operator">=</span> error

#<span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">**</span><span class="token operator">*</span>
#配置appender输出方式为控制台输出

log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>ConsoleAppender
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>PatternLayout
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>consoleAppender<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>conversionPattern <span class="token operator">=</span> <span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd <span class="token constant">HH</span><span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">.</span><span class="token constant">SSS</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token operator">%</span>t<span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">-</span>5p <span class="token operator">%</span>l <span class="token operator">%</span>m<span class="token operator">%</span>n
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>测试类</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCustomApply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//模拟当前是在org.apache包下进行输出</span>
        <span class="token comment">//Logger logger = Logger.getLogger(&quot;org.apache&quot;);</span>
        
        <span class="token comment">//Logger类本身就是org.apache.log4j包下的类</span>
        <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        logger<span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token string">&quot;apache FATAL信息 =========apache testLog4j========= &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;apache ERROR信息 =========apache testLog4j========= &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;apache WARN信息 =========apache testLog4j========= &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;apache INFO信息 =========apache testLog4j========= &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;apache DEBUG信息 =========apache testLog4j========= &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;apache TRACE信息 =========apache testLog4j========= &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">/**
         * 输出结果：
         * 2022-01-22 15:05:51.027 [main] FATAL cn.giteasy.log4j.test.TestLog4jv1.testCustomApply(TestLog4jv1.java:475) apache FATAL信息 =========apache testLog4j=========
         * 2022-01-22 15:05:51.027 [main] FATAL cn.giteasy.log4j.test.TestLog4jv1.testCustomApply(TestLog4jv1.java:475) apache FATAL信息 =========apache testLog4j=========
         * 2022-01-22 15:05:51.393 [main] ERROR cn.giteasy.log4j.test.TestLog4jv1.testCustomApply(TestLog4jv1.java:476) apache ERROR信息 =========apache testLog4j=========
         * 2022-01-22 15:05:51.393 [main] ERROR cn.giteasy.log4j.test.TestLog4jv1.testCustomApply(TestLog4jv1.java:476) apache ERROR信息 =========apache testLog4j=========
         *
         *
         * 观查输出结果，发现每条日志各输出了2次，因为我们在配置文件中，consoleAppender配置了2次，由于输出的位置appender取的是并集，所以输出2次
         *
         *      log4j.rootLogger = trace,consoleAppender
         *
         *      #配置apache的Logger
         *      log4j.logger.org.apache = error,consoleAppender
         *
         * 为了防止输出2次，我们可以将自定义log4j.logger.org.apache日志的consoleAppender日志去掉
         * 
         * 		log4j.logger.org.apache = error
         *
         */</span>

    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2024/7/11</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/java/日志/2_JUL.html" class="prev">
          JUL
        </a></span> <span class="next"><a href="/java/日志/4_JCL.html">
          JCL
        </a>
        →
      </span></p></div> </main></div> <aside class="page-sidebar"> <div class="page-side-toolbar"><div class="option-box-toc-fixed"><div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:650px"><div style="font-weight:bold;text-align:center;">Log4j</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#log4j简介" class="toc-sidebar-link">Log4j简介</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#log4j组件介绍" class="toc-sidebar-link">Log4j组件介绍</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#日志输出格式说明" class="toc-sidebar-link">日志输出格式说明</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#案例" class="toc-sidebar-link">案例</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#引入依赖" class="toc-sidebar-link">引入依赖</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#入门案例" class="toc-sidebar-link">入门案例</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#日志级别" class="toc-sidebar-link">日志级别</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#log4j的正确打开方式" class="toc-sidebar-link">Log4j的正确打开方式</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#打印log4j本身的详细信息" class="toc-sidebar-link">打印log4j本身的详细信息</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#log4j-properties配置祥解" class="toc-sidebar-link">log4j.properties配置祥解</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#输出日志到文件中" class="toc-sidebar-link">输出日志到文件中</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#按文件大小拆分日志文件" class="toc-sidebar-link">按文件大小拆分日志文件</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#按时间拆分日志文件" class="toc-sidebar-link">按时间拆分日志文件</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#将日志持久化到数据库" class="toc-sidebar-link">将日志持久化到数据库</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#自定义logger" class="toc-sidebar-link">自定义Logger</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#自定义logger的应用场景" class="toc-sidebar-link">自定义logger的应用场景</a></li></ul></li></ul></div></div></div></div></div> <div class="option-box-toc-over"><img src="/images/system/toc.png" class="nozoom"> <span class="show-txt">目录</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:550px"><div style="font-weight:bold;text-align:center;">Log4j</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#log4j简介" class="toc-sidebar-link">Log4j简介</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#log4j组件介绍" class="toc-sidebar-link">Log4j组件介绍</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#日志输出格式说明" class="toc-sidebar-link">日志输出格式说明</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#案例" class="toc-sidebar-link">案例</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#引入依赖" class="toc-sidebar-link">引入依赖</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#入门案例" class="toc-sidebar-link">入门案例</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#日志级别" class="toc-sidebar-link">日志级别</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#log4j的正确打开方式" class="toc-sidebar-link">Log4j的正确打开方式</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#打印log4j本身的详细信息" class="toc-sidebar-link">打印log4j本身的详细信息</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#log4j-properties配置祥解" class="toc-sidebar-link">log4j.properties配置祥解</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#输出日志到文件中" class="toc-sidebar-link">输出日志到文件中</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#按文件大小拆分日志文件" class="toc-sidebar-link">按文件大小拆分日志文件</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#按时间拆分日志文件" class="toc-sidebar-link">按时间拆分日志文件</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#将日志持久化到数据库" class="toc-sidebar-link">将日志持久化到数据库</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#自定义logger" class="toc-sidebar-link">自定义Logger</a></li><li class="toc-sidebar-sub-header"><a href="/java/%E6%97%A5%E5%BF%97/3_log4j.html#自定义logger的应用场景" class="toc-sidebar-link">自定义logger的应用场景</a></li></ul></li></ul></div></div></div></div></div> <div class="option-box"><img src="/images/system/wechat.png" class="nozoom"> <span class="show-txt">手机看</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.9rem">微信扫一扫</span> <img height="180px" src="https://api.qrserver.com/v1/create-qr-code/?data=https://tec.hjcwzx.top/java/%E6%97%A5%E5%BF%97/3_log4j.html" style="margin:10px;">
                可以<b>手机看</b>或分享至<b>朋友圈</b></div></div></div></div> <div class="option-box"><img src="/images/system/toggle.png" width="30px" class="nozoom"> <span class="show-txt">左栏</span></div> <div class="option-box"><img src="/images/system/xingqiu.png" width="25px" class="nozoom"> <span class="show-txt">星球</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><img height="180px" src="/images/personal/xingqiu.png" style="margin:10px;"> <b>知识星球</b>：技术侦探
            </div></div></div></div> <div class="option-box"><img src="/images/system/wexin4.png" width="25px" class="nozoom"> <span class="show-txt">交流</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.8rem;font-weight:bold;">添加微信一起学习交流</span> <img src="/images/personal/weixin.png" height="180px" style="margin:10px;">
                PS：添加时请备注<b>技术侦探</b>，谢谢！
              </div></div></div></div> <div class="option-box"><img src="/images/system/heart-1.png" width="25px" class="nozoom"> <span class="show-txt">支持我</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.8rem;font-weight:bold;">鼓励/支持/赞赏我</span> <img height="180px" src="/images/personal/encourage-head.png" style="margin:5px;"> <br>1. 不靠它生存但仍希望得到你的鼓励；
                <br>2. 时刻警醒自己保持技术人的初心，沉淀，分享，成长；
              </div></div></div></div> <div title="JUL" class="option-box" style="padding-left:2px;text-align:center;"><a href="/java/日志/2_JUL.html"><img src="/images/system/pre2.png" width="30px" class="nozoom"> <span class="show-txt">上一篇</span></a></div> <div title="JCL" class="option-box" style="padding-left:2px;text-align:center;"><a href="/java/日志/4_JCL.html"><img src="/images/system/next2.png" width="30px" class="nozoom"> <span class="show-txt">下一篇</span></a></div></div>  <div class="page-side-sitemap"><div class="option-box"><img src="/images/system/sitemap.png" class="nozoom img"> <span class="show-txt">站点图</span> <div class="sitemap-container"><h4>站点导航图
              <a href="/更新日志/更新日志.html" class="sitemap-top-link"> 更新日志</a></h4> <table class="sitemap-table"><tr><td nowrap="nowrap"><div class="sitemap-col-group">常用搜索</div></td> <td><div class="sitemap-col-item"><a href="http://www.baidu.com/" target="_blank" title="百度">
          百度
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.google.com/" target="_blank" title="Google">
          Google
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.bing.com/" target="_blank" title="Bing">
          Bing
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://github.com" target="_blank" title="Github">
          Github
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.programcreek.com/java-api-examples/index.php" target="_blank" title="搜代码">
          搜代码
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></td> <!----></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">技术社区</div></td> <td><div class="sitemap-col-item"><a href="http://www.csdn.net/" target="_blank" title="CDSN">
          CDSN
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.cnblogs.com/" target="_blank" title="博客园">
          博客园
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.oschina.net" target="_blank" title="OSChina">
          OSChina
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://segmentfault.com/" target="_blank" title="思否">
          思否
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://juejin.im" target="_blank" title="掘金">
          掘金
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.linuxidc.com/" target="_blank" title="Linux公社">
          Linux公社
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.ibm.com/developerworks/cn/" target="_blank" title="IBM 开发者">
          IBM 开发者
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://stackoverflow.com" target="_blank" title="StackOverflow">
          StackOverflow
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></td> <!----></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">Java相关</div></td> <!----> <td><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="sitemap-col-item">
          JavaSE基础
        </a><a href="/java/JavaSE高级/01_IO.html" class="sitemap-col-item">
          JavaSE高级
        </a><a href="/java/javaWeb/01_Web开发基础.html" class="sitemap-col-item">
          JavaWeb
        </a><a href="/java/JUC/1、JUC概述.html" class="sitemap-col-item">
          JUC
        </a><a href="/java/补充/JVM.html" class="sitemap-col-item">
          JVM
        </a><a href="/java/补充/枚举.html" class="sitemap-col-item">
          ENUM
        </a><a href="/java/补充/线程池.html" class="sitemap-col-item">
          线程池
        </a><a href="/java/补充/自定义注解.html" class="sitemap-col-item">
          自定义注解
        </a><a href="/java/响应式编程/前置知识.html" class="sitemap-col-item">
          响应式编程
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">Spring</div></td> <!----> <td><a href="/框架/Mybatis/01_MyBatis快速入门.html" class="sitemap-col-item">
          Mybatis
        </a><a href="/框架/Mybatis/03_MybatisPlus.html" class="sitemap-col-item">
          Mybatis Plus
        </a><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="sitemap-col-item">
          Spring
        </a><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="sitemap-col-item">
          Spring MVC
        </a><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="sitemap-col-item">
          Spring Boot
        </a><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="sitemap-col-item">
          Spring Cloud Alibaba
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">中间件&amp;插件</div></td> <!----> <td><a href="/中间件/maven/01_Maven基础.html" class="sitemap-col-item">
          Maven中央仓库
        </a><a href="/中间件/ElasticSearch/ElasticSearch.html" class="sitemap-col-item">
          ElasticSearch
        </a><a href="/中间件/redis/Redis笔记全.html" class="sitemap-col-item">
          Redis
        </a><a href="/中间件/redis/布隆过滤器.html" class="sitemap-col-item">
          布隆过滤器
        </a><a href="/中间件/rocketMq/RocketMQ.html" class="sitemap-col-item">
          RocketMQ.
        </a><a href="/中间件/git/笔记.html" class="sitemap-col-item">
          git
        </a><a href="/中间件/自定义Starter/自定义starter.html" class="sitemap-col-item">
          自定义starter
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">运维</div></td> <!----> <td><a href="/部署/nginx/Nginx.html" class="sitemap-col-item">
          Nginx
        </a><a href="/部署/docker/docker.html" class="sitemap-col-item">
          Docker
        </a><a href="/部署/linux/01_Linux_安装.html" class="sitemap-col-item">
          Linux
        </a><a href="/部署/vm/linux安装centos.html" class="sitemap-col-item">
          VM Ware
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">面向对象</div></td> <!----> <td><a href="/设计模式/创建型模式/" class="sitemap-col-item">
          设计模式
        </a></td></tr></table></div></div></div> <!----> </aside></div><div class="global-ui"><div class="read-more-wrap" style="display:none;position:absolute;bottom:0px;z-index:9999;width:100%;margin-top:-100px;font-family:PingFangSC-Regular, sans-serif;"><div id="read-more-mask" style="position: relative; height: 200px; background: -webkit-gradient(linear, 0 0%, 0 100%, from(rgba(255, 255, 255, 0)), to(rgb(255, 255, 255)));"></div> <a id="read-more-btn" target="_self" style="position: absolute; left: 50%; top: 70%; bottom: 30px;\n        transform: translate(-50%, -50%); width: 160px; height: 36px;\n         line-height: 36px; font-size: 15px; text-align: center;\n          border: 1px solid rgb(222, 104, 109); color: rgb(222, 104, 109);\n           background: rgb(255, 255, 255); cursor: pointer; border-radius: 6px;">阅读全文</a> <div id="btw-modal-wrap" style="display: none;"><div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0);"></div> <div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;"><span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 34px; font-size: 34px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">×</span> <p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px;">
            微信扫码或搜索：<span style="color: #E9405A; font-weight: bold;">智慧对话的未来</span> <br>发送：<span id="hutec-token" class="token" style="color: #e9415a; font-weight: bold; font-size: 17px; margin-bottom: 45px;">}</span> <br>即可<span style="color: #e9415a; font-weight: bold;">立即永久</span>解锁本站全部文章</p> <img src="/images/personal/qrcode.png" style="width: 180px; margin-top: 10px; margin-bottom: 30px; border: 8px solid rgb(230, 230, 230);"></div></div></div></div></div>
    <script src="/assets/js/cg-styles.js?v=1720663609756" defer></script><script src="/assets/js/cg-4.js?v=1720663609756" defer></script><script src="/assets/js/cg-39.js?v=1720663609756" defer></script><script src="/assets/js/cg-1.js?v=1720663609756" defer></script><script src="/assets/js/cg-92.js?v=1720663609756" defer></script><script src="/assets/js/cg-app.js?v=1720663609756" defer></script>
  </body>
</html>
