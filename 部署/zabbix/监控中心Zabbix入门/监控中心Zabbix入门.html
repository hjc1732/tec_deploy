<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>监控中心Zabbix入门 | 技术侦探</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <script charset="utf-8" async="async" src="/js/jquery.min.js"></script>
    <script charset="utf-8" async="async" src="/js/fingerprint2.min.js"></script>
    <script charset="utf-8" async="async" src="https://s9.cnzz.com/z_stat.php?id=1278232949&amp;web_id=1278232949"></script>
    <script>
              var _hmt = _hmt || [];
              (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?0b31b4c146bf7126aed5009e1a4a11c8";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
              })();
            </script>
    <meta name="description" content="技术并不是我们所追求的目的,而是技术创新世界">
    <meta property="article:modified_time" content="null">
    <meta property="og:title" content="监控中心Zabbix入门">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html">
    <meta name="twitter:title" content="监控中心Zabbix入门">
    <meta name="twitter:url" content="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="robots" content="all">
    <meta name="author" content="小傅哥">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="keywords" content="Java基础">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.ee4e0787.css" as="style"><link rel="preload" href="/assets/css/styles.css?v=1712123086861" as="style"><link rel="preload" href="/assets/js/cg-styles.js?v=1712123086861" as="script"><link rel="preload" href="/assets/js/cg-app.js?v=1712123086861" as="script"><link rel="preload" href="/assets/js/cg-4.js?v=1712123086861" as="script"><link rel="preload" href="/assets/js/cg-11.js?v=1712123086861" as="script"><link rel="preload" href="/assets/js/cg-1.js?v=1712123086861" as="script"><link rel="preload" href="/assets/js/cg-79.js?v=1712123086861" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.ee4e0787.css"><link rel="stylesheet" href="/assets/css/styles.css?v=1712123086861">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">技术侦探</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="nav-link">
  javaSE
</a></li><li class="dropdown-subitem"><a href="/java/javaWeb/01_Web开发基础.html" class="nav-link">
  javaWeb
</a></li><li class="dropdown-subitem"><a href="/java/JUC/1、JUC概述.html" class="nav-link">
  JUC
</a></li><li class="dropdown-subitem"><a href="/java/响应式编程/前置知识.html" class="nav-link">
  响应式编程
</a></li><li class="dropdown-subitem"><a href="/设计模式/概述/概述.html" class="nav-link">
  设计模式
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/jdbc/01_JDBC.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/db/mysql/Mysql基础/01_MySQL概述.html" class="nav-link">
  mysql
</a></li></ul></li><li class="dropdown-item"><h4>
          补充
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/补充/Retrofit2.html" class="nav-link">
  Retrofit2
</a></li><li class="dropdown-subitem"><a href="/java/补充/JVM.html" class="nav-link">
  jvm
</a></li><li class="dropdown-subitem"><a href="/java/补充/枚举.html" class="nav-link">
  枚举
</a></li><li class="dropdown-subitem"><a href="/java/补充/线程池.html" class="nav-link">
  线程池
</a></li><li class="dropdown-subitem"><a href="/java/补充/自定义注解.html" class="nav-link">
  自定义注解
</a></li></ul></li><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端/前端基础/01_HTML.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-subitem"><a href="/前端/vue/01_ECMAScript6入门.html" class="nav-link">
  vue
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/框架/DDD架构/01-ddd是什么.html" class="nav-link">
  DDD
</a></li><li class="dropdown-item"><!----> <a href="/框架/Mybatis/01_MyBatis快速入门.html" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><h4>
          Spring全家桶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="nav-link">
  SpringCloudAlibaba
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/中间件/ElasticSearch/ElasticSearch.html" class="nav-link">
  中间件 | 自研轮子
</a></div><div class="nav-item"><a href="/部署/linux/01_Linux_安装.html" class="nav-link">
  部署|运维
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><span class="title">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/实战/商城/项目笔记.html" class="nav-link">
  锋迷铺子
</a></li><li class="dropdown-item"><!----> <a href="/实战/实用工具类/DocUtils.html" class="nav-link">
  实用工具类
</a></li><li class="dropdown-item"><!----> <a href="http://520.hjcwzx.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  研究生工作平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/更新日志/更新日志.html" class="nav-link">
  更新日志
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="nav-link">
  javaSE
</a></li><li class="dropdown-subitem"><a href="/java/javaWeb/01_Web开发基础.html" class="nav-link">
  javaWeb
</a></li><li class="dropdown-subitem"><a href="/java/JUC/1、JUC概述.html" class="nav-link">
  JUC
</a></li><li class="dropdown-subitem"><a href="/java/响应式编程/前置知识.html" class="nav-link">
  响应式编程
</a></li><li class="dropdown-subitem"><a href="/设计模式/概述/概述.html" class="nav-link">
  设计模式
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/jdbc/01_JDBC.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/db/mysql/Mysql基础/01_MySQL概述.html" class="nav-link">
  mysql
</a></li></ul></li><li class="dropdown-item"><h4>
          补充
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/补充/Retrofit2.html" class="nav-link">
  Retrofit2
</a></li><li class="dropdown-subitem"><a href="/java/补充/JVM.html" class="nav-link">
  jvm
</a></li><li class="dropdown-subitem"><a href="/java/补充/枚举.html" class="nav-link">
  枚举
</a></li><li class="dropdown-subitem"><a href="/java/补充/线程池.html" class="nav-link">
  线程池
</a></li><li class="dropdown-subitem"><a href="/java/补充/自定义注解.html" class="nav-link">
  自定义注解
</a></li></ul></li><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端/前端基础/01_HTML.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-subitem"><a href="/前端/vue/01_ECMAScript6入门.html" class="nav-link">
  vue
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/框架/DDD架构/01-ddd是什么.html" class="nav-link">
  DDD
</a></li><li class="dropdown-item"><!----> <a href="/框架/Mybatis/01_MyBatis快速入门.html" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><h4>
          Spring全家桶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="nav-link">
  SpringCloudAlibaba
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/中间件/ElasticSearch/ElasticSearch.html" class="nav-link">
  中间件 | 自研轮子
</a></div><div class="nav-item"><a href="/部署/linux/01_Linux_安装.html" class="nav-link">
  部署|运维
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><span class="title">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/实战/商城/项目笔记.html" class="nav-link">
  锋迷铺子
</a></li><li class="dropdown-item"><!----> <a href="/实战/实用工具类/DocUtils.html" class="nav-link">
  实用工具类
</a></li><li class="dropdown-item"><!----> <a href="http://520.hjcwzx.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  研究生工作平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/更新日志/更新日志.html" class="nav-link">
  更新日志
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Zabbix</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/部署/zabbix/监控中心Zabbix入门/监控中心Zabbix入门.html" class="active sidebar-link">监控中心Zabbix入门</a></li><li><a href="/部署/zabbix/监控中心Zabbix进阶/监控中心Zabbix进阶.html" class="sidebar-link">监控中心Zabbix进阶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Nginx</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/部署/nginx/Nginx.html" class="sidebar-link">Nginx</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/部署/docker/微服务架构演变.html" class="sidebar-link">微服务架构</a></li><li><a href="/部署/docker/docker.html" class="sidebar-link">Docker</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/部署/linux/01_Linux_安装.html" class="sidebar-link">Linux_安装</a></li><li><a href="/部署/linux/02_Linux_简介及常用命令.html" class="sidebar-link">Linux_简介及常用命令</a></li><li><a href="/部署/linux/03_Linux_Vim使用.html" class="sidebar-link">Linux_Vim使用</a></li><li><a href="/部署/linux/04_Linux_软件安装及Java开发环境搭建.html" class="sidebar-link">Linux_软件安装及Java开发环境搭建</a></li><li><a href="/部署/linux/05_Linux_防火墙FirewallD设置.html" class="sidebar-link">Linux_防火墙FirewallD设置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vm</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/部署/vm/linux安装centos.html" class="sidebar-link">vm安装linux(centos7)</a></li><li><a href="/部署/vm/linux中网络连接的3种模式.html" class="sidebar-link">linux种网络连接的3种模式</a></li></ul></section></li></ul> </aside> <div><main class="page"> <div class="theme-default-content content__default"><h1 id="监控中心zabbix入门"><a href="#监控中心zabbix入门" class="header-anchor">#</a> 监控中心Zabbix入门</h1> <h2 id="一、监控介绍"><a href="#一、监控介绍" class="header-anchor">#</a> 一、监控介绍</h2> <ul><li><p>你用过哪些监控软件？</p></li> <li><p>zabbix 和 nagios、cacti、ganglia 有什么区别？</p></li> <li><p>zabbix 有那些好处？</p></li> <li><p>zabbix 的监控流程是什么？</p></li> <li><p>zabbix 常见监控项有那些？</p></li></ul> <h3 id="_1、cacti"><a href="#_1、cacti" class="header-anchor">#</a> 1、Cacti</h3> <p>Cacti 是一套基于 PHP、MySQL、SNMP 及 RRD Tool 开发的监测图形分析工具,Cacti 是使用轮询的方式由主服务器向设备发送数据请求来获取设备上状态数据信息的,如果设备不断增多,这个轮询的过程就非常的耗时,轮询的结果就不能即时的反应设备的状态了。Cacti 监控关注的是对数据的展示,却不关注数据异常后的反馈。如果凌晨 3 点的时候设备的某个数据出现异常,除非监控人员在屏幕前发现这个异常变化,否则是没有任何报警机制能够让我们道出现了异常。</p> <h3 id="_2、nagios"><a href="#_2、nagios" class="header-anchor">#</a> 2、Nagios</h3> <ul><li><p>Nagios 是一款开源的免费网络监控报警服务,能有效监控 Windows、Linux 和 Unix 的主机状态,交换机、路由器和防火墙等网络设置,打印机、网络投影、网络摄像等设备。在系统或服务状态异常时发出邮件或短信报警第一时间通知运维人员,在状态恢复后发出正常的邮件或短信通知。Nagios 有完善的插件功能,可以方便的根据应用服务扩展功能。</p></li> <li><p>Nagios 已经可以支持由数万台服务器或上千台网络设备组成的云技术平台的监控,它可以充分发挥自动化运维技术特点在设备和人力资源减少成本。只是 Nagios 无法将多个相同应用集群的数据集合起来,也不能监控到集群中特殊节点的迁移和恢复。</p></li></ul> <h3 id="_3、ganglia"><a href="#_3、ganglia" class="header-anchor">#</a> 3、Ganglia</h3> <ul><li><p>Ganglia 是 UC Berkeley 发起的一个开源集群监视项目,设计用于测量数以千计的节点。Ganglia 的核心包含 gmond、gmetad 以及一个 Web 前端。</p></li> <li><p>主要是用来监控系统性能,如:CPU 、内存、硬盘利用率, I/O 负载、网络流量情况等,通过曲线很容易见到每个节点的工作状态,对合理调整、分配系统资源,提高系统整体   性能起到重要作用,目前是监控HADOOP 的官方推荐服务。</p></li></ul> <h3 id="_4、zabbix"><a href="#_4、zabbix" class="header-anchor">#</a> 4、Zabbix</h3> <ul><li><p>Zabbix 是一个基于 WEB 界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案。zabbix 能监视各种网络参数,保证服务器系统的安全运营;并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题。</p></li> <li><p>Zabbix 是由 Alexei Vladishev 创建，目前由 Zabbix SIA 在持续开发和支持。</p></li> <li><p>Zabbix 是一个企业级的分布式开源监控方案。</p></li> <li><p>Zabbix 是一款能够监控各种网络参数以及服务器健康性和完整性的软件。</p></li> <li><p>Zabbix 使用灵活的通知机制，允许用户为几乎任何事件配置基于邮件的告警。这样可以快速反馈服务器的问题。基于已存储的数据，Zabbix提供了出色的报告和数据可视化功能。这些功能使得Zabbix成为容量规划的理想方案。</p></li> <li><p>Zabbix 支持主动轮询和被动捕获。</p></li> <li><p>Zabbix所有的报告、统计信息和配置参数都可以通过基于Web的前端页面进行访问。基于Web的前端页面可以确保您从任何方面评估您的网络状态和服务器的健康性。</p></li> <li><p>Zabbix是免费的。Zabbix是根据GPL通用公共许可证第2版编写和发行的。这意味着它的源代码都是免费发行的，可供公众任意使用, <a href="http://www.zabbix.com/support.php" target="_blank" rel="noopener noreferrer">商业支持<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 由Zabbix公司提供。</p></li></ul> <h2 id="二、监控区别"><a href="#二、监控区别" class="header-anchor">#</a> 二、监控区别</h2> <ul><li>​    nagios 图形不是特别好，也可以安装图形插件，但是也不怎么好看</li> <li>​    nagios 一般情况下如果需要图形可以和 cacti 配合使用</li> <li>​    cacti 的监控是轮询监控,效率低，图形相对 nagios 比较好看</li> <li>​    zabbix 和 nagios 因为是并发监控，对 cpu 的要求更高</li> <li>​    zabbix 在性能和功能上都强大很多</li> <li>​    zabbix 的图形相当漂亮</li> <li>​    支持多种监控方式 zabbix-agent  snmp 等等</li> <li>​    支持分布式监控,能监控的 agent 非常多</li> <li>​    zabbix 有图形的 web 配置界面，配置简洁</li> <li>​    zabbix 支持自动发现功能</li></ul> <h2 id="三、zabbix-监控介绍"><a href="#三、zabbix-监控介绍" class="header-anchor">#</a> 三、Zabbix 监控介绍</h2> <h3 id="_1、zabbix-监控架构"><a href="#_1、zabbix-监控架构" class="header-anchor">#</a> 1、Zabbix 监控架构</h3> <p>​                                 <img src="/assets/image-20200408150704319.png" alt="image-20200408150704319"></p> <h3 id="_3、zabbix-优点"><a href="#_3、zabbix-优点" class="header-anchor">#</a> 3、Zabbix 优点</h3> <ul><li><p>开源,无软件成本投入</p></li> <li><p>Server 对设备性能要求低</p></li> <li><p>支持设备多,自带多种监控模板</p></li> <li><p>支持分布式集中管理,有自动发现功能,可以实现自动化监控</p></li> <li><p>开放式接口,扩展性强,插件编写容易</p></li> <li><p>当监控的 item 比较多服务器队列比较大时可以采用主动状态,被监控客户端主动 从server 端去下载需要监控的 item 然后取数据上传到 server 端。 这种方式对服务器的负载比较小。</p></li> <li><p>Api 的支持,方便与其他系统结合</p></li></ul> <h3 id="_4、zabbix-缺点"><a href="#_4、zabbix-缺点" class="header-anchor">#</a> 4、Zabbix 缺点</h3> <ul><li>​    需在被监控主机上安装 agent,所有数据都存在数据库里, 产生的数据据很大,瓶颈主要在数据库。</li> <li>​    项目批量修改不方便</li> <li>​     社区虽然成熟，但是中文资料相对较少，服务支持有限；</li> <li>​     入门容易，能实现基础的监控，但是深层次需求需要非常熟悉Zabbix并进行大量的二次定制开发难度较大</li> <li>​    系统级别报警设置相对比较多，如果不筛选的话报警邮件会很多；并且自定义的项目报警需要自己设置，过程比较繁琐；</li> <li>​     缺少数据汇总功能，如无法查看一组服务器平均值，需进行二次开发；</li></ul> <h3 id="_5、zabbix-监控系统监控对象"><a href="#_5、zabbix-监控系统监控对象" class="header-anchor">#</a> 5、Zabbix 监控系统监控对象</h3> <ul><li><p>数据库：   MySQL,MariaDB,Oracle,SQL Server     agent</p></li> <li><p>应用软件：Nginx,Apache,PHP,Tomcat                    agent
-------------------------------------------------------------------------------------------------------------------------------</p></li> <li><p>集群：      LVS,Keepalived,HAproxy,RHCS,F5         agent</p></li> <li><p>虚拟化：   VMware,KVM,XEN ,docker,k8s              agent</p></li> <li><p>操作系统：Linux,Unix,Windows性能参数               agent
-------------------------------------------------------------------------------------------------------------------------------</p></li> <li><p>硬件： 服务器，存储，网络设备                              IPMI</p></li> <li><p>网络： 网络环境（内网环境，外网环境）              SNMP
-------------------------------------------------------------------------------------------------------------------------------</p></li></ul> <p><img src="/assets/image-20200408144620616.png" alt="image-20200408144620616"></p> <h3 id="_6、zabbix监控方式"><a href="#_6、zabbix监控方式" class="header-anchor">#</a> 6、Zabbix监控方式</h3> <h4 id="_1、被动模式"><a href="#_1、被动模式" class="header-anchor">#</a> 1、被动模式</h4> <ul><li>被动检测：相对于agent而言；agent, <strong>server向agent请求获取配置的各监控项相关的数据</strong>，agent接收请求、获取数据并响应给server；</li></ul> <h4 id="_2、主动模式"><a href="#_2、主动模式" class="header-anchor">#</a> 2、主动模式</h4> <ul><li><p>主动检测：相对于agent而言；agent(active),<strong>agent向server请求与自己相关监控项配置</strong>，主动地将server配置的监控项相关的数据发送给server；</p></li> <li><p>主动监控能极大节约监控server 的资源。</p></li></ul> <h3 id="_7、zabbix-架构"><a href="#_7、zabbix-架构" class="header-anchor">#</a> 7、Zabbix 架构</h3> <p>Zabbix由几个主要的软件组件构成，这些组件的功能如下。</p> <p><img src="/assets/img/111.f09d5995.png" alt="111"></p> <h4 id="_1、zabbix-server"><a href="#_1、zabbix-server" class="header-anchor">#</a> 1、Zabbix Server</h4> <ul><li>Zabbix server 是 agent 程序报告系统可用性、系统完整性和统计数据的核心组件，是所有配置信息、统计信息和操作数据的核心存储器。</li></ul> <h4 id="_2、zabbix-数据库存储"><a href="#_2、zabbix-数据库存储" class="header-anchor">#</a> 2、Zabbix 数据库存储</h4> <ul><li>所有配置信息和 Zabbix 收集到的数据都被存储在数据库中。</li></ul> <h4 id="_3、zabbix-web-界面"><a href="#_3、zabbix-web-界面" class="header-anchor">#</a> 3、Zabbix Web 界面</h4> <ul><li><p>为了从任何地方和任何平台都可以轻松的访问Zabbix, 我们提供基于Web的Zabbix界面。该界面是Zabbix Server的一部分，通常(但不一定)跟Zabbix Server运行在同一台物理机器上。</p></li> <li><p>如果使用 SQLite,Zabbix Web 界面必须要跟Zabbix Server运行在同一台物理机器上。</p></li></ul> <h4 id="_4、zabbix-proxy-代理服务器"><a href="#_4、zabbix-proxy-代理服务器" class="header-anchor">#</a> 4、Zabbix Proxy 代理服务器</h4> <ul><li>Zabbix proxy 可以替Zabbix Server收集性能和可用性数据。Proxy代理服务器是Zabbix软件可选择部署的一部分；当然，Proxy代理服务器可以帮助单台Zabbix Server分担负载压力。</li></ul> <h4 id="_5、zabbix-agent-监控代理"><a href="#_5、zabbix-agent-监控代理" class="header-anchor">#</a> 5、Zabbix Agent 监控代理</h4> <ul><li>Zabbix agents监控代理 部署在监控目标上，能够主动监控本地资源和应用程序，并将收集到的数据报告给Zabbix Server。</li></ul> <h4 id="_6、zabbix-数据流"><a href="#_6、zabbix-数据流" class="header-anchor">#</a> 6、Zabbix 数据流</h4> <ul><li><p>监控方面，为了创建一个监控项(item)用于采集数据，必须先创建一个主机（host）。</p></li> <li><p>告警方面，在监控项里创建触发器（trigger），通过触发器（trigger）来触发告警动作（action）。 因此，如果你想收到Server XCPU负载过高的告警，必须满足</p></li></ul> <p>​      1、为Server X创建一个host并关联一个用于对CPU进行监控的监控项（Item）。</p> <p>​      2、创建一个Trigger，设置成当CPU负载过高时会触发</p> <p>​      3、Trigger被触发，发送告警邮件</p> <p>虽然看起来有很多步骤，但是使用模板的话操作起来其实很简单，Zabbix 这样的设计使得配置机制非常灵活易用。</p> <h3 id="_8、zabbix-常用术语的含义"><a href="#_8、zabbix-常用术语的含义" class="header-anchor">#</a> 8、Zabbix 常用术语的含义</h3> <p><img src="/assets/image-20200408144725253.png" alt="image-20200408144725253"></p> <p><img src="/assets/image-20200408144903103.png" alt="image-20200408144903103"></p> <h4 id="_1、主机-host"><a href="#_1、主机-host" class="header-anchor">#</a> 1、主机 (host)</h4> <ul><li>一台你想监控的网络设备，用IP或域名表示</li></ul> <h4 id="_2、主机组-host-group"><a href="#_2、主机组-host-group" class="header-anchor">#</a> 2、主机组 (host group)</h4> <ul><li>主机的逻辑组；它包含主机和模板。一个主机组里的主机和模板之间并没有任何直接的关联。通常在给不同用户组的主机分配权限时候使用主机组。</li></ul> <h4 id="_3、监控项-item"><a href="#_3、监控项-item" class="header-anchor">#</a> 3、监控项 (item)</h4> <ul><li>你想要接收的主机的特定数据，一个度量数据。</li></ul> <h4 id="_4、触发器-trigger"><a href="#_4、触发器-trigger" class="header-anchor">#</a> 4、触发器 (trigger)</h4> <ul><li>一个被用于定义问题阈值和“评估”监控项接收到的数据的逻辑表达式
当接收到的数据高于阈值时，触发器从“OK”变成“Problem”状态。当接收到的数据低于阈值时，触发器保留/返回一个“OK”的状态。</li></ul> <h4 id="_5、事件-event"><a href="#_5、事件-event" class="header-anchor">#</a> 5、事件 (event)</h4> <ul><li>单次发生的需要注意的事情，例如触发器状态改变或发现有监控代理自动注册</li></ul> <h4 id="_6、异常-problem"><a href="#_6、异常-problem" class="header-anchor">#</a> 6、异常 (problem)</h4> <ul><li>一个处在“异常”状态的触发器</li></ul> <h4 id="_7、动作-action"><a href="#_7、动作-action" class="header-anchor">#</a> 7、动作 (action)</h4> <ul><li>一个对事件做出反应的预定义的操作。</li> <li>一个动作由操作(例如发出通知)和条件(当时操作正在发生)组成</li></ul> <h4 id="_8、升级-escalation"><a href="#_8、升级-escalation" class="header-anchor">#</a> 8、升级 (escalation)</h4> <ul><li>一个在动作内执行操作的自定义场景; 发送通知/执行远程命令的序列</li></ul> <h4 id="_9、媒介-media"><a href="#_9、媒介-media" class="header-anchor">#</a> 9、媒介 (media)</h4> <ul><li>发送告警通知的手段；告警通知的途径</li></ul> <h4 id="_10、通知-notification"><a href="#_10、通知-notification" class="header-anchor">#</a> 10、通知 (notification)</h4> <ul><li>利用已选择的媒体途径把跟事件相关的信息发送给用户</li></ul> <h4 id="_11、远程命令-remote-command"><a href="#_11、远程命令-remote-command" class="header-anchor">#</a> 11、远程命令 (remote command)</h4> <ul><li>一个预定义好的，满足一些条件的情况下，可以在被监控主机上自动执行的命令</li></ul> <h4 id="_12、模版-template"><a href="#_12、模版-template" class="header-anchor">#</a> 12、模版 (template)</h4> <ul><li>一组可以被应用到一个或多个主机上的实体（监控项，触发器，图形，聚合图形，应用，LLD，Web场景）的集合</li> <li>模版的任务就是加快对主机监控任务的实施；也可以使监控任务的批量修改更简单。模版是直接关联到每台单独的主机上。</li></ul> <h4 id="_13、应用-application"><a href="#_13、应用-application" class="header-anchor">#</a> 13、应用 (application)</h4> <ul><li>一组监控项组成的逻辑分组</li></ul> <h4 id="_14、web-场景-web-scenario"><a href="#_14、web-场景-web-scenario" class="header-anchor">#</a> 14、web 场景 (web scenario)</h4> <ul><li>利用一个或多个HTTP请求来检查网站的可用性</li></ul> <h4 id="_15、前端-frontend"><a href="#_15、前端-frontend" class="header-anchor">#</a> 15、前端 (frontend)</h4> <ul><li>Zabbix提供的web界面</li></ul> <h4 id="_16、zabbix-api"><a href="#_16、zabbix-api" class="header-anchor">#</a> 16、Zabbix API</h4> <ul><li>Zabbix API允许你使用JSON RPC协议 <strong>(是一个无状态且轻量级的远程过程调用（RPC）传送协议，其传递内容透过 JSON 为主)</strong> 来创建、更新和获取Zabbix对象（如主机、监控项、图形和其他）信息或者执行任何其他的自定义的任务</li></ul> <h4 id="_17、zabbix-server"><a href="#_17、zabbix-server" class="header-anchor">#</a> 17、Zabbix server</h4> <ul><li>Zabbix软件实现监控的核心程序，主要功能是与Zabbix proxies和Agents进行交互、触发器计算、发送告警通知；并将数据集中保存等</li></ul> <h4 id="_18、zabbix-agent"><a href="#_18、zabbix-agent" class="header-anchor">#</a> 18、Zabbix agent</h4> <ul><li>一个部署在监控对象上的，能够主动监控本地资源和应用的程序</li> <li>Zabbix agent 部署在监控的目标上，主动监测本地的资源和应用(硬件驱动，内存，处理器统计等)。</li> <li>Zabbix agent收集本地的操作信息并将数据报告给Zabbix server用于进一步处理。一旦出现异常 (比如硬盘空间已满或者有崩溃的服务进程), Zabbix server会主动警告管理员指定机器上的异常。. Zabbix agents 的极端高效缘于它可以利用本地系统调用来完成统计数据的收集。</li></ul> <h4 id="_19、被动-passive-和主动-active-检查"><a href="#_19、被动-passive-和主动-active-检查" class="header-anchor">#</a> 19、被动（passive）和主动（active）检查</h4> <p>Zabbix agents 可以执行被动和主动两种检查方式</p> <p>1、被动检查（passive check） 模式中 agent 应答数据请求，Zabbix server（或者proxy）询问agent数据,如CPU 的负载情况，然后 Zabbix agent 回送结果。</p> <p>2、主动检查（Active checks） 处理过程将相对复杂。 Agent 必须首先从 Zabbix sever 索取监控项列表以进行独立处理，然后周期性地发送新的值给server。</p> <p>执行被动或主动检查是通过选择相应的监测项目类型来配置的。item type. Zabbix agent 处理监控项类型有 Zabbix agent 和 Zabbix agent (active)。</p> <h4 id="_20、zabbix-proxy"><a href="#_20、zabbix-proxy" class="header-anchor">#</a> 20、Zabbix proxy</h4> <ul><li></li> <li></li> <li>一个帮助 Zabbix Server 收集数据，分担Zabbix Server的负载的程序</li> <li>Zabbix Proxy 是一个可以从一个或多个受监控设备收集监控数据，并将信息发送到Zabbix sever的进程，基本上是代表 sever工作的。 所有收集的数据都在本地进行缓存，然后传送到 proxy 所属的 Zabbix sever。</li> <li>部署 Proxy 是可选的，但是可能非常有益于分散单个 Zabbix sever 的负载。 如果只有 proxy 收集数据，sever上的进程就会减少 CPU 消耗和磁盘 I / O 负载。</li> <li>Zabbix proxy 是完成远程区域、分支机构、没有本地管理员的网络的集中监控的理想解决方案。</li> <li>Zabbix proxy需要使用独立的数据库。</li></ul> <h2 id="四、zabbix-监控系统部署"><a href="#四、zabbix-监控系统部署" class="header-anchor">#</a> 四、Zabbix 监控系统部署</h2> <h3 id="_1、实验准备"><a href="#_1、实验准备" class="header-anchor">#</a> 1、实验准备</h3> <p>centos7.5 系统服务器3台、 一台作为监控服务器， 两台台作为被监控节点， 配置好yum源、 防火墙关闭、 各节点时钟服务同步、 各节点之间可以通过主机名互相通信。</p> <h4 id="_1、所有机器关闭防火墙和-selinux"><a href="#_1、所有机器关闭防火墙和-selinux" class="header-anchor">#</a> 1、所有机器关闭防火墙和 selinux</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># setenforce 0 （修改配置文件关闭）</span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config </span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># systemctl stop firewalld.service</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2、实验服务器配置"><a href="#_2、实验服务器配置" class="header-anchor">#</a> 2、实验服务器配置</h4> <p><img src="/assets/img/1204916-20171202115141620-413101680.80c276d6.png" alt="img"></p> <h3 id="_2、zabbix的安装"><a href="#_2、zabbix的安装" class="header-anchor">#</a> 2、Zabbix的安装</h3> <h4 id="_1、更新-yum-仓库"><a href="#_1、更新-yum-仓库" class="header-anchor">#</a> 1、更新 yum 仓库</h4> <h5 id="_1、下载-yum-仓库"><a href="#_1、下载-yum-仓库" class="header-anchor">#</a> 1、下载 yum 仓库</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum -y install wget</span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># wget http://repo.zabbix.com/zabbix/3.4/rhel/7/x86_64/zabbix-release-3.4-2.el7.noarch.rpm</span>

<span class="token comment"># 安装zabbix源（官方）</span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># rpm -ivh https://repo.zabbix.com/zabbix/4.2/rhel/7/x86_64/zabbix-release-4.2-1.el7.noarch.rpm</span>

<span class="token comment"># 阿里云镜像地址查看</span>
<span class="token comment"># https://developer.aliyun.com/mirror/</span>
<span class="token comment"># 阿里云版本(使用这个)</span>
<span class="token function">wget</span> https://mirrors.aliyun.com/zabbix/zabbix/4.4/rhel/7/x86_64/zabbix-release-4.4-1.el7.noarch.rpm

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="_2、安装-yum-仓库"><a href="#_2、安装-yum-仓库" class="header-anchor">#</a> 2、安装 yum 仓库</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># rpm -ivh zabbix-release-4.2-1.el7.noarch.rpm</span>

<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># rpm -ivh zabbix-release-4.4-1.el7.noarch.rpm (使用这个)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_3、更新-yum-仓库"><a href="#_3、更新-yum-仓库" class="header-anchor">#</a> 3、更新 yum 仓库</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum repolist </span>
Loaded plugins: fastestmirror, langpacks  
Loading mirror speeds from cached hostfile
zabbix-non-supported                                                      <span class="token number">4</span>/4
repo <span class="token function">id</span>                     repo name                                   status
base                        base                                         <span class="token number">9,363</span>
epel                        epel                                        <span class="token number">11,349</span>
zabbix/x86_64               Zabbix Official Repository - x86_64             <span class="token number">80</span>
zabbix-non-supported/x86_64 Zabbix Official Repository non-supported -       <span class="token number">4</span>
repolist: <span class="token number">20,796</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="_4、安装-zabbix"><a href="#_4、安装-zabbix" class="header-anchor">#</a> 4、安装 Zabbix</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># yum -y install epel-release.noarch</span>
<span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># yum -y install zabbix-agent zabbix-get zabbix-sender zabbix-server-mysql zabbix-web zabbix-web-mysql (使用这个)</span>
或者（官方）
<span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># yum-config-manager --enable rhel-7-server-optional-rpms</span>



yum <span class="token parameter variable">-y</span> <span class="token function">install</span> zabbix-agent zabbix-get zabbix-sender zabbix-server-mysql zabbix-web zabbix-web-mysql
失败时，查看哪个安装成功，去阿里云地址  https://mirrors.aliyun.com/zabbix/zabbix/4.4/rhel/7/x86_64/?spm<span class="token operator">=</span>a2c6h.25603864.0.0.30947be44D4AoP   找到下载错误的包，复制地址，
使用wget命令，下载出错误的包，之后使用  yum localinstall 加下载的文件，
之后再次下载验证yum <span class="token parameter variable">-y</span> <span class="token function">install</span> zabbix-agent zabbix-get zabbix-sender zabbix-server-mysql zabbix-web zabbix-web-mysql看是否安装成功

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_2-安装设置数据库"><a href="#_2-安装设置数据库" class="header-anchor">#</a> 2）安装设置数据库：</h4> <h5 id="_1、创建-mariadb-repo"><a href="#_1、创建-mariadb-repo" class="header-anchor">#</a> 1、创建 mariadb.repo</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/yum.repos.d/mariadb.repo</span>
写入以下内容：
<span class="token punctuation">[</span>mariadb<span class="token punctuation">]</span>
name <span class="token operator">=</span> MariaDB 
baseurl <span class="token operator">=</span> https://mirrors.ustc.edu.cn/mariadb/yum/10.4/centos7-amd64 
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://mirrors.ustc.edu.cn/mariadb/yum/RPM-GPG-KEY-MariaDB 
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="_2、yum-安装最新版本-mariadb"><a href="#_2、yum-安装最新版本-mariadb" class="header-anchor">#</a> 2、yum 安装最新版本 mariadb</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum install -y MariaDB-server MariaDB-client</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_3、修改配置文件"><a href="#_3、修改配置文件" class="header-anchor">#</a> 3、修改配置文件</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/my.cnf.d/server.cnf</span>
    <span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
    skip_name_resolve <span class="token operator">=</span> ON          <span class="token comment"># 跳过主机名解析</span>
    innodb_file_per_table <span class="token operator">=</span> ON      <span class="token comment"># 开启独立表空间</span>
    innodb_buffer_pool_size <span class="token operator">=</span> 256M  <span class="token comment"># 缓存池大小</span>
    max_connections <span class="token operator">=</span> <span class="token number">2000</span>          <span class="token comment"># 最大连接数</span>
    log-bin <span class="token operator">=</span> master-log            <span class="token comment"># 开启二进制日志</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>4、重启数据库服务</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># systemctl restart mariadb</span>
<span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># mysql_secure_installation  # 初始化mariadb</span>

<span class="token punctuation">[</span>root@blank ~<span class="token punctuation">]</span><span class="token comment">#  mysql_secure_installation</span>

NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB
      SERVERS IN PRODUCTION USE<span class="token operator">!</span>  PLEASE READ EACH STEP CAREFULLY<span class="token operator">!</span>

In order to log into MariaDB to secure it, we<span class="token string">'ll need the current
password for the root user. If you'</span>ve just installed MariaDB, and
haven<span class="token string">'t set the root password yet, you should just press enter here.

Enter current password for root (enter for none):
OK, successfully used password, moving on...

Setting the root password or using the unix_socket ensures that nobody
can log into the MariaDB root user without the proper authorisation.

You already have your root account protected, so you can safely answer '</span>n<span class="token string">'.

Switch to unix_socket authentication [Y/n] Y
Enabled successfully!
Reloading privilege tables..
 ... Success!


You already have your root account protected, so you can safely answer '</span>n<span class="token string">'.

Change the root password? [Y/n] N
 ... skipping.

By default, a MariaDB installation has an anonymous user, allowing anyone
to log into MariaDB without having to have a user account created for
them.  This is intended only for testing, and to make the installation
go a bit smoother.  You should remove them before moving into a
production environment.

Remove anonymous users? [Y/n] Y
 ... Success!

Normally, root should only be allowed to connect from '</span>localhost<span class="token string">'.  This
ensures that someone cannot guess at the root password from the network.

Disallow root login remotely? [Y/n] N
 ... skipping.

By default, MariaDB comes with a database named '</span><span class="token builtin class-name">test</span><span class="token string">' that anyone can
access.  This is also intended only for testing, and should be removed
before moving into a production environment.

Remove test database and access to it? [Y/n] Y
 - Dropping test database...
 ... Success!
 - Removing privileges on test database...
 ... Success!

Reloading the privilege tables will ensure that all changes made so far
will take effect immediately.

Reload privilege tables now? [Y/n] Y
 ... Success!

Cleaning up...

All done!  If you'</span>ve completed all of the above steps, your MariaDB
installation should now be secure.

Thanks <span class="token keyword">for</span> using MariaDB<span class="token operator">!</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><p>5、创建数据库并授权账号</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>输入mysql并回车

MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> create database zabbix character <span class="token builtin class-name">set</span> <span class="token string">'utf8'</span><span class="token punctuation">;</span>  <span class="token comment"># 创建zabbix数据库</span>
MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> grant all on zabbix.* to <span class="token string">'zbxuser'</span>@<span class="token string">'192.168.197.%'</span> identified by <span class="token string">'zabbix'</span><span class="token punctuation">;</span>										<span class="token comment"># 注意授权网段</span>
MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> grant all on zabbix.* to <span class="token string">'zbxuser'</span>@<span class="token string">'localhost'</span> identified by <span class="token string">'zabbix'</span><span class="token punctuation">;</span>	
                        <span class="token comment"># 注意授权localhost</span>
MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span>           <span class="token comment"># 刷新授权</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>6、导入 Zabbix 服务表
查看 zabbix-server-mysql 这个包提供了什么</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># rpm -ql zabbix-server-mysql</span>
/etc/logrotate.d/zabbix-server
/etc/zabbix/zabbix_server.conf
/usr/lib/systemd/system/zabbix-server.service
/usr/lib/tmpfiles.d/zabbix-server.conf
/usr/lib/zabbix/alertscripts
/usr/lib/zabbix/externalscripts
/usr/sbin/zabbix_server_mysql
/usr/share/doc/zabbix-server-mysql-3.2.6
/usr/share/doc/zabbix-server-mysql-3.2.6/AUTHORS
/usr/share/doc/zabbix-server-mysql-3.2.6/COPYING
/usr/share/doc/zabbix-server-mysql-3.2.6/ChangeLog
/usr/share/doc/zabbix-server-mysql-3.2.6/NEWS
/usr/share/doc/zabbix-server-mysql-3.2.6/README
/usr/share/doc/zabbix-server-mysql-3.2.6/create.sql.gz      <span class="token comment"># 生成表的各种脚本</span>
/usr/share/man/man8/zabbix_server.8.gz
/var/log/zabbix
/var/run/zabbix
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>使用 create.sql.gz 生成所需要的表</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>/usr/share/doc/zabbix-server-mysql-4.4.10/create.sql.gz


<span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># gzip -d create.sql.gz</span>
<span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># head  create.sql           #查看一下表头</span>
CREATE TABLE <span class="token variable"><span class="token variable">`</span><span class="token function">users</span><span class="token variable">`</span></span> <span class="token punctuation">(</span>
    <span class="token variable"><span class="token variable">`</span>userid<span class="token variable">`</span></span>                 bigint unsigned                           NOT NULL,
    <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">alias</span><span class="token variable">`</span></span>                  varchar<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>    DEFAULT <span class="token string">''</span>                NOT NULL,
    <span class="token variable"><span class="token variable">`</span>name<span class="token variable">`</span></span>                   varchar<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>    DEFAULT <span class="token string">''</span>                NOT NULL,
    <span class="token variable"><span class="token variable">`</span>surname<span class="token variable">`</span></span>                varchar<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>    DEFAULT <span class="token string">''</span>                NOT NULL,
    <span class="token variable"><span class="token variable">`</span><span class="token function">passwd</span><span class="token variable">`</span></span>                 char<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>        DEFAULT <span class="token string">''</span>                NOT NULL,
    <span class="token variable"><span class="token variable">`</span>url<span class="token variable">`</span></span>                    varchar<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>    DEFAULT <span class="token string">''</span>                NOT NULL,
    <span class="token variable"><span class="token variable">`</span>autologin<span class="token variable">`</span></span>              integer         DEFAULT <span class="token string">'0'</span>               NOT NULL,
    <span class="token variable"><span class="token variable">`</span>autologout<span class="token variable">`</span></span>             integer         DEFAULT <span class="token string">'900'</span>             NOT NULL,
    <span class="token variable"><span class="token variable">`</span>lang<span class="token variable">`</span></span>                   varchar<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>      DEFAULT <span class="token string">'en_GB'</span>           NOT NULL,
    


<span class="token function">vim</span> create.sql 
添加  USE zabbix<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>查看表头发现没有创建数据库的命令，这正是手动创建数据库的原因。把所需表导入数据库即可：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>先执行这俩行，纠正zabbix的字符集，默认创建的字符集不对
drop database zabbix<span class="token punctuation">;</span> 
create database zabbix charset utf8 collate utf8_bin<span class="token punctuation">;</span> 


<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># mysql -uzbxuser -h192.168.37.111 -p zabbix &lt; create.sql </span>
Enter password:

数据导入<span class="token punctuation">(</span>使用这个<span class="token punctuation">)</span>
mysql <span class="token parameter variable">-u</span> zbxuser  <span class="token parameter variable">-p</span> zabbix <span class="token operator">&lt;</span> create.sql <span class="token punctuation">(</span>使用这个<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>导入以后，我们进去数据库查看一下：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># mysql -uzbxuser -h192.168.37.111 -p</span>
Enter password:
MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> show databases<span class="token punctuation">;</span>
+--------------------+
<span class="token operator">|</span> Database           <span class="token operator">|</span>
+--------------------+
<span class="token operator">|</span> information_schema <span class="token operator">|</span>
<span class="token operator">|</span> zabbix             <span class="token operator">|</span>
+--------------------+
MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> use zabbix<span class="token punctuation">;</span>
Database changed
MariaDB <span class="token punctuation">[</span>zabbix<span class="token punctuation">]</span><span class="token operator">&gt;</span> show tables<span class="token punctuation">;</span>
+----------------------------+
<span class="token operator">|</span> Tables_in_zabbix           <span class="token operator">|</span>
+----------------------------+
<span class="token operator">|</span> acknowledges               <span class="token operator">|</span>
<span class="token operator">|</span> actions                    <span class="token operator">|</span>
<span class="token operator">|</span> alerts                     <span class="token operator">|</span>
……
<span class="token operator">|</span> usrgrp                     <span class="token operator">|</span>
<span class="token operator">|</span> valuemaps                  <span class="token operator">|</span>
+----------------------------+
<span class="token number">127</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>可以看出来，我们的数据已经导入成功了。</p> <h3 id="_3、配置-server-端"><a href="#_3、配置-server-端" class="header-anchor">#</a> 3、配置 server 端</h3> <p>数据库准备好了以后，我们要去修改 server 端的配置文件。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd /etc/zabbix/</span>
<span class="token punctuation">[</span>root@qfedu.com zabbix<span class="token punctuation">]</span><span class="token comment"># ls</span>
web  zabbix_agentd.conf  zabbix_agentd.d  zabbix_server.conf
<span class="token comment">#为了方便我们以后恢复，我们把配置文件备份一下</span>
<span class="token punctuation">[</span>root@qfedu.com zabbix<span class="token punctuation">]</span><span class="token comment"># cp zabbix_server.conf{,.bak}</span>
<span class="token punctuation">[</span>root@qfedu.com zabbix<span class="token punctuation">]</span><span class="token comment"># vim zabbix_server.conf</span>
<span class="token assign-left variable">ListenPort</span><span class="token operator">=</span><span class="token number">10051</span>            <span class="token comment"># 默认监听端口</span>
<span class="token assign-left variable">SourceIP</span><span class="token operator">=</span><span class="token number">192.168</span>.37.111     <span class="token comment"># 发采样数据请求的 IP   (填写本机ip，也就是外部连接的ip)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_1、zabbix-日志"><a href="#_1、zabbix-日志" class="header-anchor">#</a> 1、Zabbix 日志</h4> <ul><li>默认用文件记录，也可以发送给我们的 rsyslog 日志记录系统，如果我们选择默认，则日志存放在 LogFile=/var/log/zabbix/zabbix_server.log 中，也可以自己设置。</li></ul> <h4 id="_2、日志的滚动"><a href="#_2、日志的滚动" class="header-anchor">#</a> 2、日志的滚动</h4> <ul><li>默认值为1，表示滚动。我们设为0则表示不滚动。当数据特别多的时候，我们也可以设置成为1，然后在 Maximum size of log file in MB 设置当数据文件最大到多少时会自动滚动。</li></ul> <p>​                                                                                  <img src="data:image/png;base64,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" alt="img"></p> <h4 id="_3、日志的级别"><a href="#_3、日志的级别" class="header-anchor">#</a> 3、日志的级别</h4> <ul><li>一共有6个级别。我们可以根据自己的需要来设置级别。其中0表示输出最少的信息，5表示输出最详细的信息，默认值为3，设置为3的话就表示，0、1、2、3四个级别都显示。考虑到生产系统中的压力时，这里的信息，如果没有必要的话，越简单越好，只要在出错的时候，我们可以依据其进行排错即可。</li></ul> <p>​                                       <img src="/assets/img/1204916-20171202111508870-541941322.dfd269ac.png" alt="img"></p> <h4 id="_4、数据库相关的设置"><a href="#_4、数据库相关的设置" class="header-anchor">#</a> 4、数据库相关的设置</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>    <span class="token assign-left variable">DBHost</span><span class="token operator">=</span><span class="token number">192.168</span>.37.111       <span class="token comment">#数据库对外的主机</span>
    <span class="token assign-left variable">DBName</span><span class="token operator">=</span>zabbix               <span class="token comment">#数据库名称</span>
    <span class="token assign-left variable">DBUser</span><span class="token operator">=</span>zbxuser              <span class="token comment">#数据库用户</span>
    <span class="token assign-left variable">DBPassword</span><span class="token operator">=</span>keer             <span class="token comment">#数据库密码</span>
    <span class="token assign-left variable">DBPort</span><span class="token operator">=</span><span class="token number">3306</span>                 <span class="token comment">#数据库启动端口</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><strong>补充</strong>：</p> <p>1、使用 grep -i &quot;^####&quot; zabbix_server.conf  来查看配置文件中有哪些大段</p> <p>2、使用 grep -i &quot;^###&quot; zabbix_server.conf 来查看配置文件中每一段中的配置项有哪些</p> <p>3、查看整体去除#和$:        cat zabbix_server.conf | grep -v '#' | grep -v '^$'</p></blockquote> <h4 id="_5、启动服务"><a href="#_5、启动服务" class="header-anchor">#</a> 5、启动服务</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@server zabbix<span class="token punctuation">]</span><span class="token comment"># systemctl start zabbix-server.service</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_6、确认服务端口开启"><a href="#_6、确认服务端口开启" class="header-anchor">#</a> 6、确认服务端口开启</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@server zabbix<span class="token punctuation">]</span><span class="token comment"># ss -nutl |grep 10051</span>
tcp    LISTEN     <span class="token number">0</span>      <span class="token number">128</span>       *:10051                 *:*                  
tcp    LISTEN     <span class="token number">0</span>      <span class="token number">128</span>      :::10051                :::*    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4、配置-web-gui"><a href="#_4、配置-web-gui" class="header-anchor">#</a> 4、配置 web GUI</h3> <h4 id="_1、查找-web-gui-的配置文件"><a href="#_1、查找-web-gui-的配置文件" class="header-anchor">#</a> 1、查找 web GUI 的配置文件</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># rpm -ql zabbix-web | less</span>
/etc/httpd/conf.d/zabbix.conf
/etc/zabbix/web
/etc/zabbix/web/maintenance.inc.php
/etc/zabbix/web/zabbix.conf.php
/usr/share/doc/zabbix-web-3.2.6
/usr/share/doc/zabbix-web-3.2.6/AUTHORS
/usr/share/doc/zabbix-web-3.2.6/COPYING
/usr/share/doc/zabbix-web-3.2.6/ChangeLog
/usr/share/doc/zabbix-web-3.2.6/NEWS
/usr/share/doc/zabbix-web-3.2.6/README
……
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_2、编辑配置文件"><a href="#_2、编辑配置文件" class="header-anchor">#</a> 2、编辑配置文件</h4> <ul><li>/etc/httpd/conf.d/zabbix.conf 文件，这个配置文件就是做映射的文件</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Alias /zabbix /usr/share/zabbix     <span class="token comment"># 访问的时候要在主机后加上/zabbix来访问服务</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1204916-20171202111541714-86449116.b8da54d6.png" alt="img"></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>php_value max_execution_time 300
php_value memory_limit 128M
php_value post_max_size 16M
php_value upload_max_filesize 2M
php_value max_input_time 300
php_value max_input_vars 10000
php_value always_populate_raw_post_data -1
php_value date.timezone  Asia/Shanghai
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>注意： 时区是一定要设置的，这里被注释掉是因为，在 php 的配置文件中设置时区，如果在php配置文件中设置时区，则对所有的 php 服务均有效，如果在 zabbix.conf 中设置时区，则仅对zabbix服务有效。所以，在 php 配置文件中设置时区：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/php.ini</span>
    <span class="token punctuation">[</span>Date<span class="token punctuation">]</span>
    <span class="token punctuation">;</span> Defines the default timezone used by the <span class="token function">date</span> functions
    <span class="token punctuation">;</span> http://php.net/date.timezone
    date.timezone <span class="token operator">=</span> Asia/Shanghai
    
 linux搜素   /date快速找到位置
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_3、启动-httpd-服务"><a href="#_3、启动-httpd-服务" class="header-anchor">#</a> 3、启动 httpd 服务</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable httpd</span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># systemctl start httpd</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5、浏览器访问并进行初始化设置"><a href="#_5、浏览器访问并进行初始化设置" class="header-anchor">#</a> 5、浏览器访问并进行初始化设置</h3> <p>浏览器访问http://192.168.37.111/zabbix，第一次访问时需要进行一些初始化的设置，按照提示操作：</p> <p><img src="/assets/img/1204916-20171202111624526-738200150.dd10639d.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202111632386-1721515434.95114e2b.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202111651776-1822649685.baca3e66.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202111657823-1996546273.58ca54c9.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202111703448-1933168823.0faa4fe5.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202111709776-2083342842.83d03b57.png" alt="img"></p> <ul><li>点击Finish以后，跳转到登录页面，使用账号密码登录即可：</li></ul> <p><img src="/assets/img/1204916-20171202111720948-950069230.6dcba02e.png" alt="img"></p> <ul><li>默认用户名为：Admin ，密码为：zabbix ，登录后进入仪表盘：</li></ul> <p><img src="/assets/img/1204916-20171202111726964-1900127962.ea530c00.png" alt="img"></p> <h3 id="_6、配置-agent-端"><a href="#_6、配置-agent-端" class="header-anchor">#</a> 6、配置 agent 端</h3> <ul><li>在被监控的主机安装好agent，设置好 server，并添加到 server 端，将其纳入监控系统中。</li></ul> <h4 id="_1、安装-zabbix-安装源"><a href="#_1、安装-zabbix-安装源" class="header-anchor">#</a> 1、安装 zabbix 安装源</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># wget https://repo.zabbix.com/zabbix/4.2/rhel/7/x86_64/zabbix-release-4.2-1.el7.noarch.rpm</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># rpm -ivh zabbix-release-4.2-1.el7.noarch.rpm </span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># yum -y install epel-release.noarch</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># yum install zabbix-agent zabbix-sender -y</span>

查看是否已经安装
<span class="token function">rpm</span> <span class="token parameter variable">-q</span> zabbix-agent
<span class="token function">rpm</span> <span class="token parameter variable">-q</span> zabbix-sender
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_2、修改配置文件"><a href="#_2、修改配置文件" class="header-anchor">#</a> 2、修改配置文件</h4> <h4 id="_1、确认配置文件"><a href="#_1、确认配置文件" class="header-anchor">#</a> 1、确认配置文件</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 zabbix<span class="token punctuation">]</span><span class="token comment"># rpm -ql zabbix-agent </span>
/etc/logrotate.d/zabbix-agent
/etc/zabbix/zabbix_agentd.conf
/etc/zabbix/zabbix_agentd.d
/etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf
/usr/lib/systemd/system/zabbix-agent.service
/usr/lib/tmpfiles.d/zabbix-agent.conf
/usr/sbin/zabbix_agentd
/usr/share/doc/zabbix-agent-3.4.4
/usr/share/doc/zabbix-agent-3.4.4/AUTHORS
/usr/share/doc/zabbix-agent-3.4.4/COPYING
/usr/share/doc/zabbix-agent-3.4.4/ChangeLog
/usr/share/doc/zabbix-agent-3.4.4/NEWS
/usr/share/doc/zabbix-agent-3.4.4/README
/usr/share/man/man8/zabbix_agentd.8.gz
/var/log/zabbix
/var/run/zabbix
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_2、编辑配置文件-2"><a href="#_2、编辑配置文件-2" class="header-anchor">#</a> 2、编辑配置文件</h4> <p>对配置文件做一个备份，然后修改配置文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># cd /etc/zabbix/</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># cd /etc/zabbix/</span>
<span class="token punctuation">[</span>root@node1 zabbix<span class="token punctuation">]</span><span class="token comment"># ls</span>
zabbix_agentd.conf  zabbix_agentd.d
<span class="token punctuation">[</span>root@node1 zabbix<span class="token punctuation">]</span><span class="token comment"># cp zabbix_agentd.conf{,.bak}</span>
<span class="token punctuation">[</span>root@node1 zabbix<span class="token punctuation">]</span><span class="token comment"># vim zabbix_agentd.conf</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/assets/img/1204916-20171202111757729-865694486.a5216806.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202111803370-1250338239.758e30d6.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202111809401-778949871.b80655d0.png" alt="img"></p> <ul><li><p>重点需要修改 GENERAL PARAMETERS 段：</p></li> <li><p>是否允许别人执行远程操作命令，默认是禁用的，打开的话会有安全风险。</p></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">Server</span><span class="token operator">=</span><span class="token number">192.168</span>.37.111       <span class="token comment"># 指明服务器是谁的</span>
<span class="token assign-left variable">ListenPort</span><span class="token operator">=</span><span class="token number">10050</span>            <span class="token comment"># 自己监听的端口</span>
<span class="token assign-left variable">ListenIP</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0            <span class="token comment"># 自己监听的地址，0.0.0.0表示本机所有地址</span>
<span class="token assign-left variable">StartAgents</span><span class="token operator">=</span><span class="token number">3</span>               <span class="token comment"># 优化时使用的</span>

<span class="token assign-left variable">ServerActive</span><span class="token operator">=</span><span class="token number">192.168</span>.37.111 <span class="token comment"># 主动监控时的服务器</span>
<span class="token assign-left variable">Hostname</span><span class="token operator">=</span>node1.keer.com     <span class="token comment"># 自己能被server端识别的名称</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>启动服务</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 zabbix<span class="token punctuation">]</span><span class="token comment"># systemctl start zabbix-agent.service</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>查看端口是否已开启</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 zabbix<span class="token punctuation">]</span><span class="token comment"># ss -ntul |grep 10050</span>
tcp    LISTEN     <span class="token number">0</span>      <span class="token number">128</span>       *:10050                 *:*  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>已经开启成功就可以去 server 端添加主机了，其他主机进行同样的操作，唯一不同的就是配置文件中的 Hostname 要设为对应主机名</li></ul> <h3 id="_7、监控过程详解"><a href="#_7、监控过程详解" class="header-anchor">#</a> 7、监控过程详解</h3> <h4 id="_1、修改密码及中文版"><a href="#_1、修改密码及中文版" class="header-anchor">#</a> 1、修改密码及中文版</h4> <h4 id=""><a href="#" class="header-anchor">#</a> <img src="/assets/img/1204916-20171202111827354-72951973.6a9af539.png" alt="img"></h4> <ul><li>按如上操作即可，选择中文以后，点击下面的update即可更新成功</li></ul> <p><img src="/assets/img/1204916-20171202111833495-129008460.c64e3b7c.png" alt="img"></p> <ul><li>为了安全起见修改密码</li></ul> <p><img src="/assets/img/1204916-20171202111841370-1797988674.82035e30.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202111849495-310227466.cb44fc7a.png" alt="img"></p> <ul><li>修改完成后同样点击更新即可。</li></ul> <h4 id="_2、创建主机及主机群组"><a href="#_2、创建主机及主机群组" class="header-anchor">#</a> 2、创建主机及主机群组</h4> <p>1、定义一个主机群组</p> <p><img src="/assets/img/1204916-20171202111857464-2124919444.ed1024ec.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202111904167-665674482.fc2a60c6.png" alt="img"></p> <p>2、添加主机</p> <p><img src="/assets/img/1204916-20171202111913261-73886293.529d29c5.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202111919464-1304275424.b61e6848.png" alt="img"></p> <ul><li>当然，上面有很多选择卡，有一个加密：</li></ul> <p><img src="/assets/img/1204916-20171202111927823-239348334.852c1061.png" alt="img"></p> <ul><li>设置完成后，点击添加。添加的主机已经出现在列表中</li></ul> <p><img src="/assets/img/1204916-20171202111934214-484009707.4f8782e9.png" alt="img"></p> <ul><li>同样的把node2节点添加进来：</li></ul> <p><img src="/assets/img/1204916-20171202111940964-633207572.cf20745a.png" alt="img"></p> <h4 id="_3、监控项-items"><a href="#_3、监控项-items" class="header-anchor">#</a> 3、监控项 (items)</h4> <h5 id="_1、-介绍"><a href="#_1、-介绍" class="header-anchor">#</a> 1、 介绍</h5> <ul><li><p>点击  node1 的监控项，即可创建监控项，首先，创建三个应用集：</p></li> <li><p>应用集一般配合监控项使用，是多个同类型的监控项的分类目录</p></li></ul> <p><img src="/assets/img/1204916-20171202111950198-929031864.02b8ccf8.png" alt="img"></p> <ul><li>定义监控项</li></ul> <p><img src="/assets/img/1204916-20171202111958792-1773568717.98668227.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202112003964-2111199567.06aaa5f2.png" alt="img"></p> <ul><li>任何一个被监控项，如果想要能够被监控，一定要在 zabbix-server 端定义了能够连接至 zabbix-agent  端，并且能够通过命令获取信息。或者在 agent  端定义了能够让server 端获取命令。一般都是内建的命令，都对应的有其名字，被我们称之为 key。</li></ul> <p><img src="/assets/img/1204916-20171202112012245-1626032764.2dd2dc03.png" alt="img"></p> <ul><li>关于key值，可以直接在网页上设置(服务器自动执行)，也可以使用命令行命令(手动执行)来获取：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment">#  zabbix_get -s 192.168.37.122 -p 10050 -k &quot;system.cpu.intr&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>在 agent 端，也可以使用命令来查看 intr 的速率变化：</li></ul> <p><img src="/assets/img/1204916-20171202112020401-1045624944.e2b18ce5.png" alt="img"></p> <ul><li>继续配置监控项：</li></ul> <p><img src="/assets/img/1204916-20171202112109354-402789781.1ccbb68b.png" alt="img"></p> <h5 id="_2、定义一个不带参数的监控项"><a href="#_2、定义一个不带参数的监控项" class="header-anchor">#</a> 2、定义一个不带参数的监控项</h5> <p><img src="/assets/img/1204916-20171202112123651-287358961.8a160662.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202112129120-1208851776.92745c00.png" alt="img"></p> <ul><li>设置完以后，点击更新，即可加入，并会自动跳转至如下页面</li></ul> <p><img src="/assets/img/1204916-20171202112140370-1431227410.49f41e6f.png" alt="img"></p> <ul><li>定义完成，回到所有主机，等待5秒，可以看到，node1节点后面的选项已经变成绿色：</li></ul> <p><img src="/assets/img/1204916-20171202112146058-529780188.ad6d6a3a.png" alt="img"></p> <ul><li>回到仪表盘，可以看到，监控项有一个处于启用状态：</li></ul> <p><img src="/assets/img/1204916-20171202112155151-1543121497.c42aeaad.png" alt="img"></p> <ul><li>点击最新数据，选择要查看主机，应用一下，就可以看到数据状态：</li></ul> <p><img src="/assets/img/1204916-20171202112203042-1797920804.6f9a8cee.png" alt="img"></p> <ul><li>可以看到，还有一个图形页面，点进去则可以看图形的分布：</li></ul> <p><img src="/assets/img/1204916-20171202112209995-1913438877.0c497818.png" alt="img"></p> <ul><li><p>事实上，需要关注的指标有很多种，一一添加进来即可。</p></li> <li><p>以上定义的监控项是很简单的，指定一个<code>key</code>即可，但是有些监控项是带有参数的，这样一来，监控项就有更多的灵活性。接下来，简单说明需要带参数的监控项：</p></li></ul> <h5 id="_3、定义一个带参数的监控项"><a href="#_3、定义一个带参数的监控项" class="header-anchor">#</a> 3、定义一个带参数的监控项</h5> <p><img src="/assets/img/1204916-20171202112221667-2119454107.26ea1b7e.png" alt="img"></p> <ul><li><p>[] 就是需要参数的意思，里面的值即为参数</p></li> <li><p>&lt;&gt; 为不可省略的。</p></li></ul> <p>我们就以这个例子来说明：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>- if  表示是接口名；

- &lt;mode&gt; 表示是那种模式，包括但不限于：packets(包)、bytes(字节)、errors(错误)、dropped(丢包)、overuns等等(上述内容通过 ifconfig 查看)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>设置一个监控值：</p> <p><img src="/assets/img/1204916-20171202112520104-1246148929.0fe1393b.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202112525495-114362943.2022c339.png" alt="img"></p> <ul><li>通过命令行来查看：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># zabbix_get -s 192.168.37.122 -p 10050 -k &quot;net.if.in[ens33,packets]&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>查看网页的显示情况：检测中 ---&gt; 最新数据 ---&gt; Network Interface Stats(图形)</li></ul> <p><img src="/assets/img/1204916-20171202112536323-416042280.47fecc4f.png" alt="img"></p> <p><strong>中文乱码解决方法</strong></p> <ul><li>Zabbix监控页面中文显示异常，具体为显示为方块，如图所示。</li></ul> <p><img src="/assets/img/7bf0ccac4fd22fc1bc57be405cfbc2c32ee.35813a31.jpg" alt="中文监控选项乱码"></p> <p>1、查找zabbix安装目找到字体具体位置。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#查找zabbix安装位置</span>
<span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># whereis zabbix</span>
zabbix: /usr/lib/zabbix /etc/zabbix /usr/share/zabbix
<span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># ls /usr/share/zabbix/</span>
actionconf.php                 app                 charts.php                   hostinventories.php  items.php        report2.php        styles
adm.gui.php                    applications.php    conf                         host_prototypes.php  js               report4.php        sysmap.php
adm.housekeeper.php            audio               conf.import.php              host_screen.php      jsLoader.php     robots.txt         sysmaps.php
adm.iconmapping.php            auditacts.php       correlation.php              hosts.php            jsrpc.php        screenconf.php     templates.php
adm.images.php                 auditlogs.php       discoveryconf.php            httpconf.php         latest.php       screenedit.php     toptriggers.php
adm.macros.php                 browserwarning.php  disc_prototypes.php          httpdetails.php      <span class="token builtin class-name">local</span>            screen.import.php  tr_events.php
adm.other.php                  chart2.php          favicon.ico                  image.php            locale           screens.php        trigger_prototypes.php
adm.regexps.php                chart3.php          fonts                        images               maintenance.php  search.php         triggers.php
adm.triggerdisplayoptions.php  chart4.php          graphs.php                   img                  map.import.php   services.php       usergrps.php
adm.triggerseverities.php      chart5.php          history.php                  imgstore.php         map.php          setup.php          users.php
adm.valuemapping.php           chart6.php          host_discovery.php           include              overview.php     slideconf.php      zabbix.php
adm.workingtime.php            chart7.php          hostgroups.php               index_http.php       profile.php      slides.php
api_jsonrpc.php                chart.php           hostinventoriesoverview.php  index.php            queue.php        srv_status.php
<span class="token comment">#字体文件位置</span>
<span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># ls /usr/share/zabbix/fonts/(旧版的位置)</span>
<span class="token number">4.4</span>.10版本的zabbix的位置    <span class="token function">ls</span> /usr/share/zabbix/assets/fonts/
使用find / <span class="token parameter variable">-name</span> fonts   查找，意思是 从根目录开始查找寻找文件夹未fonts的

graphfont.ttf
<span class="token punctuation">[</span>root@qfedu.com~<span class="token punctuation">]</span><span class="token comment"># cd /usr/share/zabbix/assets/fonts/</span>
<span class="token punctuation">[</span>root@server fonts<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/usr/share/zabbix/fonts
<span class="token punctuation">[</span>root@server fonts<span class="token punctuation">]</span><span class="token comment"># ls -l</span>
总用量 <span class="token number">0</span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">33</span> <span class="token number">3</span>月  <span class="token number">25</span> <span class="token number">15</span>:24 graphfont.ttf -<span class="token operator">&gt;</span> /etc/alternatives/zabbix-web-font
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><img src="/assets/img/1250992a96b4ad79a5020b3918747549b8f.c69c9704.jpg" alt="img"></p> <ul><li>采用 winscp/xftp等工具将 Windows 中文字体上传到 /usr/share/zabbix/fonts/ 文件夹。本文中文字体为宋体。字体权限修改后截图如下所示：</li></ul> <p><img src="/assets/img/72b7727b21fb1870e1dd26d6fbd8099b705.aa3b0d95.jpg" alt="上传字体文件"></p> <ul><li>切换至/etc/alternatives 目录查看软链接。</li></ul> <p><img src="/assets/img/dee2148811c81b40bad6cf343b7686c3b35.af967e7a.jpg" alt="字体软连接"></p> <ul><li>删除旧软链接并新建。也可以修改为其他中文字体，例如仿宋或者微软雅黑。</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 删除旧软链接</span>
<span class="token punctuation">[</span>root@quedu.com fonts<span class="token punctuation">]</span><span class="token comment"># rm -f /etc/alternatives/zabbix-web-font</span>
<span class="token comment"># 新建软链接</span>
<span class="token punctuation">[</span>root@quedu.com fonts<span class="token punctuation">]</span><span class="token comment"># ln -s /usr/share/zabbix/assets/fonts/simsun.ttc  /etc/alternatives/zabbix-web-font</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>刷新浏览器页面即可，如果显示异常，请重新启动 zabbix-server 服务。</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@quedu.com fonts<span class="token punctuation">]</span><span class="token comment"># systemctl restart zabbix-server</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>正常显示字体如图所示。</p> <p><img src="/assets/img/380e27ff924670f9dd2f65b3582a02374b0.db6ed5a6.jpg" alt="中文字体显示正常"></p> <h5 id="_4、快速定义类似指标"><a href="#_4、快速定义类似指标" class="header-anchor">#</a> 4、快速定义类似指标</h5> <ul><li><p>要定义一个类似的指标，直接选择克隆，然后简单的修改参数即可。</p></li> <li><p>就以定义的 net.if.in[ens33,packets] 为例，如果我们想要在定义一个<code>out</code>的进行如下操作即可：</p></li></ul> <p><img src="/assets/img/1204916-20171202112547292-1392248898.8e58a16e.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202112554167-1900742947.72d51e9a.png" alt="img"></p> <ul><li>如果要以字节为单位需要定义的话，进行同样的操作：</li></ul> <p><img src="/assets/img/1204916-20171202112605448-457365913.8e58a16e.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202112611011-1588882925.1995c04c.png" alt="img"></p> <ul><li><p>如果有需要的话也可以把 byte 再克隆成out。</p></li> <li><p>可以看一下，已经定义的指标：</p></li></ul> <p><img src="/assets/img/1204916-20171202112625604-1195492017.0033d9a9.png" alt="img"></p> <ul><li>进入检测中 ---&gt; 最新数据，可以看到，我们定义的监控项都已经有值了：</li></ul> <p><img src="/assets/img/1204916-20171202112635839-992270373.dd44ba60.png" alt="img"></p> <h5 id="_5、删除监控项"><a href="#_5、删除监控项" class="header-anchor">#</a> 5、删除监控项</h5> <ul><li>如果有一个监控项，用不上了，就可以删除掉。但是如果你直接删除的话，默认数据是会留下的，所以要先清除数据，然后再删除，具体操作步骤如下：</li></ul> <p><img src="data:image/png;base64,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" alt="img"></p> <h5 id="_6、监控项存储的值"><a href="#_6、监控项存储的值" class="header-anchor">#</a> 6、监控项存储的值</h5> <p>对于监控项存储的值，老一点的版本只有以下三种方式：</p> <ul><li><p>As is：  不对数据做任何处理(存储的为原始值)</p></li> <li><p>Delta：（simple change)(变化)，本次采样减去前一次采样的值的结果</p></li> <li><p>Delta：（speed per second)(速率)，本次采样减去前一次采样的值，再除以经过的时长；</p></li></ul> <p>在3.4版本以后有了更多的表现形式：</p> <p><img src="/assets/img/1204916-20171202112707261-1106041063.fe39fa49.png" alt="img"></p> <h4 id="_4、触发器-trigger-2"><a href="#_4、触发器-trigger-2" class="header-anchor">#</a> 4、触发器（trigger）</h4> <h5 id="_1、简介"><a href="#_1、简介" class="header-anchor">#</a> 1、简介</h5> <p>当采集的值定义完了以后，就可以来定义触发器了。触发器的定义是：**界定某特定的item采集到的数据的非合理区间或非合理状态。通常为逻辑表达式。**逻辑表达式（阈值）：通常用于定义数据的不合理区间，其结果如下：</p> <ul><li><p>OK (不符合条件)：正常状态 --&gt; 较老的zabbix版本，其为FALSE；</p></li> <li><p>PROBLEM(符合条件)：非正常状态 --&gt; 较老的zabbix版本，其为TRUE；</p></li></ul> <p>评定采样数值是否为合理区间的比较稳妥的方法是——根据最后N次的平均值来判定结果；这个最后N次通常有两种定义方式：</p> <ul><li><p>最近N分钟所得结果的平均值</p></li> <li><p>最近N次所得结果的平均值</p></li></ul> <p>触发器存在可调用的函数：</p> <ul><li><p>nodata()　　　　#是否采集到数据，采集不到则为异常</p></li> <li><p>last()　　　　　   #最近几次</p></li> <li><p>date()                    #时间，返回当前的时间，格式YYYYMMDD</p></li> <li><p>time()                    #返回当前的时间，HHMMSS格式的当前时间。</p></li> <li><p>now()                    #返回距离Epoch(1970年1月1日00:00:00UTC)时间的秒数</p></li> <li><p>dayofmonth()      #返回当前是本月的第几天</p></li></ul> <p><strong>注：能用数值保存的就不要使用字符串</strong></p> <h5 id="_2、触发器表达式"><a href="#_2、触发器表达式" class="header-anchor">#</a> 2、触发器表达式</h5> <p>基本的触发器表达式格式如下所示</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{&lt;server&gt;:&lt;key&gt;.&lt;function&gt;(&lt;parameter&gt;)}&lt;operator&gt;&lt;constant&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>server：主机名称；</li> <li>key：主机上关系的相应监控项的key；</li> <li>function：评估采集到的数据是否在合理范围内时所使用的函数，其评估过程可以根据采取的数据、当前时间及其它因素进行；</li> <li>目前触发器所支持的函数有avg、count、change、date、dayofweek、delta、diff、iregexp、last、max、min、nodata、now、sum等</li> <li>parameter：函数参数；大多数数值函数可以接受秒数为其参数，而如果在数值参数之前使用“#”做为前缀，则表示为最近几次的取值，如sum(300)表示300秒内所有取值之和，而sum(#10)则表示最近10次取值之和；</li> <li>此外，avg、count、last、min和max还支持使用第二个参数，用于完 成时间限定；例如，max(1h,7d)将返回一周之前的最大值；</li> <li>表达式所支持的运算符及其功能如下图所示：
　　<img src="/assets/img/1204916-20171202112728636-256605681.ead4b766.png" alt="img"></li></ul> <h5 id="_3、定义一个触发器"><a href="#_3、定义一个触发器" class="header-anchor">#</a> 3、定义一个触发器</h5> <p>查看一下 rate of packets(in) 的值，并以其为标准确定我们的非正常的值：</p> <p><img src="/assets/img/1204916-20171202112737792-579321512.ce127252.png" alt="img"></p> <ul><li><p>图中最大值为74，最小值为4，平均值为24。这样的话，可以定义50以上的都是非正常的值。</p></li> <li><p>定义一个触发器：进入：配置 ---&gt; 主机 ---&gt; node1 ---&gt; 触发器 ---&gt; 创建触发器</p></li></ul> <p><img src="/assets/img/1204916-20171202112834464-1059691900.d79e3ba8.png" alt="img"></p> <ul><li>表达式可以直接点击右侧的添加，然后定义自己所需的内容，即可自动生成：</li></ul> <p><img src="/assets/img/1204916-20171202112841823-1486407594.48af2c21.png" alt="img"></p> <ul><li>生成完毕后，我们就点击页面下方的添加，即成功定义了一个触发器，同时页面自动跳转：</li></ul> <p><img src="/assets/img/1204916-20171202112850323-852492156.f12b9f34.png" alt="img"></p> <ul><li>查看定义了触发器的监控项：</li></ul> <p><img src="/assets/img/1204916-20171202112857776-952646683.2ac6de75.png" alt="img"></p> <ul><li>看到里面就有了一根线，就是定义的值，超过线的即为异常状态，看起来非常直观。现在即使超过了这根线，也仅仅会产生一个触发器事件而不会做其他任何事。因此，需要去定义一个动作(action)。</li></ul> <h5 id="_4、触发器的依赖关系"><a href="#_4、触发器的依赖关系" class="header-anchor">#</a> 4、触发器的依赖关系</h5> <ul><li><p>触发器彼此之间可能会存在依赖关系的，一旦某一个触发器被触发了，那么依赖这个触发器的其余触发器都不需要再报警。</p></li> <li><p>多台主机是通过交换机的网络连接线来实现被监控的。如果交换机出了故障，我们的主机自然也无法继续被监控，如果此时，所有主机统统报警……想想也是一件很可怕的事情。要解决这样的问题，就是定义触发器之间的依赖关系，当交换机挂掉，只有自己报警就可以了，其余的主机就不需要在报警了。<strong>这样，也更易于我们判断真正故障所在。</strong></p></li> <li><p><strong>注意</strong>：目前zabbix不能够直接定义主机间的依赖关系，其依赖关系仅能通过触发器来定义。</p></li> <li><p>定义一个依赖关系：打开任意一个触发器，上面就有依赖关系，我们进行定义即可：</p></li></ul> <p><img src="/assets/img/1204916-20171202112928604-1229834.c4c12cee.png" alt="img"></p> <p><img src="data:image/png;base64,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" alt="img"></p> <ul><li>由于当前只定义了一个触发器，就不演示了，过程就是这样~添加以后点击更新即可。触发器可以有多级依赖关系，比如我们看下面的例子：</li> <li><img src="/assets/img/1204916-20171202112943901-1385885917.1cac293d.png" alt="img"></li></ul> <h4 id="_5、定义动作-action"><a href="#_5、定义动作-action" class="header-anchor">#</a> 5、定义动作（action）</h4> <h5 id="_1、-简介"><a href="#_1、-简介" class="header-anchor">#</a> 1、 简介</h5> <ul><li><p>需要去基于一个对应的事件为条件来指明该做什么事，一般就是执行远程命令或者发警报。</p></li> <li><p>有一个<strong>告警升级</strong>的机制，所以，当发现问题的时候，一般是先执行一个<strong>远程操作命令</strong>，如果能够解决问题，就会发一个恢复操作的讯息给接收人，如果问题依然存在，则会执行<strong>发警报</strong>的操作，一般默认的警报接收人是当前系统中有的 zabbix 用户，所以当有人需要收到警报操作的话，我们则需要把它加入我们的定义之中。</p></li> <li><p>每一个用户也应该有一个接收告警信息的方式，即媒介，就像我们接收短信是需要有手机号的一样。</p></li> <li><p>每一个监控主机，能够传播告警信息的媒介有很多种，就算我们的每一种大的媒介，能够定义出来的实施媒介也有很多种。而对于一个媒介来说，每一个用户都有一个统一的或者不同的接收告警信息的端点，我们称之为目标地或者目的地。</p></li></ul> <p>综上为了能够发告警信息，</p> <ul><li><p>第一，我们要事先定义一个媒介，</p></li> <li><p>第二，还要定义这个媒介上用户接收消息的端点（当然，在用户上，我们也称之为用户的媒介）。</p></li></ul> <p>系统内建的媒介类型：</p> <p><img src="/assets/img/1204916-20171202112953417-570252961.1f3581ac.png" alt="img"></p> <p>这只是基本的媒介类型，里面还有更多的细分，以 Email为例：</p> <p><img src="/assets/img/1204916-20171202112959964-345494716.ad7823d9.png" alt="img"></p> <p>注意：同一个类型也可以定义多个，以 Email 为例，可以定义一个腾讯的服务器，一个网易的服务器，一个阿里的服务器等等。</p> <h5 id="_2、定义一个媒介-media"><a href="#_2、定义一个媒介-media" class="header-anchor">#</a> 2、定义一个媒介（media）</h5> <p>以 Email 为例定义一个媒介：</p> <p><img src="/assets/img/1204916-20171202113015417-958398301.b95219a1.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113021495-491076870.93c6272e.png" alt="img"></p> <p>定义后更新就可以
媒介定义好了，怎么才能够让用户接收到邮件呢？比如让Admin用户接收邮件，应该怎么操作呢？具体步骤如下</p> <ul><li><p>进入 管理 ---&gt; 用户 ---&gt; Admin ---&gt; 报警媒介</p></li> <li><p>添加一条进来：</p></li></ul> <p><img src="/assets/img/1204916-20171202113030042-693976775.81237e7f.png" alt="img"></p> <ul><li>添加过后是这样的</li></ul> <p><img src="/assets/img/1204916-20171202113038792-215702532.e7a13e7f.png" alt="img"></p> <ul><li>更新就可以</li></ul> <p><strong>注意： 一个用户可以添加多个接收的媒介类型。 请使用163/qq邮箱测试</strong></p> <h5 id="_3、定义一个动作-action"><a href="#_3、定义一个动作-action" class="header-anchor">#</a> 3、定义一个动作（action）</h5> <p>动作是在某些特定条件下触发的，比如，某个触发器被触发了，就会触发动作。现在基于redis来定义一个动作。</p> <ul><li>在 agent 端使用 yum 安装一下 redis：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># yum install redis -y</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>修改配置文件：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/redis.conf </span>
<span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0        <span class="token comment">#不做任何认证操作</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>启动服务检查端口：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl start redis</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># ss -nutlp | grep redis</span>
tcp    LISTEN     <span class="token number">0</span>      <span class="token number">128</span>       *:6379                  *:*                   users:<span class="token variable"><span class="token punctuation">((</span>&quot;redis<span class="token operator">-</span>server&quot;<span class="token punctuation">,</span>pid<span class="token operator">=</span><span class="token number">5250</span><span class="token punctuation">,</span>fd<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">))</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h6 id="_1、定义监控项"><a href="#_1、定义监控项" class="header-anchor">#</a> 1、定义监控项</h6> <ul><li>进入 配置 ---&gt; 主机 ---&gt; node1 ---&gt; 监控项（items）---&gt; 创建监控项</li></ul> <p><img src="/assets/img/1204916-20171202113104229-190921891.789ffed8.png" alt="img"></p> <ul><li>填写完毕以后点击下方的添加</li></ul> <p><img src="/assets/img/1204916-20171202113113058-1658955278.fd8c65b5.png" alt="img"></p> <ul><li>该监控项已成功添加。</li> <li>查看值：检测中 ---&gt; 最新数据</li></ul> <p><img src="data:image/png;base64,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" alt="img"></p> <h6 id="_2、定义触发器"><a href="#_2、定义触发器" class="header-anchor">#</a> 2、定义触发器</h6> <ul><li><p>定义好了监控项以后，定义一个触发器，当服务有问题的时候，才能及时知道：</p></li> <li><p>进入 配置 ---&gt; 主机 ---&gt; node1 ---&gt; 触发器（trigger）---&gt; 创建触发器</p></li></ul> <p><img src="/assets/img/1204916-20171202113131761-6927531.da3a3478.png" alt="img"></p> <ul><li>填写完毕以后点击下方的添加。</li></ul> <p><img src="/assets/img/1204916-20171202113142604-1237551286.84d35081.png" alt="img"></p> <ul><li><p>该触发器已成功添加</p></li> <li><p>查看：监测中 ---&gt; 最新数据</p></li></ul> <p><img src="/assets/img/1204916-20171202113150479-1838545643.9420ed0d.png" alt="img"></p> <ul><li>手动关闭 redis 服务来检测一下：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl stop redis.service</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>进入 监测中 ---&gt; 问题</li></ul> <p><img src="/assets/img/1204916-20171202113158901-587145295.c7044259.png" alt="img"></p> <ul><li>看到已经显示的是问题了。并且有持续的时间，当服务被打开，会转为已解决状态：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl start redis.service </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1204916-20171202113209698-2146797322.a5879bff.png" alt="img"></p> <h6 id="_3、定义动作-action"><a href="#_3、定义动作-action" class="header-anchor">#</a> 3、定义动作（action）</h6> <ul><li>进入 配置 ---&gt; 动作 ---&gt; 创建动作（注意选择事件源为触发器）</li></ul> <p><img src="/assets/img/1204916-20171202113224323-1883182490.9054988f.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113232620-704184287.042d5696.png" alt="img"></p> <ul><li>操作添加：</li></ul> <p><img src="/assets/img/1204916-20171202113245604-1217342753.5313abef.png" alt="img"></p> <p>需要在虚拟机上进行两项操作，</p> <ul><li><p>修改 sudo 配置文件使 zabbix 用户能够临时拥有管理员权限；</p></li> <li><p>修改 zabbix 配置文件使其允许接收远程命令。</p></li></ul> <p>进行如下操作：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># visudo          # 相当于“vim /etc/sudoers”</span>
    <span class="token comment">## Allow root to run any commands anywhere</span>
    root    <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>   ALL
    zabbix    <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>   NOPASSWD: ALL     <span class="token comment"># 添加的一行，表示不需要输入密码</span>

<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/zabbix/zabbix_agentd.conf</span>
    <span class="token assign-left variable">EnableRemoteCommands</span><span class="token operator">=</span><span class="token number">1</span>          <span class="token comment"># 允许接收远程命令</span>
    <span class="token assign-left variable">LogRemoteCommands</span><span class="token operator">=</span><span class="token number">1</span>             <span class="token comment"># 把接收的远程命令记入日志</span>

<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart zabbix-agent.service</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>添加了第一步需要做的事情，重启服务，如果重启不成功怎么办呢？就需要来添加第二步：</li></ul> <p><img src="/assets/img/1204916-20171202113256073-936532007.dbd185ea.png" alt="img"></p> <ul><li>添加完成以后</li></ul> <p><img src="/assets/img/1204916-20171202113304573-1567962822.ab99f7cb.png" alt="img"></p> <ul><li>操作添加完了，如果服务自动恢复了，可以发送消息来提示：</li></ul> <p><img src="/assets/img/1204916-20171202113312104-1066002380.5673f430.png" alt="img"></p> <ul><li>动作设置完毕，可以点击添加了，添加完成会自动跳转至如下页面：</li></ul> <p><img src="/assets/img/1204916-20171202113334386-1664646229.6f2a3658.png" alt="img"></p> <ul><li>可以手动停止服务来进行测试：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl stop redis.service </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>到问题页面来查看，发现确实有问题，并且已经解决：</li></ul> <p><img src="/assets/img/1204916-20171202113344229-460694111.bb7e2e6b.png" alt="img"></p> <ul><li>server 端查看是否收到邮件</li></ul> <p><img src="/assets/img/1204916-20171202113351433-1159937452.319890db.png" alt="img"></p> <ul><li>agent 端查看端口是否开启</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl stop redis.service </span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># ss -ntl</span>
State       Recv-Q Send-Q Local Address:Port               Peer Address:Port              
LISTEN      <span class="token number">0</span>      <span class="token number">128</span>        *:6379                   *:*                  
LISTEN      <span class="token number">0</span>      <span class="token number">128</span>        *:111                    *:*                  
LISTEN      <span class="token number">0</span>      <span class="token number">5</span>      <span class="token number">192.168</span>.122.1:53                     *:*                  
LISTEN      <span class="token number">0</span>      <span class="token number">128</span>        *:22                     *:*                  
LISTEN      <span class="token number">0</span>      <span class="token number">128</span>    <span class="token number">127.0</span>.0.1:631                    *:*                  
LISTEN      <span class="token number">0</span>      <span class="token number">128</span>        *:23000                  *:*                  
LISTEN      <span class="token number">0</span>      <span class="token number">100</span>    <span class="token number">127.0</span>.0.1:25                     *:*                  
LISTEN      <span class="token number">0</span>      <span class="token number">128</span>        *:10050                  *:*                  
LISTEN      <span class="token number">0</span>      <span class="token number">128</span>       :::111                   :::*                  
LISTEN      <span class="token number">0</span>      <span class="token number">128</span>       :::22                    :::*                  
LISTEN      <span class="token number">0</span>      <span class="token number">128</span>      ::1:631                   :::*                  
LISTEN      <span class="token number">0</span>      <span class="token number">100</span>      ::1:25                    :::* 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>端口正常开启，动作触发已经完成。</li></ul> <blockquote><p>补充：可以使用脚本来发送警报，脚本存放路径在配置文件中可以找到，定义为：AlterScriptsPath=/usr/lib/zabbix/alertscripts</p></blockquote> <ul><li>手动修改一下redis服务的监听端口，这样就不能通过重启服务恢复了：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/redis.conf</span>
    <span class="token comment">#port 6379</span>
    port <span class="token number">6380</span>               <span class="token comment">#注释掉原来的端口，更换为新的端口</span>

<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart redis</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>网页查看状态：进入 监测中 ---&gt; 问题，可以看到是报错的：</li></ul> <p><img src="/assets/img/1204916-20171202113404433-2118773292.efe366ae.png" alt="img"></p> <ul><li>经过了重启服务以后还是没能把解决问题，就会发邮件告警</li></ul> <p><img src="/assets/img/1204916-20171202113411542-651613941.be959987.png" alt="img"></p> <ul><li>把服务端口改回来，然后重启服务。这样，等到问题自动解决了以后，会再次收到邮件：</li></ul> <p><img src="/assets/img/1204916-20171202113418464-1285901797.81500fa2.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113423229-1033392033.a1bf7fbd.png" alt="img"></p> <ul><li>动作设定已经全部测试完成。</li></ul> <h4 id="_6、zabbix可视化"><a href="#_6、zabbix可视化" class="header-anchor">#</a> 6、zabbix可视化</h4> <h5 id="_1、-简介-2"><a href="#_1、-简介-2" class="header-anchor">#</a> 1、 简介</h5> <p>数据日积月累，想要更直观的了解到各项数据的情况，图形无疑是最佳选择。zabbix 提供了众多的可视化工具直观展示，如 graph、screen 及 map 等。前面也看到过一些简单的图形展示。如果想要把多个相关的数据定义在同一张图上去查看，就需要去自定义图形</p> <h5 id="_2、自定义图形-graphs"><a href="#_2、自定义图形-graphs" class="header-anchor">#</a> 2、自定义图形（Graphs）</h5> <p>自定义图形中可以集中展示多个时间序列的数据流。支持四种不同形式的图形</p> <ul><li><p><strong>线状图</strong>(normal)</p></li> <li><p><strong>堆叠面积图</strong>(stacked)、</p></li> <li><p><strong>饼图</strong>(pie)”</p></li> <li><p><strong>分离型饼图</strong>(exploded)</p></li></ul> <p>设置过程如下：进入 配置 ---&gt; 主机 ---&gt; node1 ---&gt; 图形，选择右上角创建图形：</p> <p><img src="/assets/img/1204916-20171202113435808-1188202230.5e9423cb.png" alt="img"></p> <ul><li>看一看四种状态：</li></ul> <p><img src="/assets/img/1204916-20171202113446229-1783458714.932f0d69.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113455729-1650294930.9a4f3df4.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113508323-296324748.51af73ab.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113518792-1529967613.715afb79.png" alt="img"></p> <ul><li><p>主机都可以自定义，一般线型是看的最清晰的，通常会使用这个。克隆一个 packets 来更改为 bytes 用同样的，如果想添加别的内容，也都可以添加的。</p></li> <li><p>这里添加了三个图形，我们可以在 监测中 ---&gt; 图形 来查看</p></li></ul> <p><img src="/assets/img/1204916-20171202113529323-675233317.fe87e8c0.png" alt="img"></p> <h5 id="_3、聚合图形-screens"><a href="#_3、聚合图形-screens" class="header-anchor">#</a> 3、聚合图形（Screens）</h5> <ul><li>创建的自定义图形也可以放在一个聚合图里显示，具体的设置方法： 进入 监测中 ---&gt; 聚合图形 ---&gt; 选择右上角创建聚合图形</li></ul> <p><img src="/assets/img/1204916-20171202113537964-1631571055.934f33b3.png" alt="img"></p> <ul><li>可以选择分享：</li></ul> <p><img src="/assets/img/1204916-20171202113545823-147916381.274e6637.png" alt="img"></p> <ul><li><p>定义好了添加即可</p></li> <li><p>定义完成以后，需要编辑一下，来指定保存哪些图：</p></li></ul> <p><img src="/assets/img/1204916-20171202113554464-752616841.53428eda.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113600370-802418603.c097a7ca.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113605354-1914365422.534e4087.png" alt="img"></p> <ul><li>依次添加即可，添加完成之后：</li></ul> <p><img src="/assets/img/1204916-20171202113615761-369104752.80997e0b.png" alt="img"></p> <ul><li>因为只有三张图，所以添加的有重复的。</li></ul> <h5 id="_4、幻灯片演示-slide-shows"><a href="#_4、幻灯片演示-slide-shows" class="header-anchor">#</a> 4、幻灯片演示（Slide shows）</h5> <ul><li><p>如果有多个聚合图形想要按顺序展示的话，我们就可以定义一个幻灯片。</p></li> <li><p>具体步骤：进入 监测中 ---&gt; 聚合图形 ---&gt; 右上角选择幻灯片演示 ---&gt; 创建幻灯片</p></li></ul> <p><img src="/assets/img/1204916-20171202113722761-480111985.0d9eda6a.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113728479-1024952951.ff683717.png" alt="img"></p> <ul><li>打开以后显示的是图片1，5s以后会自动切换为图片2。这样就可以实现幻灯片演示，就不需要去手动切换了。</li></ul> <h5 id="_5、-定义拓扑图-maps"><a href="#_5、-定义拓扑图-maps" class="header-anchor">#</a> 5、 定义拓扑图（Maps）</h5> <ul><li><p>在拓扑图中，可以定义成一个复杂的网络连接图，可以使用一台主机来连接另一台主机，这样的话，就可以查看出到底是哪个链接出了问题。</p></li> <li><p>进入 监测中 ---&gt; 拓扑图 ---&gt; 所有地图 ---&gt; Local network(默认就有的)</p></li></ul> <p><img src="/assets/img/1204916-20171202113737542-556214868.518e688c.png" alt="img"></p> <ul><li>通过 Ping 和 Traceroute 就可以实验我们上述的功能。</li></ul> <h4 id="_7、模板"><a href="#_7、模板" class="header-anchor">#</a> 7、模板</h4> <h5 id="_1、创建模板"><a href="#_1、创建模板" class="header-anchor">#</a> 1、创建模板</h5> <ul><li><p>每一个主机的监控项都很多，一个一个的添加实在是太头疼了，更何况，可能不止一个主机。可以把一个 redis 的监控项添加进一个模板里，这样更方便于我们以后的添加。</p></li> <li><p>具体操作：进入 配置 ---&gt; 模板 ---&gt; 选择右上角创建模板</p></li></ul> <p><img src="/assets/img/1204916-20171202113750354-1623976848.90e5bcdc.png" alt="img"></p> <ul><li><p>填写完以后，点击下方的添加即可。</p></li> <li><p>基于组过滤，就能看到定义的模板：</p></li></ul> <p><img src="/assets/img/1204916-20171202113804511-1013330801.28bc8caa.png" alt="img"></p> <ul><li>可以向里面添加应用集、监控项、触发器、图形等等，添加完成以后，后期再有主机需要添加就直接套用模板即可。</li> <li>需要注意的一点是，<strong>现在添加的是模板，所以不会立即采用数据，只有链接到主机上以后，才会真正生效。</strong></li></ul> <h5 id="_2、模板的导入与导出"><a href="#_2、模板的导入与导出" class="header-anchor">#</a> 2、模板的导入与导出</h5> <ul><li>可以直接导入一个模板，在互联网上可以找到很多，导入的步骤如下：</li></ul> <p><img src="/assets/img/1204916-20171202113819745-1921041608.abdc718a.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113824698-623720508.2d1ed48e.png" alt="img"></p> <ul><li><p>创建好的模板也可以导出为文件：</p></li> <li><p>任意选中一个准备好的模板，然后页面的最下方就有导出按钮：</p></li></ul> <p><img src="/assets/img/1204916-20171202113835714-1215549189.c932eab2.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113840729-2020667526.34e6d87a.png" alt="img"></p> <ul><li>就可以非常方便的进行应用了</li></ul> <h5 id="_3、模板的应用"><a href="#_3、模板的应用" class="header-anchor">#</a> 3、模板的应用</h5> <ul><li>进入 配置 ---&gt; 主机 ---&gt; node1 ---&gt; 模板，选择要添加的模板了：</li></ul> <p><img src="/assets/img/1204916-20171202113850261-1781138138.665f671e.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113858933-353038188.b8a90c1f.png" alt="img"></p> <ul><li>点击更新了。成功链接至模板，主机数据就会更新了：</li></ul> <p><img src="/assets/img/1204916-20171202113910870-459511423.da02d25b.png" alt="img"></p> <p><strong>注意：</strong></p> <ul><li><p>一个主机可以链接多个模板，但尽量不要让一个指标被采样两次。</p></li> <li><p>如果有多个主机，同时这些主机也在一个主机组里，这样的话，只需要在这个主机组里添加模板，就能够让在主机组里的所有主机进行监控</p></li></ul> <h5 id="_4、移除模板链接"><a href="#_4、移除模板链接" class="header-anchor">#</a> 4、移除模板链接</h5> <ul><li><p>当一个主机的模板不想要用了，可以移除模板链接，</p></li> <li><p>具体操作步骤：进入 配置 ---&gt; 主机 ---&gt; node1 ---&gt; 模板，可以把不需要的模板移除：</p></li></ul> <p><img src="/assets/img/1204916-20171202113922292-685697244.3fe01a4e.png" alt="img"></p> <ul><li>删除试试看，移除并清理以后，点击更新。就会自动跳转至如下界面：</li></ul> <p><img src="/assets/img/1204916-20171202113931151-1815278685.07fd1cee.png" alt="img"></p> <ul><li>模板已经被移除</li></ul> <p>在https://github.com/adubkov中查看模板</p> <p>模板地址<a href="https://github.com/adubkov" target="_blank" rel="noopener noreferrer">adubkov (Alexey Dubkov) · GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>nginx模板<a href="https://github.com/adubkov/zbx_nginx_template" target="_blank" rel="noopener noreferrer">GitHub - adubkov/zbx_nginx_template: Zabbix template for Nginx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="_8、宏-macro"><a href="#_8、宏-macro" class="header-anchor">#</a> 8、宏（macro）</h4> <h5 id="_1、简介-2"><a href="#_1、简介-2" class="header-anchor">#</a> 1、简介</h5> <ul><li>宏是一种抽象(Abstraction)，它根据一系列预定义的规则替换一定的文本模式，而解释器或编译器在遇到宏时会自动进行这一模式替换。类似地，zabbix基于宏保存预设文本模式，并且在调用时将其替换为其中的文本。</li> <li>zabbix有许多内置的宏，如{HOST.NAME}、{HOST.IP}、{TRIGGER.DESCRIPTION}、{TRIGGER.NAME}、{TRIGGER.EVENTS.ACK}等。</li> <li>详细信息请参考<a href="https://www.zabbix.com/documentation/2.0/manual/appendix/macros/supported_by_location" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>https://www.zabbix.com/documentation/4.0/zh/manual/appendix/macros/supported_by_location</li></ul> <h5 id="_2、级别"><a href="#_2、级别" class="header-anchor">#</a> 2、级别</h5> <p>宏一共有三种级别，分别是全局宏、模板宏、主机宏。不同级别的宏的适用范围也不一样。</p> <ul><li><p>全局宏也可以作用于所有的模板宏和主机宏，优先级最低。</p></li> <li><p>模板宏则可以作用于所有使用该模板的主机，优先级排在中间。</p></li> <li><p>主机宏则只对单个主机有效，优先级最高。</p></li></ul> <h5 id="_3、类型"><a href="#_3、类型" class="header-anchor">#</a> 3、类型</h5> <ul><li><p>宏的类型分为系统内建的宏和用户自定义的宏。</p></li> <li><p>为了更强的灵活性，zabbix还支持在全局、模板或主机级别使用用户自定义宏(user macro)。</p></li> <li><p>系统内建的宏在使用的时候需要<code>{MACRO}</code>的语法格式，用户自定义宏要使用<code>{$MACRO}</code>这种特殊的语法格式。</p></li> <li><p>宏可以应用在item keys和descriptions、trigger名称和表达式、主机接口IP/DNS及端口、discovery机制的SNMP协议的相关信息中……</p></li> <li><p>宏的名称只能使用<strong>大写字母、数字及下划线</strong>。</p></li> <li><p>进一步信息请参考<a href="https://www.zabbix.com/documentation/2.0/manual/appendix/macros/supported_by_location#additional_support_for_user_macros" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></li></ul> <h5 id="_4、定义一个宏"><a href="#_4、定义一个宏" class="header-anchor">#</a> 4、定义一个宏</h5> <p>如果想要在监控项(items)上使用宏，就要先去定义一个宏，然后去创建监控项，直接引用定义好的宏即可。具体操作步骤：</p> <h6 id="_1、定义全局宏"><a href="#_1、定义全局宏" class="header-anchor">#</a> 1、定义全局宏</h6> <ul><li>进入 管理 ---&gt; 一般 ---&gt; 右上角选择宏</li></ul> <p><img src="/assets/img/1204916-20171202113946011-1443279156.60699d5f.png" alt="img"></p> <p><img src="/assets/img/1204916-20171202113951651-1189531352.ddeb0493.png" alt="img"></p> <ul><li>全局宏就添加好了</li></ul> <h6 id="_2、定义监控项-调用宏"><a href="#_2、定义监控项-调用宏" class="header-anchor">#</a> 2、定义监控项，调用宏</h6> <ul><li>进入 配置 ---&gt; 主机 ---&gt; 所有主机 ---&gt; 监控项 ---&gt; 右上角创建监控项</li></ul> <p><img src="/assets/img/1204916-20171202114002058-1535509929.169029ec.png" alt="img"></p> <ul><li>填写完成以后，点击添加。看到这个调用宏的监控项已经添加成功：</li></ul> <p><img src="/assets/img/1204916-20171202114011401-371254446.8dd8bd23.png" alt="img"></p> <ul><li>查看监控项现在的状态：进入 监测中 ---&gt; 最新数据</li></ul> <p><img src="/assets/img/1204916-20171202114025964-731346716.7092a55f.png" alt="img"></p> <ul><li>把服务停掉。就会变成 down 的状态</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl stop redis</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1204916-20171202114036370-1539610385.7d28d5c6.png" alt="img"></p> <ul><li>发现监控项是可以正常使用的。</li></ul> <h6 id="_3、修改宏"><a href="#_3、修改宏" class="header-anchor">#</a> 3、修改宏</h6> <p>如果把 node1 节点上的 redis 服务监听端口手动改掉，定义的监控项就不能正常使用了，这样的话，就需要去修改宏。因为只是个例，所以我们不需要去修改全局宏，只用修改模板宏或者主机宏就可以了。</p> <p>模板宏和主机宏的不同修改操作：</p> <ul><li><strong>模板宏</strong>：模板宏的修改，配置 ---&gt; 模板 ---&gt; redis stats（相应的模板） ---&gt; 宏</li></ul> <p><img src="/assets/img/1204916-20171202114046214-736225671.f5935822.png" alt="img"></p> <ul><li><p>点击添加就可以了。</p></li> <li><p><strong>主机宏</strong>：主机宏的修改，配置 ---&gt; 主机 ---&gt; 所有主机 ---&gt; node1 ---&gt; 宏</p></li></ul> <p><img src="/assets/img/1204916-20171202114054667-621488105.eb298713.png" alt="img"></p> <ul><li>点击添加就可以了。</li></ul> <h2 id="五、zabbix-用户参数-自定义监控项"><a href="#五、zabbix-用户参数-自定义监控项" class="header-anchor">#</a> 五、Zabbix 用户参数（自定义监控项）</h2> <h3 id="_1、介绍和用法"><a href="#_1、介绍和用法" class="header-anchor">#</a> 1、介绍和用法</h3> <h4 id="_1、介绍"><a href="#_1、介绍" class="header-anchor">#</a> 1、介绍</h4> <p>自定义用户参数，也就是自定义key，有时可能想要运行一个代理检查，而不是 Zabbix 的预定义，就可以编写一个命令来检索需要的数据，并将其包含在代理配置文件(&quot;UserParameter&quot;配置参数)的用户参数中</p> <h4 id="_2、用法格式-syntax"><a href="#_2、用法格式-syntax" class="header-anchor">#</a> 2、用法格式 syntax</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>UserParameter=&lt;key&gt;,&lt;command&gt;

- A user parameter also contains a key　　一个用户参数也包含一个键
- The key will be necessary when configuring an item 　　在配置监控项时，key是必需的
- Note: Need to restart the agent 　　注意:需要重新启动 agent 服务 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2、用法展示"><a href="#_2、用法展示" class="header-anchor">#</a> 2、用法展示</h3> <h4 id="_1、修改-agent-端的配置-设置用户参数"><a href="#_1、修改-agent-端的配置-设置用户参数" class="header-anchor">#</a> 1、修改 agent 端的配置，设置用户参数</h4> <h5 id="_1、查找的参数的命令"><a href="#_1、查找的参数的命令" class="header-anchor">#</a> 1、查找的参数的命令</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>查看剩余内容
<span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># free | awk '/^Mem/{print $3}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="data:image/png;base64,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" alt="img"></p> <h5 id="_2、修改配置文件-把查找参数的命令设为用户参数"><a href="#_2、修改配置文件-把查找参数的命令设为用户参数" class="header-anchor">#</a> 2、修改配置文件，把查找参数的命令设为用户参数</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># cd /etc/zabbix/zabbix_agentd.d/</span>
<span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># vim memory_usage.conf</span>

配置一下参数重启agent

<span class="token assign-left variable">UserParameter</span><span class="token operator">=</span>memory.used,free <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'/^Mem/{print $3}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="_3、重启agent-服务"><a href="#_3、重启agent-服务" class="header-anchor">#</a> 3、重启agent 服务</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart zabbix-agent.service </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_4、在-zabbix-server-端-查询"><a href="#_4、在-zabbix-server-端-查询" class="header-anchor">#</a> 4、在 zabbix-server 端，查询</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># zabbix_get -s 192.168.30.7 -p 10050 -k &quot;memory.used&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1216496-20171226172647557-2133137319.37afa8a1.png" alt="img"></p> <h5 id="_5、在监控上-设置一个item监控项-使用这个用户参数"><a href="#_5、在监控上-设置一个item监控项-使用这个用户参数" class="header-anchor">#</a> 5、在监控上，设置一个item监控项，使用这个用户参数</h5> <h5 id="_6、查询-graph-图形"><a href="#_6、查询-graph-图形" class="header-anchor">#</a> 6、查询 graph 图形</h5> <p><img src="/assets/img/1216496-20171226172026463-839175044.415060d4.png" alt="img"></p> <h3 id="_3、用法升级"><a href="#_3、用法升级" class="header-anchor">#</a> 3、用法升级</h3> <h4 id="_1、修改-agent-端的配置-设置用户参数-2"><a href="#_1、修改-agent-端的配置-设置用户参数-2" class="header-anchor">#</a> 1、修改 agent 端的配置，设置用户参数</h4> <h5 id="_1、命令行查询参数的命令"><a href="#_1、命令行查询参数的命令" class="header-anchor">#</a> 1、命令行查询参数的命令</h5> <p><img src="data:image/png;base64,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" alt="img"></p> <h5 id="_2、修改配置文件-把查找参数的命令设为用户参数-2"><a href="#_2、修改配置文件-把查找参数的命令设为用户参数-2" class="header-anchor">#</a> 2、修改配置文件，把查找参数的命令设为用户参数</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">UserParameter</span><span class="token operator">=</span>memory.stats<span class="token punctuation">[</span>*<span class="token punctuation">]</span>,cat /proc/meminfo <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'/^$1/{print $$2}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>分析：$$2：表示不是调前边位置参数的$2 ，而是 awk 的参数 $2</p></li> <li><p>注意：$1是调用前边的[*]，位置参数，第一个参数</p></li></ul> <h4 id="_2、在zabbix-server-端-查询使用这个用户参数的key"><a href="#_2、在zabbix-server-端-查询使用这个用户参数的key" class="header-anchor">#</a> 2、在zabbix-server 端，查询使用这个用户参数的key</h4> <p><img src="/assets/img/1216496-20171226172026932-1905881550.3fb236a4.png" alt="img"></p> <h4 id="_3、在监控上-设置一个item监控项-使用这个用户参数"><a href="#_3、在监控上-设置一个item监控项-使用这个用户参数" class="header-anchor">#</a> 3、在监控上，设置一个item监控项，使用这个用户参数</h4> <h5 id="_1、添加-memory-total-的-item-监控项-使用-memory-stats-memtotal-的用户参数"><a href="#_1、添加-memory-total-的-item-监控项-使用-memory-stats-memtotal-的用户参数" class="header-anchor">#</a> 1、添加 Memory Total 的 item 监控项，使用 <strong>memory.stats[MemTotal]</strong> 的用户参数</h5> <p><img src="/assets/img/1216496-20171226172027260-1446706159.3d482399.png" alt="img"></p> <ul><li>在进程中定义倍数，规定单位</li></ul> <p><img src="/assets/img/1216496-20171226172027729-143163327.5eb7d53e.png" alt="img"></p> <h5 id="_2、clone-克隆-memory-total-创建memory-free-的监控项"><a href="#_2、clone-克隆-memory-total-创建memory-free-的监控项" class="header-anchor">#</a> 2、clone 克隆 Memory Total 创建Memory Free 的监控项</h5> <p><strong>memory.stats[MemFree]</strong> 用户参数</p> <p><img src="/assets/img/1216496-20171226172028120-539441659.10d151d2.png" alt="img"></p> <h5 id="_3、创建-memory-buffers-的-item-监控项-使用-memory-stats-buffers-的key"><a href="#_3、创建-memory-buffers-的-item-监控项-使用-memory-stats-buffers-的key" class="header-anchor">#</a> 3、创建 Memory Buffers 的 item 监控项，使用 <strong>memory.stats[Buffers]</strong> 的key</h5> <p><img src="/assets/img/1216496-20171226172028448-41169528.3e6de2f4.png" alt="img"></p> <h4 id="_4、上面3个监控项的-graph-图形"><a href="#_4、上面3个监控项的-graph-图形" class="header-anchor">#</a> 4、上面3个监控项的 graph 图形</h4> <h5 id="_1、memory-total"><a href="#_1、memory-total" class="header-anchor">#</a> 1、memory total</h5> <p><img src="/assets/img/1216496-20171226172028745-1274821835.21620d3d.png" alt="img"></p> <h5 id="_2、memory-free"><a href="#_2、memory-free" class="header-anchor">#</a> 2、memory free</h5> <p><img src="/assets/img/1216496-20171226172029088-1142382464.5804d359.png" alt="img"></p> <h5 id="_3、buffers"><a href="#_3、buffers" class="header-anchor">#</a> 3、buffers</h5> <p><img src="/assets/img/1216496-20171226172029338-158312847.6d89ea7c.png" alt="img"></p> <h3 id="_4、使用用户参数监控-php-fpm-服务的状态"><a href="#_4、使用用户参数监控-php-fpm-服务的状态" class="header-anchor">#</a> 4、使用用户参数监控 php-fpm 服务的状态</h3> <p>在agent 端：</p> <h4 id="_1、下载-设置php-fpm"><a href="#_1、下载-设置php-fpm" class="header-anchor">#</a> 1、下载，设置php-fpm</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># yum -y install php-fpm</span>
<span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/php-fpm.d/www.conf # 打开php-fpm的状态页面</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>user <span class="token operator">=</span> nginx
group <span class="token operator">=</span> nginx
pm.status_path <span class="token operator">=</span> /status    <span class="token comment"># php-fpm 的状态监测页面</span>
ping.path <span class="token operator">=</span> /ping           <span class="token comment"># ping 接口，存活状态是否ok</span>
ping.response <span class="token operator">=</span> pong        <span class="token comment"># 响应内容pong</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2、-开启-php-fpm-服务"><a href="#_2、-开启-php-fpm-服务" class="header-anchor">#</a> 2、 开启 php-fpm 服务</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># systemctl start php-fpm</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_3、设置-nginx-设置代理php-和php-fpm的状态页面匹配"><a href="#_3、设置-nginx-设置代理php-和php-fpm的状态页面匹配" class="header-anchor">#</a> 3、设置 nginx ，设置代理php，和php-fpm的状态页面匹配</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/nginx/nginx.conf</span>
location ~ <span class="token punctuation">\</span>.php$ <span class="token punctuation">{</span>
            fastcgi_pass   <span class="token number">127.0</span>.0.1:9000<span class="token punctuation">;</span>
            fastcgi_index  index.php<span class="token punctuation">;</span>
            fastcgi_param  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
            include        fastcgi_params<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
location ~* /<span class="token punctuation">(</span>php-fpm-status<span class="token operator">|</span><span class="token function">ping</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fastcgi_pass   <span class="token number">127.0</span>.0.1:9000<span class="token punctuation">;</span>
            fastcgi_index  index.php<span class="token punctuation">;</span>
            fastcgi_param  SCRIPT_FILENAME  <span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
            include        fastcgi_params<span class="token punctuation">;</span>

            allow <span class="token number">127.0</span>.0.1<span class="token punctuation">;</span>   <span class="token comment"># 因为这个页面很重要，所有需加访问控制</span>
            deny all<span class="token punctuation">;</span>

            access_log off<span class="token punctuation">;</span>    <span class="token comment"># 访问这个页面就不用记录日志了</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="_4、复制状态信息页面到网站根目录"><a href="#_4、复制状态信息页面到网站根目录" class="header-anchor">#</a> 4、复制状态信息页面到网站根目录</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># cp /usr/share/fpm/status.html /usr/share/nginx/html/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1216496-20171226172029791-156116121.d2b243b6.png" alt="img"></p> <h4 id="_5、开启nginx服务"><a href="#_5、开启nginx服务" class="header-anchor">#</a> 5、开启nginx服务</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># systemctl start nginx</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_6、在agent-端-设置用户参数"><a href="#_6、在agent-端-设置用户参数" class="header-anchor">#</a> 6、在agent 端，设置用户参数</h4> <h5 id="_1、查询-curl-192-168-30-7-php-fpm-status"><a href="#_1、查询-curl-192-168-30-7-php-fpm-status" class="header-anchor">#</a> 1、查询 curl 192.168.30.7/php-fpm-status</h5> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgQAAAE3CAMAAADi2qk6AAAAAXNSR0IArs4c6QAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAg1QTFRFAAAAAQAAAQEAAQEBAgEBAgEAAgIBAAAuAAAzAgEzAQEzAQAzAABcAABbAABSAQFcAgFcAQBcAC4AAC5zADN/ADOAAFIAAFKSAFyjAFyiAFuiAFuhAVyiAHMuAHNzAHOwAJJSAJJzAJKSAJLNALBzALCwALDNAM2SAM2wAM3NAP8ANAEBMwEBNQIBMwAANAIBNAEAMwEAM3/EM3/DM4CAM4DFM4DENIDEXAAAXAEAXAEBXQEBXQIBXQICXTWAXDOAXDSAW39/XICAXKPkXKLkW6LjW6HjXKPlXaPkW6LkXaPjf8Tkf8Pkf8PjgDQBgDMAgTQBgTQCgTUCgDNcgFyAgIAziIiIgKKAgKOAgMXFgMXlgMTkgMXkgcTko10Co1wBo10Bo1wApF0Co1wzo1w0pF1do1xco8WAo8XFouSjouOioeOio+Wjo+Sjo+TFouTko+TlouTlouPko+Xlo+TkoePkxYE0xIA0xYA0xYAzxYE1w4A0xIE1xIE0xYFdxYBcxYGBxYCAxaOjxcXFxcXlw+TExOTFxeXFxOTlxOTkxeXlw+Pkw+TkxOPkxeTl+zg4+jg45aNc5aNd5KNd5aRd5KRd46Jd5KNc5cWA5cWB5MWB5MWA5MSB48SB5cWj5cXF5eWj5OWj5OSj5eWk4+Sj5OSk5eXF5OXF5OTF4+TF5eXl5OXl5OTl4+Tl4+Tk9i33FAAAHYFJREFUeNrtnYt/HNV1x2cVO96EkUiRLK9NHSuVY7OlFdTKqDaYpkU2amqwAyFpIlLLoi1NX0hY4HpJWpKYBjD0IaCNgDa1IZFhZPM39r7vuXfu7M5qn+P9nc/H8tW8tfc7575+e070vTSNYCNugAAGCGCAAAYIYIAA5kNwoF4/3vf77ztWF3Y0Z//uH6qWpumNk/7W6nJ645Tcv5OmmxVeWuRHnvKOey698YgsntlJt8/zAw/eZsc96h53gl1l60FeitfS9N0x5xrn2E5mHzwofx9fu0L2u7+F7NCdNL041mcICn7as0dJDdUfuK+dM3Json44d98R/VgTD9y379h0O39ckoEgXl9JZH3XdlZY9XMKFrfPR9HCrfPOcS+tLNx8RNLA6rj657/HGbhUic7cdCg48U+sksS2eO3qWPXcu9k6i01ln/j40UobEIxfvtImAWc//P3MticC27oJwSw/4Uh9uvgZuRXdBCUDAXu+ySLINYNAbDwlPAKv//jFC1H0+Jyo682Ke5yC4OBN5RCiMx+xN3r/m5cq/hWn+LYTnISDn57P7D3x6bcroVpvCcHUWxcHCMFkfXq2Lt7NSfOq69KE9N7HTe3sOzYjnbo8Trj3afFuz0onT84g12M76zP6zuIaLSGYnYkOHM0493Sb1WO80WC/LW3x6tx/fXUpTRstIIjXG+L8ht68mAPBmU1dEwtNITjz3hh/6zN7q+fe+wJxBONr//LDnfTdLwgI/nRHNBXjl8W2PS47t0VTcnGM7f2LnfT9Pfy4a2n61y/vvO8ceZYdKPeKxueT0+wJ7v+cFR5jd3tFbnusMv7Kq3s1EU/wM77YEoKvs2r8Ki8c5j5/mpbMe81dOKvg4+zXCV6f+74mNs7I4yY4CpPKy2tPYK8ithw4bKlrBcFkXRnFJd7YZJ/y9+c8CK6tRtE3TrYHQbx+NQhB9bmrizuyJyDqX7gDv5rZ7uq5q2OR+um9z5fGyJs/vpZeGhNFUZp6i5cui7r2HYPyBKxyn+d797LSf33pyVtP//avT1fo2/8Q6z38eC/1BPf/N6viJ37zWMV6AgIB+1GJ7v/xnlYQzFA3zn/akqnSA+yVZsVJ9rpbd2+OkFyoN1zvJ3udPsBss4ZIewLWFEx4sMhaj3xPsFm8OVjX7/+i3zNUEMQvpSumJ8C6iH4l8+4gf/tZl+DetatfznYK2KkV6whY1fN3n5fH15g/EH5i/LLcdroShoBX8zzby0lgdT71r09XaMdhb7g5mHr74t4QBKy0p1hzoLz0YVULtmSrlP0yKV9qtdeewa4kq1kdqv6j16PVOVH3WoNZ2Xr8jgMBawq8LgF5j93moAAEqmOoxgfRAv8tDMHmmOz1BTuGxhPkQRCvvUsdgfpv6hfnK7L0rQ8fVD1Avi0MAa9mXvO8NP8/LgTVJ5mfyEAwf4e3As8HIag+tfP83uIQqPfVVKk6woPgyFH7Xqv2vx6GgFxFdB101R/wunsHpqX7n3YgOJLpEsiq3yUEYoj4lwqjWpYB2xxU+M93x/g/hUPkVzQfGISbg4O6W3hIDg1aQTD1lhlS5kLwDts+9Q477iFJgewTEAjmP3umkusJOAWF+gQdegJT4XmeQL3v+jZNBw/i8IlQl6AjT6B6Ait5DJiOoYZAVr9EwXcFbFu4Y1g99+GDqiDx6IYneMcfNZy9Lb2BgqD61E/25jcHwp64Tb1BMwh20yeYaQKBe77pGEw2mSSwzAS6BLZPIHCoLvsQ1FpBULt5SjBwtZILwcIv1fvf3BPkDBFFx484AqdPYCEo3icIQjB++VXaMZQVPn+HNgcCjOpTGgK3Y9AUgvDoQA3q80cH3G07EOhpAHOVieOkFZhtPj+hIOBdAv9AMzqIllh1J6kPASlmIIi/y/c3BAN2dBivG0QUBPFLumO4sMP7BLdENcdrYsAQ/+0jUWCySO3Vu4gjcEYHFoKio4MsBON/x9A5xN2/bgYiOTCYelv2Cei2+TsfsI7h37NRw/2fPTNWEILAPEEk2/PjkTPD480THPU8gT7DXmXCXi7TLQxDwHzMkUyzoecJGA5p2sg0B4wLuds5IZWzCGxfumI3pVsPEwiqz4lt3EOw8YGaLCbTxrqa+eAgO21sIDDdQu0IWNX/9OVUzxMYCMQ2v89uIPjpy3qeIOAJ+PTAtqxn0drzeQLx/x/9m2gORFlNGbz6Z9wT8NI2ZWA3M4a2eurTUe/tSP8XNLpudnYwNE/YfH7YGQT2xjpaQBLdtcM9fb6BrGr1BYfhhAAGCGAja4AABghggAAGCGDFIQjr9WCj5gkSQAAIAMHdD0G88dpymkpNzv7resrdlkoMgV5xri6/Fig1wACBIF1Vy/Jiba3GfiUlCkG8UTIeljTbK0pN6pTAAIGAL8GJmpaLcfynLZUaAvXotZuntLSMlsAAgUA4gTcuaA/JPjlbikrdJ2B/FRcXJ1tzoRIYCECglHu1GydtqdwQxBur+69vzbEWIF5fyZTAwEh4gmipkbz2g+9scHlxoAQr3CeolRiC5Fc/upD8nAEeLMEKjw6saqt0HUP2J2zN1XZ4V7C2ky3BLAQ/22g6T2D1euWDIN7gnQD9lSO/BHP7BDBAAAMEsBGHAAYIYIAABghggAAGCEbkL21TOlB9bnPsbv0oAAEgAASwfAhcjaGOBGjXDkwkAPl9frGYxA5SZ9iStnjjWpq+sCG2asF6vNFgB0oZhxWxs9L2s2J1yl6ZxCLsitV2+D1WdDCTxa25eJ08y44Maxuvq2ceE0EJlCfgoQq2z9/VawyBVUQbCdCuItqYIKIktokl5poJFlRruBBsVpe3L/AF6BoHgYcSEfdQ0UH0NrE6KXaQK9NYhN1YruJOIF7nISlqty7IGIbiV/Usv6zIEHbx+uY9z22fr6mIVRICEb5MhLUdBQiMnsBGAvSVBc42P3ZY5HmCBj9ov16wl3W9KQII2rrRKCUGKvmTxCLsBgTqHisqhiUnQSwgymCG8lneXBEBLRe3Ht7/i/MEgjMigsmoNAdaWWSlAxmNkd1W49vSVb0tXQ1BkCgIEhH6ZdWJMaa3yevxO9or5wQb2rXpe6zIlkC0CTKi6aJ4lgUR+1VCsPCRC4EMYTfCEGTUhrLZEMaqSjThm4qCbJ9AQsAulfC+hPQEBgJvm2oT9JW7DIG+x4r8C0WBQJDwAOfaE3AI3lypGAjil0YcgiaewDha4wOWXG9gIbDvuoXAf/+JJ7ANRU88AWsBEtkJ1BBUl3k150EwYp6A9glUFQT7BJvZl8wteRDIHYnTHNhttE+w2SMISJ+A+6DXpbBIQyBDW/O4tiEIRqxPQEcHq7ouckYHUY11DP+BAVMTgeZNKQSBGASwsabTHJht/uiAX9mBoLujA16WMe9sc8AHBvvfTHMgGK3RAdUYrppPL2eeYGtOdg+06tCPF0gh4Cfc+KbbJzDb1DyBaIbMlbsNgZkniHTFUwj4RMCNP/53B4IzqYljOFLzBINUFnlupJcmax82VBDEfzOnJ/L6YglU5kPoCXiT0zcGWLuAFYRcCGCAAAYIYIAABghggKC7FyRLxcNj8Xo4L7JSFvDZoObni6Q3Z3Z00gub4KJ6Tm5i/8vUGU7axOq5HZX+YnxNprrI7JVJcS5nk16c5XcTGXF4+stPTudNV/GsFzIR1qHP9XE8r4VMdWVL7UKw1HTIFtprtw0jBHz8K7UDi3xWKjFTU4mQkqzw9aOm309e4FlsROabBf7DprqJ1y4tkCR5XoYktvcPP35UMnBlzOZKVbUn9oo6uyz2uolPb327IlPsnv306Uo0/+nTlRwGruytPsXPPfT582PR2d+crogkSGzbFyNS6isEw2higkiIimReZK0lEbOHMiMaX0Vs4Qge5+sHIh2Wk/TqBIHgxC1/fvmEhEBkxjyk0+PRvZVI5cA69Jmz90/E3TgZsvTke3uCzzb/sU6CJNJgTb19cSya/7VMc1QhpWIQaJ2gWtcXM/ZWCahVf3SvfdHMtlgvQFCNodUODsiW5LqhqWYdqUgtKoslZpEwW6Q+4stHasWAOgJlPPWdk/6OQBDImq4g+NZ7IuvRpbEgBGffExmOAvmxz5qqP5sDgT13/n81BE9IJ3BxLykVgoDqBPV7bZWAVPVXqDkgGkOiHRxMgAupJ6B5kRvkfwXHwkcPS81ZbYdRoNYO/yDj5LOJMAkEUyqbts2GpiBwzhhfUz0BDYG79/IN2/zbnCiZ/CfKNVSf/Oe9KuGdqP+zIgfqT9Q2WyoEgTNt7FSzXNEjqr+CEBiNIY18NBAI2LOw+raCQp0XWafOlhDcPBUtCu0A/+moCBxHcNNPiUsg0AnwMhCwLsG9a1e+LDsFGQhYBd97me/d40Nw9qYui7Y+AAE79yuXX/2S6BTwHiTPiMg6Al95hW/7oi0VgsDRCZoq1UpAZ3G3MARSY0i1g4MxDwKlLtEOwUKgVES1m484eiLqCERuxDwITAK8THPgQJBpDhwInN23dQsxf/t579JZCEzHcNcQODpBXaVGCbh7CLiyKM12IwbYHJicuCqaqW0OxGCRP+kjjrLw4MfmVRc5s6O85iCTHzXcHGQgyNt76I5mQNQv3fO5fNJPTt9jmgM5RODJUnfdHMiqVN5AVanV/3UCwRDEkKYdQ8OAfi7bMbTvP/UErDzmMBDldAyr59xJAgLBrjqG+QwQT2DPlblyBQq77hjqmiNVSpSAHUDgqRIHYXaIyBjQSOqwxmSIaOObkj7BQfum31Y4hIeIU29m0yjvfojIGLhiGAgkxdMQmCGi9QS7HiI6OkE9m2KVgE4u8oAMyG7LQkC0gwMKf2cni2xeZOOgyGSRDGlX4+MEMzqwjuDgbd3k07zIFoIzpHPgdQydyaJMx9CZLNIdw0N39BTioc/fD4wONQR2smj+Du8TfPpMB5NFVCcoFIAnHSUggUDvdZtduW0pVbmICQREOzioGIh62tjkRZ6z8c3ptLGYJxBOwMwTHJR5s036ZDExbKaN1Wzx1TGnW6ghqJ4TX2vhbzSZNtYQ0L122lhBoHamHzxoSg+F/7ZeTRuPgBWVGo7Ul09gI2yAAAYIYIAABghggAAGCGA9gmAoNYbVZSUsTPRcEVUbWgUiD2E1gnkwuiQvG24I4o0V9RVE+01EqzbkX0aWwiKxuLQ4OvELewbBkFoGAqs2TG6K5aXzSmIWv3h+dCHYvcaQxDEkGkMbJzAUA3HgECh/wKp9US80y5glIxGgJgeCTjSG9FyzimhiFoZiIPZ9KSkhfQLb6vMVBBmziFf9yEPQicbQOdcKTXU5EANxcBDwsDjr5oFkCMurv7V+9R4hKlHryaPWKeiGxtA5l+gJaKQyuWtwakPaDpgoxyq+pYZAdQzTkYWgI40hPTcDQTAG4kAh0JJTqTSzzYEcIv7VD0e3TyCqd9caQ3tua08wEAtAoNWGi+5XU1hppCHYvcbQnpuBIDcG4sAgkM2BURuaIaK0mpYSjR4EnWgMnXOzEARiIEYD6hjG/3gqUmGyrNrQThbF3+Vqw5FrDbqjMbTnOhpD7QQCMRD7C4GSFjZklCxfbUimjXmo6xEMbIUFJBgggAECGCCAAQIYIIABAhgggPUSgi4nr+mCJamfCBPWLQhyhGZDB0EispyIIAVisRgUjCAE6qlWVL4bZE3OhcDqCd25flcdaHMqU7Wh1Q7azMfW7FV0TiWrQKRaxD5AkACCZhBYPaG36ueqA2nWNOMJrHbQ5jazZq9isqtZBSLRIvZ2Uam6zBsB6w5gIU8g35bVrCbQlkSGZJs/0ez38icmLgTBq2gFopM/uWcQ8HVC9fYvdjMb+10HgZu9WL48WXUgzaTqKpBk/mSrRYryrpLoq1jxWR++yiA9ATqGTSHwshfLFzOrDgxBkNnrQJC5Xm0gECh5uc2OCstAEMpZHCo18QSRq0ocMk8gAJDVbwPcwhwI/OzFURQF1YHhPoH7nYQifQJ4giGEgOgJc0cHIkMyHR1otaHVDhYeHQQh6FHHUGggZU9AfNNgsX/5WEsGAdET5s4TiEqzOZWt2tBqBwvPE/QRAtlpwbRxawgKf55wpYAAEAACQAAIYIAABghggAAGCGB3OwQ1GjxiKGMRdmL2K6ew5p4gaQpBKQPXaQZM+htYYQhCVmYISCIsWDEIYrs4EIptaNWGIXWgXjvw4xOoMzLb+mJ+rmRYAU+gm4NQbENXbajVgdrMKqIfqaSWsy3qQ7gKP1cyrA0IgrENAzrByDsqcSs8oCLob0RDP1cyrA0IQrENfbWh21WwyqJM9DLnjP5GNAQEHUAQim3o6wldCKzGkCoGsmf0N6IhmoNOIBCVH4ptaCu8sCeIwrEN+2LoGBaGoBaEwP+iCVEbBtSBpk8gqlkGizNnhLb1xTBELAyBFQnrjmEotiFRGwYgsBpDrllM0i0nemFoWz+C2WGyqDAE/OsnvKZNLMJgbEOiNgzphI3GkJ/bIHMCsuqz2/oS0RDTxoUh6JYN57eSYYAABghgfYYABghggAAGCGCAADYCEJRTi4jJom57gvJpETFt3EMIQjaMEGABqRgE8ca1NH1hQ6gHjMtPZFS6zTAE5dEiYim5KASb1eXtC3w5mWRIXuIByTZzPUFJtIgQlRSGoME/dhWRSk/9slrOOv/SaREhL2sDgkRBYDMk66yIzSEYdi0iIGgTAlYvJEMyDwF5siUEw65FRHPQNgROLMJk+/XN1hCIyh9iLSI6hu1C4GVIzq4Ll0+LiCFiuxCQiIaikpd8X1w+LSImi9qGwEQ0lB0CGcPUebFKp0XEtHEhCAZhUCABAkAACAABIIABAhgggAECGCCADScEg9cO1noYtKK6rDNdLKY66QXSX4Q8weC1g0mv0iJurCSyvkXmGzGzjeR4LSAIWZkhiNQaUhQ9LqeiNyvImtwcgsFpBw0Eze/RAQTSFhkEyJrcwhP0VzuYhSB8j46CWVAIREo8ZE0uBkGftINZCML36BoEqieArMlFIOi7dlA9QfN7dAyByI2IjmFBCPquHVRP0PwenUIgah+5UgtDICq/j9pB1xPk3KNDCCQDEbImhyEYvHZQP0Hze3QEQW2nof9EeIIABIPSDrpn59+jGx3D2o5+9ZE1OQjBoLSDtKrU/YL32D0E4nL8L1IFcWNMG1sI/mMkDT0BQAAIAAEgyEIwan/zfwICQAAIAAEgAASAABAAgqYQOMvCfPKu1rdUVb236nK6Agh2AUHUU8FXfy35v+uAoAAEjt1lEMQvPgsIWkNAlIVm/j+g+iOf68Zry/oUhsyS1Onsv66XG/gZtiTPXTL6BFsK7e26LTb2A4IinkA3B3YlMKD6oxAYFRk75Rrb9Y2TUg9YkxpRrgz7vqMntJpFWwrt7XpyrNrNU4CgLQiMJiAKqP4oBOI4cYCJemqPs8d6GkN5rlnHD+ztOgTxxkoECNqBwI1e5qv+6CcrjhPRL7UQQB2X8ECoDXNZfa7VLNJSdm/XjcvLAUE7EFidYBRQ/TWHQL3NRiLqnWs1i6YU3NtlE88ICLrkCRxr0xNoWzLv+5IMkJazt5sQXLdSEkBQCAKnT5BR/VEIaJ9A1V2wT7CZZceW8vZ2nwR4gjYgoKODjOqP1hcdHazqjzpndCAUg0azSNSLgb1RL1LnAoICEFhlIZ0nyKj+KAQ/2yDzBOazzpkn0BpDuYmoFwN7AcHAPEGb1jvP3WsDBAEIIC8DBIAAEAACQAAIYN9L01HTFqFfCAgAASAABB1AUJq8yOGHJ989BQRtQmBXAMoMgY1jCAg6gqDkBggKQWAF5nrWn0QvNApE5RAEHGXSHQKCIhDYDMl2/S/UHCTykEbJdIeAoJAnUG+v2wRkIYg3VtWKb6l0h4CgEAQ6Q7Kj9Ql0DLkKJC8W4fDqDgFBEQhMhuRgHFMCgRYQlkt3CAgKQGCVha08AWsPRGtQLt0hICgAAcmQ3LxPwNsD1WaXSXcICApAQDIk09FBYgL9WQhqKjB0qXSHgKAIBCZDMh3Nm+iFRIHIKsNXBxIIhlJ3aOIYAoLmEHTFSqE7BASAABAAAkDQawhKYYAAEAACQAAI8iCA2BgQAAJAAAgAgS6GpGShbeULa5cgwwkgAATFIKDZkPVcP91GQtxmIBj6iIaAoG1PYFf97DarQAxCMOQRDYVoChkQ24GAaged5iAv1O3QRzRMOIrrSI5dHAKrBKIQaAViGIIyRDQk8WpgrSCwmkACgVEgFoVg+CIaIiVuh54gFNtw157A3K+/EQ0BQRsQhPoERIGYTXhfkoiGaA6KQKD1hHR0oLdZBSLVjZn6Gu6IhuJ6MlE3rAUEJhuyHeGbbUSBaGMbWgiGPKKhiGuLxqAIBLt/00ob0RAGCGCAANZFCGB3AQSjGcoQygJAAAgAASDIQjCafzx0xz2CYChD3TlxDAFBjyAY7niHbhxDQNBzCIbUAEEBCOKNa2n6woZYATB6QrFsaLRCysoZ7xAQFIJgs7q8fYEvExM94RKXA3gMlDPeISAoBEGDf5JSGRLp1UBWo0GBefniHQKCghAkCgKiJ9QaAvpxljLeISBoAwJWI1RPWF3236qSxjsEBG1B4OoJt193P9qyxjsEBG1BQPWE7FdPTFbWeIeAoC0IiJ5QVOiS2yCUNN4hIGgPAqMnlB0C+dYaK2O8QzeOISDIg6C/NiRaJEAACAABIAAEg4VgSAwQAAJAAAgAASAABD4EEJoCAkAACAABINid5Yz1HRFKJpRBFyx/jiH3bmLhoHbrAqq7OQTFNYZWWdhYUksCRllIIWBX2X72ulqLVCpCrQkk57qV6B0XVjTac53j1N0CtsRjE8TriFTSEoKCGkOzwidWAsXKX0TXDjUEUneiFqSVitBoAp1zCQT+cSFFIznXHkfull1AkrqDkK4B5kFQUGNo1vplrSxv5kAgjtOqBF9F6JxLIMioDe2zhO7rKRCSHAjY3xavNxC4qhAERTSG9n1Sug7tlz0IqD7J0w4ZAZn/ZYXscSFFoz2XagyJGipjgKBNCFppDDPinhwIlIDMgcBqAptDQLSDAUWjPde/Xh4EaA7ahqCIxrAjT+Cfm+cJorCiMeMJvLsFDB3DdiForjGkbXMQglqoT6BVhJuFIPCPcxWN5FyrMaR9gqxhiNguBC00hqSXHoRA16QzOlgl5wpNYHMIrCoxoGgk59rjmo4OxCnoErQFQXONIR2vmzeSKAtNlENnnoCcm27NtfIEVjsYUDTSc616kcwTBISm8TriGBaAAAYIYIAABghggAAGCPAhAAJAAAgAASwLQc0LKHE3GCaL2vcE/UiE28+gd5g2BgRYQCoMAYkEaCBQEQP0mq23JJ+jCRRz+JkZfifaIM3CvNSDHIg+cFhKLgYBjQRodYIqdsiSH09C/ZrRBJrVPH+tLxNt0EnA18W8yAGDqKQgBI6Q29EJ8p9qg5cRMS8CYeJCEI426OZjjXoJAeRlBSFwIgE66iD+2/43Lqi1ZhcCXxNoFT5hJSC5hxEi9CIvMiDYFQROJEBHJyiFoav7r2/NeXHI8rSDLgQ50QZ1c9CTvMiuoTkoCoGoGPVWZjxBtNRIXvvBdzZWoyaeIKJav5AS0LmHEwCvx94AHcM2INANdM3vE0TJr350Ifn5GxeCEIS0fqLqZWracLRBCkGvo9dgiFgMAicSoNUJ6siCtXRrruZPJAY0gVbrx9WBSbo1lxdtUEU+7HZe5KBhsqigJ6CRAI1O0EQW5BUpKzMEQUjrx6/X8JSA9B468mG38yKHKcC0cSEIumi9+C4yDBDAAAGsdBDAAAEMEPTPftcY6hEQAAJAAAi6B8GBev143++/71hd2NGc/c0eChD0AIKCCMweJTVUf+C+ds7IsYn64dx9R/RjTTxw375j04BguCCY5SccqU93DsGRJigZCNjzTTrHAYIeQjBZn56ti3dz0rzqujQhvfdxUzv7js1Ipy6PE+59Wrzbs9LJkzPI9djO+oy+s7hGSwhmZ6IDDk2AoKcQfJ1V41d54TD3+dO0ZN5r7sJZBR9nv07w+tz3NbFxRh43wVGYVF5eewJ7FbHlwGFLXSsIJuvKZgBBt+3/AQzTcpCa0kcrAAAAAElFTkSuQmCC" alt="img"></p> <h5 id="_2、设置"><a href="#_2、设置" class="header-anchor">#</a> 2、设置</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># cd /etc/zabbix/zabbix_agentd.d/</span>
<span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># vim php_status.conf</span>
<span class="token assign-left variable">UserParameter</span><span class="token operator">=</span>php-fpm.stats<span class="token punctuation">[</span>*<span class="token punctuation">]</span>,curl <span class="token parameter variable">-s</span> http://127.0.0.1/status <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'/^$1/{print $$NF}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>分析：设置用户参数为php-fpm.stats[*]，$1为第一个参数；$$NF为awk中的参数，倒数第一列</li></ul> <h5 id="_3、重启服务"><a href="#_3、重启服务" class="header-anchor">#</a> 3、重启服务</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart zabbix-agent</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_4、在zabbix-server-端-查询使用这个用户参数的key"><a href="#_4、在zabbix-server-端-查询使用这个用户参数的key" class="header-anchor">#</a> 4、在zabbix-server 端，查询使用这个用户参数的key</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># zabbix_get -s 192.168.30.7 -p 10050 -k &quot;php-fpm.stats[idle]&quot;</span>
<span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># zabbix_get -s 192.168.30.7 -p 10050 -k &quot;php-fpm.stats[active]&quot;</span>
<span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># zabbix_get -s 192.168.30.7 -p 10050 -k &quot;php-fpm.stats[max active]&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/assets/img/1216496-20171226172030323-150229024.8ce1a92f.png" alt="img"></p> <h4 id="_5、创建一个模板-在模板上创建4个item监控项-使用定义的用户参数"><a href="#_5、创建一个模板-在模板上创建4个item监控项-使用定义的用户参数" class="header-anchor">#</a> 5、创建一个模板，在模板上创建4个item监控项，使用定义的用户参数</h4> <h5 id="_1、创建一个模板"><a href="#_1、创建一个模板" class="header-anchor">#</a> 1、创建一个模板</h5> <p><img src="/assets/img/1216496-20171226172030682-152674187.5e4cc062.png" alt="img"></p> <h5 id="_2、在模板上配置-items-监控项-使用刚定义的用户参数"><a href="#_2、在模板上配置-items-监控项-使用刚定义的用户参数" class="header-anchor">#</a> 2、在模板上配置 items 监控项，使用刚定义的用户参数</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>fpm.stats<span class="token punctuation">[</span>total processes<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1216496-20171226172031120-396201427.bae18c7c.png" alt="img"></p> <h5 id="_3、再clone克隆几个items监控项"><a href="#_3、再clone克隆几个items监控项" class="header-anchor">#</a> 3、再clone克隆几个items监控项</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>fpm.stats<span class="token punctuation">[</span>active processes<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1216496-20171226172031495-1001452204.95f838fe.png" alt="img"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>fpm.stats<span class="token punctuation">[</span>max active processes<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1216496-20171226172031807-398956119.b705c8fd.png" alt="img"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code> fpm.stats<span class="token punctuation">[</span>idle processes<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1216496-20171226172032120-165244744.2652e8ab.png" alt="img"></p> <h5 id="_6、host主机链接模板"><a href="#_6、host主机链接模板" class="header-anchor">#</a> 6、host主机链接模板</h5> <p><img src="/assets/img/1216496-20171226172032495-2030001112.af642549.png" alt="img"></p> <h4 id="_7、查看graph-图形"><a href="#_7、查看graph-图形" class="header-anchor">#</a> 7、查看graph 图形</h4> <h5 id="_1、php-fpm-total-processes"><a href="#_1、php-fpm-total-processes" class="header-anchor">#</a> 1、php-fpm total processes</h5> <p><img src="/assets/img/1216496-20171226172032760-1387400769.758045ad.png" alt="img"></p> <h5 id="_2、php-fpm-active-processes"><a href="#_2、php-fpm-active-processes" class="header-anchor">#</a> 2、php-fpm active processes</h5> <p><img src="/assets/img/1216496-20171226172033276-1849464959.15a7b410.png" alt="img"></p> <h5 id="_3、php-fpm-max-active-processes"><a href="#_3、php-fpm-max-active-processes" class="header-anchor">#</a> 3、php-fpm max active processes</h5> <p><img src="/assets/img/1216496-20171226172033573-911796042.91c723eb.png" alt="img"></p> <h5 id="_4、php-fpm-idle-processes"><a href="#_4、php-fpm-idle-processes" class="header-anchor">#</a> 4、php-fpm idle processes</h5> <p><img src="/assets/img/1216496-20171226172034198-1450005062.2102a482.png" alt="img"></p> <h4 id="_8、把模板导出-可以给别人使用"><a href="#_8、把模板导出-可以给别人使用" class="header-anchor">#</a> 8、把模板导出，可以给别人使用</h4> <h5 id="_1、导出模板"><a href="#_1、导出模板" class="header-anchor">#</a> 1、导出模板</h5> <p><img src="/assets/img/1216496-20171226172034682-1229092767.c364f7d9.png" alt="img"></p> <ul><li>最下面有导出</li></ul> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUcAAABsCAMAAADOi4AYAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAS9QTFRFAnW4A3W4AnW9AnXEA3XEAoe9AofLAprVA5rVA4fLAprLA5rLAprEA5rEJYfAJYbASnW4SnW9Soe9Soe4SprVSofLSrXLSrXifXW9fXW4fXXEdo2Zdo2udo2jdpm8fYe4fZq9fYfLfZrEfYfEdqXPfbXifcjwfcjimo2ZiI2ZiJmZiI2jmoe4mo2jmoe9mpm8mpq4mofEiKXPiLTfmrXEmtvwmsnwtJmZtJmuuJq4uJq9uJrEuLW9pMneuNvLuMjEtNvwuO7VuO7wxqWZ1bW92LSjxrSjxqWj1cjE1MjE1cjV0N/oz97oz9/ozt7o1e7V3+Tnxu7w1e7w2O7w1O7w1e7i+zg469u868mu68jE6sjE69vL6+7f6+7V6+7P6u7V6+7w5ens6u7w6+7i////IOGHfAAAA9RJREFUeNrt2wlT2kAUB/B4VLAH0FaaFqq9KPagVqXQ0kOthN6HUltYI7qFfv/P0D0CCUpgNxBomf+bcQyYtwk/3stuBjSojL0/iGHCgCMc4QhHBBzhCEc4IuAIRzjCEY5whCMcEXAM2fE3RQwTqEf0NRzhiIAjHOEIRwQc4QhHOMIRjnCEIwKOcIQjHBFwhCMc4QhHOMIRjgg4whGOcETA8V91/DWKmG5HpRiJ4940hqH1rdOROE7193GVHYc8HhzhCEc4whGOcIQjHOEIx+COn2OGRsS/eEYImKl7TN3RJ+MYf6OT9ybmGSFgpu4xdUefjKMR8DDafW0EPVelmGnCEY5whCMcx+xYe7xDa5tHL/bFg82j52keN/f7OFrOMmJu13mcVXRs5Yy5rYRhUlrKEpHfymWVHP0zyUKV8mcpbVwv8D03+FmRmZ6jh+FYycvfx092ysJumYNSIVrP9KtHy5SvjZ8xNxQ/porjxtvU1hIxLZNpRBp3qtS6ltpVcvTPJAysJI7eWnvmvMORw+hJr9FDcKyk8+1NpibrkXsWmWt95QdVrMchHIlJrYUqieg7upnEXWRnqfvuUhI9ZPssHpBoM1zH8so74cj6mP/u9LUQll09uB63I0M4nl8rWOKdEI2p49id+ZJ1s70kLy+s/aUpucD2mef7LB6Mqa/rednW6XRGXh/z9PhBOjPYUWy0a9NQcGy/SuMK17iY2p69yh/d9UL2duyX2XH8kDDderzk7nMwLke2XTx+ylu59pCXYqVI+9ajneieaIL39dk5SrWv3cyOI7WT686JLXzkfX129LAdy8KR1WKGdbWIYh9HJ/gc2Zlr+KVfd565d6vryqYxz7QzV3Pu9ZHXZkPMK+ykSPSk1+ghO7J5hTnWM/L6OKAeW95z/6nl2EidnnVV69E/s7XWqUf2hxtOnxAxX4+1Hiv5yoqoRVaDtc26c60UM7ZfPdr3g9Wjnfye2jZJexVosvKxVrvXeD6O/pl2stp2LGXdepzpOXqIjvXlR8XOcyr1yOLTOm8i4ZjzttUgR4u9ttsFRyMiVn7sPShFBjv6ZtqX+eJbODI3Tz02ybyzTzNcRyfe7zi3MGy+Lss15UBHOdfMede4SvX4aitxLvnaMC1jtiDWjYRtKPW1X6ZklI7szsZzfWzym5rTo+P+Wi24IznVG3CkIw84whGOHoWY3qdVcc8IATN1j6k7+mQcv8Z1Pt+MffOMEDBT95i6o0/GMWjgewBwhCMc4QhHOMLxv3HE/yHBEY5T5oiAIxzhCEcEHOEIRzgi4AhHOCLgGF78BSQz/+gch7xZAAAAAElFTkSuQmCC" alt="img"></p> <h5 id="_2、自己定义用户参数的文件-也不要忘记导出"><a href="#_2、自己定义用户参数的文件-也不要忘记导出" class="header-anchor">#</a> 2、自己定义用户参数的文件，也不要忘记导出</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># /etc/zabbix/zabbix_agentd.d/php_status.conf </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="六、zabbix-网络发现-自动发现"><a href="#六、zabbix-网络发现-自动发现" class="header-anchor">#</a> 六、Zabbix 网络发现（自动发现）</h2> <h3 id="_1、介绍-2"><a href="#_1、介绍-2" class="header-anchor">#</a> 1、介绍</h3> <p>网络发现：zabbix server 扫描指定网络范围内的主机；网络发现是zabbix 最具特色的功能之一，它能够根据用户事先定义的规则自动添加监控的主机或服务等</p> <p>优点：</p> <ul><li><p>加快Zabbix部署</p></li> <li><p>简化管理</p></li></ul> <p>在快速变化的环境中使用Zabbix，而不需要过度管理</p> <h3 id="_2、发现方式"><a href="#_2、发现方式" class="header-anchor">#</a> 2、发现方式</h3> <ul><li><p>ip地址范围</p></li> <li><p>可用服务（ftp, ssh, http, ...）</p></li> <li><p>zabbix_agent的响应</p></li> <li><p>snmp_agent的响应</p></li></ul> <h3 id="_3、发现过程"><a href="#_3、发现过程" class="header-anchor">#</a> 3、发现过程</h3> <p>网络发现通常包含两个阶段：discovery 发现和 actions 动作</p> <p>1、discovery</p> <ul><li><p>Zabbix定期扫描网络发现规则中定义的IP范围；检查的频率对于每个规则都是可配置的，每个规则都有一组用于为IP范围执行的服务检查</p></li> <li><p>由网络发现模块执行的服务和主机(IP)的每个检查都会生成一个发现事件</p></li> <li><p>8种响应事件</p></li></ul> <p><img src="/assets/img/1216496-20171226172035479-1598541190.d4449df8.png" alt="img"></p> <p>2、actions</p> <p>网络发现中的事件可以触发 action，从而自动执行指定的操作，把 discvery events当作前提条件；</p> <ul><li><p>Sending notifications 发送通知</p></li> <li><p>Adding/removing hosts 添加/删除主机</p></li> <li><p>Enabling/disabling hosts 启用/禁用host</p></li> <li><p>Adding hosts to a group 向组中添加主机</p></li> <li><p>Removing hosts from a group 移除组中的主机</p></li> <li><p>Linking hosts to/unlinking from a template 从模板链接主机或取消链接</p></li> <li><p>Executing remote scripts 执行远程脚本</p></li></ul> <p>这些事件的配置还可以基于设备的类型、IP 、状态、上线/ 离线等进行配置</p> <p>3、网络发现：接口添加</p> <p>网络发现中添加主机时会自动创建 interface 接口</p> <p>例如：</p> <ul><li><p>如果基于SNMP 检测成功，则会创建SNMP 接口</p></li> <li><p>如果某服务同时响应给了agent 和SNMP ，则<strong>两种接口都会创建</strong></p></li> <li><p>如果同一种发现机制( 如agent) 返回了非惟一数据，则<strong>第一个接口被识别为默认，其它的为额外接口</strong></p></li> <li><p>即便是某主机开始时只有agent 接口，后来又通过snmp 发现了它，同样会为其添加额外的snmp 接口</p></li> <li><p>不同的主机如果返回了相同的数据，则第一个主机将被添加，余下的主机会被当作第一个主机的额外接口</p></li></ul> <h3 id="_4、配置网络发现-network-discovery"><a href="#_4、配置网络发现-network-discovery" class="header-anchor">#</a> 4、配置网络发现 Network discovery</h3> <h4 id="_1、准备一台可被扫描发现的主机"><a href="#_1、准备一台可被扫描发现的主机" class="header-anchor">#</a> 1、准备一台可被扫描发现的主机</h4> <h5 id="_1、安装-agent-段的包"><a href="#_1、安装-agent-段的包" class="header-anchor">#</a> 1、安装 agent 段的包</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># yum -y install zabbix-agent zabbix-sender</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2、设置-agent-配置-可以把之前设置好的node1的配置传过来"><a href="#_2、设置-agent-配置-可以把之前设置好的node1的配置传过来" class="header-anchor">#</a> 2、设置 agent 配置，可以把之前设置好的node1的配置传过来</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/zabbix/zabbix_agentd.conf</span>
<span class="token assign-left variable">Hostname</span><span class="token operator">=</span>node2.qfedu.com <span class="token comment">#只需修改hostname</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="_3、-visudo-修改sudo的配置"><a href="#_3、-visudo-修改sudo的配置" class="header-anchor">#</a> 3、 visudo 修改sudo的配置</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># visudo</span>
<span class="token comment">#Defaults !visiblepw</span>
zabbix <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span> NOPASSWD: ALL
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/assets/img/1216496-20171226172036745-511117378.67eec6e6.png" alt="img"></p> <h5 id="_4、开启服务"><a href="#_4、开启服务" class="header-anchor">#</a> 4、开启服务</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl start zabbix-agent</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2、设置自动发现规则-discovery"><a href="#_2、设置自动发现规则-discovery" class="header-anchor">#</a> 2、设置自动发现规则 discovery</h4> <p><img src="/assets/img/1216496-20171226172037370-800415726.e681bf0d.png" alt="img"></p> <p>注释：</p> <h4 id="_3、key"><a href="#_3、key" class="header-anchor">#</a> 3、key</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># zabbix_get -s 192.168.30.2 -p 10050 -k &quot;system.hostname&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1216496-20171226172037635-349059993.dc56b5d1.png" alt="img"></p> <h5 id="_2、更新间隔"><a href="#_2、更新间隔" class="header-anchor">#</a> 2、更新间隔</h5> <p>1h就好，不要扫描太过频繁，扫描整个网段，太废资源；这里为了实验，设为1m</p> <h4 id="_4、自动发现成功"><a href="#_4、自动发现成功" class="header-anchor">#</a> 4、自动发现成功</h4> <p><img src="/assets/img/1216496-20171226172037948-2146168679.5a177242.png" alt="img"></p> <h4 id="_5、设置自动发现discovery-的动作action"><a href="#_5、设置自动发现discovery-的动作action" class="header-anchor">#</a> 5、设置自动发现discovery 的动作action</h4> <h5 id="_1、创建"><a href="#_1、创建" class="header-anchor">#</a> 1、创建</h5> <p><img src="/assets/img/1216496-20171226172038182-11402625.1b9dee77.png" alt="img"></p> <h5 id="_2、设置action动作"><a href="#_2、设置action动作" class="header-anchor">#</a> 2、设置action动作</h5> <p><img src="/assets/img/1216496-20171226172038541-1323988067.e19dd2cf.png" alt="img"></p> <h6 id="_1、设置a条件-自动发现规则-test-net"><a href="#_1、设置a条件-自动发现规则-test-net" class="header-anchor">#</a> 1、设置A条件，自动发现规则=test.net</h6> <h6 id="_2、设置b条件-自动发现状态-up"><a href="#_2、设置b条件-自动发现状态-up" class="header-anchor">#</a> 2、设置B条件，自动发现状态=up</h6> <p><img src="/assets/img/1216496-20171226172038823-1466028368.1aa80a3a.png" alt="img"></p> <h6 id="_3、要做什么操作"><a href="#_3、要做什么操作" class="header-anchor">#</a> 3、要做什么操作</h6> <ul><li><p>添加主机到监控</p></li> <li><p>自动链接Template OS Linux 到此host</p></li></ul> <p><img src="/assets/img/1216496-20171226172039213-1479221797.165c5dfe.png" alt="img"></p> <h5 id="_3、配置action-完成-默认是-disabled-停用的"><a href="#_3、配置action-完成-默认是-disabled-停用的" class="header-anchor">#</a> 3、配置action 完成，默认是 disabled 停用的</h5> <p><img src="/assets/img/1216496-20171226172039526-1399823520.66b6ec0f.png" alt="img"></p> <h5 id="_4、启用动作-查看效果"><a href="#_4、启用动作-查看效果" class="header-anchor">#</a> 4、启用动作，查看效果</h5> <p>确实已经生效，添加主机成功，模板链接成功</p> <p><img src="/assets/img/1216496-20171226172039979-1033265636.f61e163e.png" alt="img"></p> <h5 id="_5、如果自己需要添加的主机已经扫描添加完成-就可以关闭网络扫描了-因为太耗资源"><a href="#_5、如果自己需要添加的主机已经扫描添加完成-就可以关闭网络扫描了-因为太耗资源" class="header-anchor">#</a> 5、如果自己需要添加的主机已经扫描添加完成，就可以关闭网络扫描了，因为太耗资源</h5> <h2 id="七、zabbix-web-监控"><a href="#七、zabbix-web-监控" class="header-anchor">#</a> 七、Zabbix web 监控</h2> <h3 id="_1、介绍-3"><a href="#_1、介绍-3" class="header-anchor">#</a> 1、介绍</h3> <h4 id="_1、-web-监控"><a href="#_1、-web-监控" class="header-anchor">#</a> 1、 Web 监控</h4> <p>监控指定的站点的<strong>资源下载速度</strong>，及<strong>页面响应时间</strong>，还有<strong>响应代码</strong>；</p> <h5 id="_1、术语"><a href="#_1、术语" class="header-anchor">#</a> 1、术语</h5> <ul><li><p>web Scenario： web场景（站点）</p></li> <li><p>web page ：web页面，一个场景有多个页面</p></li> <li><p>內建key：要测一个页面，要测三个步骤（下边3个內建key）</p></li></ul> <h5 id="_2、内建-key"><a href="#_2、内建-key" class="header-anchor">#</a> 2、内建 key</h5> <ul><li><p>web.test.in[Scenario,Step,bps]：传输速率</p></li> <li><p>web.test.time[Scenario,Step]： 响应时长</p></li> <li><p>web.test.rspcode[Scenario,Step]：响应码</p></li></ul> <h3 id="_2、创建设置web场景"><a href="#_2、创建设置web场景" class="header-anchor">#</a> 2、创建设置web场景</h3> <h4 id="_1、创建-2"><a href="#_1、创建-2" class="header-anchor">#</a> 1、创建</h4> <p><img src="/assets/img/1216496-20171226172040229-465393880.2a7e4945.png" alt="img"></p> <h4 id="_2、配置-web-监测"><a href="#_2、配置-web-监测" class="header-anchor">#</a> 2、配置 web 监测</h4> <p><img src="/assets/img/1216496-20171226172040588-1557305887.7d72d954.png" alt="img"></p> <h5 id="_1、点击步骤-设置-web-page-web-页面"><a href="#_1、点击步骤-设置-web-page-web-页面" class="header-anchor">#</a> 1、点击步骤，设置 web page web 页面</h5> <h6 id="_1、设置名为-home-page"><a href="#_1、设置名为-home-page" class="header-anchor">#</a> 1、设置名为 home page</h6> <p>URL为http://192.168.30.7/index.html 的web页面</p> <p><img src="/assets/img/1216496-20171226172040885-1526168288.5d33a170.png" alt="img"></p> <h6 id="_2、设置名为-fpm-status"><a href="#_2、设置名为-fpm-status" class="header-anchor">#</a> 2、设置名为 fpm status</h6> <p>URL为http://192.168.30.7/fpm-status 的web页面</p> <p><img src="/assets/img/1216496-20171226172041291-925383434.d1686791.png" alt="img"></p> <h6 id="_3、设置2个-web-页面成功"><a href="#_3、设置2个-web-页面成功" class="header-anchor">#</a> 3、设置2个 web 页面成功</h6> <p><img src="/assets/img/1216496-20171226172041870-962857372.ec8f24a0.png" alt="img"></p> <ul><li>如果有特殊认证，也可以添加</li></ul> <p><img src="/assets/img/1216496-20171226172042166-1660206125.f6f0b3ce.png" alt="img"></p> <h3 id="_3、查看测试"><a href="#_3、查看测试" class="header-anchor">#</a> 3、查看测试</h3> <p><img src="/assets/img/1216496-20171226172042510-1962638311.66b48116.png" alt="img"></p> <h2 id="八、zabbix-主动-被动-监控"><a href="#八、zabbix-主动-被动-监控" class="header-anchor">#</a> 八、Zabbix 主动/被动 监控</h2> <h3 id="_1、介绍-4"><a href="#_1、介绍-4" class="header-anchor">#</a> 1、介绍</h3> <ul><li><p>被动检测：相对于agent而言；agent, <strong>server向agent请求获取配置的各监控项相关的数据</strong>，agent接收请求、获取数据并响应给server；</p></li> <li><p>主动检测：相对于agent而言；agent(active),<strong>agent向server请求与自己相关监控项配置</strong>，主动地将server配置的监控项相关的数据发送给server；</p></li></ul> <p>主动监控能极大节约监控server 的资源。zabbix_sender 发送数据：实现人工生成数据，发给server端</p> <ul><li><p>zabbix server上的某主机上，直接定义Item时随便定义一个不与其它已有key冲突的key即可，即item type为&quot;zabbix trapper&quot;；</p></li> <li><p>用法选项：</p></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>zabbix_sender
　　<span class="token parameter variable">-z</span> zabbix_server_ip
　　<span class="token parameter variable">-p</span> zabbix_server_port
　　<span class="token parameter variable">-s</span> zabbix_agent_hostname
　　<span class="token parameter variable">-k</span> key
　　<span class="token parameter variable">-o</span> value 值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2、设置一个通过內建key发送数据的主动监控"><a href="#_2、设置一个通过內建key发送数据的主动监控" class="header-anchor">#</a> 2、设置一个通过內建key发送数据的主动监控</h3> <h4 id="_1、agent-端所需要基本配置"><a href="#_1、agent-端所需要基本配置" class="header-anchor">#</a> 1、agent 端所需要基本配置</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">ServerActive</span><span class="token operator">=</span><span class="token number">192.168</span>.30.107 <span class="token comment"># 给哪个监控server 发送数据</span>
<span class="token assign-left variable">Hostname</span><span class="token operator">=</span>node1.qfedu.com    <span class="token comment"># 自己的主机名，假设主机定死了，不设置下一项</span>
<span class="token comment">#HostnameItem=              # 如果自己的主机名易变动，这一项相当于key一样去匹配</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注意：若后两项同时启用，下边一个选择生效</p> <h4 id="_2、设置一个主动监测"><a href="#_2、设置一个主动监测" class="header-anchor">#</a> 2、设置一个主动监测</h4> <p><img src="/assets/img/1216496-20171226172042870-1427172290.6b5d25d2.png" alt="img"></p> <h5 id="_1、选择进程-每秒更改"><a href="#_1、选择进程-每秒更改" class="header-anchor">#</a> 1、选择进程，每秒更改，</h5> <p>因为key：system.cpu.switches ：上下文的数量进行切换，它返回一个整数值。为了监控效果，选择下一秒减上一秒的值作为监控</p> <p><img src="/assets/img/1216496-20171226172043120-1810882608.781774e6.png" alt="img"></p> <h4 id="_3、已经有-graph-图形"><a href="#_3、已经有-graph-图形" class="header-anchor">#</a> 3、已经有 graph 图形</h4> <p><img src="/assets/img/1216496-20171226172043526-25418384.df38cdb6.png" alt="img"></p> <h3 id="_3、设置一个通过命令zabbix-sender发送数据的主动监控"><a href="#_3、设置一个通过命令zabbix-sender发送数据的主动监控" class="header-anchor">#</a> 3、设置一个通过命令zabbix_sender发送数据的主动监控</h3> <h4 id="_1、配置一个zabbix-traper-采集器-的item-监控项"><a href="#_1、配置一个zabbix-traper-采集器-的item-监控项" class="header-anchor">#</a> 1、配置一个zabbix traper(采集器) 的item 监控项</h4> <p><img src="/assets/img/1216496-20171226172043838-1551635865.5775c8d5.png" alt="img"></p> <h4 id="_2、agent-端手动发送数据"><a href="#_2、agent-端手动发送数据" class="header-anchor">#</a> 2、agent 端手动发送数据</h4> <p><img src="/assets/img/1216496-20171226172044120-1117751325.249d8512.png" alt="img"></p> <h4 id="_3、监控到数据的变化"><a href="#_3、监控到数据的变化" class="header-anchor">#</a> 3、监控到数据的变化</h4> <p><img src="/assets/img/1216496-20171226172044682-2050320416.8024122d.png" alt="img"></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2024/1/23</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/部署/zabbix/监控中心Zabbix进阶/监控中心Zabbix进阶.html">
          监控中心Zabbix进阶
        </a>
        →
      </span></p></div> </main></div> <aside class="page-sidebar"> <div class="page-side-toolbar"><div class="option-box-toc-fixed"><div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:650px"><div style="font-weight:bold;text-align:center;">监控中心Zabbix入门</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#一、监控介绍" class="toc-sidebar-link">一、监控介绍</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、cacti" class="toc-sidebar-link">1、Cacti</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、nagios" class="toc-sidebar-link">2、Nagios</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、ganglia" class="toc-sidebar-link">3、Ganglia</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_4、zabbix" class="toc-sidebar-link">4、Zabbix</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#二、监控区别" class="toc-sidebar-link">二、监控区别</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#三、zabbix-监控介绍" class="toc-sidebar-link">三、Zabbix 监控介绍</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、zabbix-监控架构" class="toc-sidebar-link">1、Zabbix 监控架构</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、zabbix-优点" class="toc-sidebar-link">3、Zabbix 优点</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_4、zabbix-缺点" class="toc-sidebar-link">4、Zabbix 缺点</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_5、zabbix-监控系统监控对象" class="toc-sidebar-link">5、Zabbix 监控系统监控对象</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_6、zabbix监控方式" class="toc-sidebar-link">6、Zabbix监控方式</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_7、zabbix-架构" class="toc-sidebar-link">7、Zabbix 架构</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_8、zabbix-常用术语的含义" class="toc-sidebar-link">8、Zabbix 常用术语的含义</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#四、zabbix-监控系统部署" class="toc-sidebar-link">四、Zabbix 监控系统部署</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、实验准备" class="toc-sidebar-link">1、实验准备</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、zabbix的安装" class="toc-sidebar-link">2、Zabbix的安装</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、配置-server-端" class="toc-sidebar-link">3、配置 server 端</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_4、配置-web-gui" class="toc-sidebar-link">4、配置 web GUI</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_5、浏览器访问并进行初始化设置" class="toc-sidebar-link">5、浏览器访问并进行初始化设置</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_6、配置-agent-端" class="toc-sidebar-link">6、配置 agent 端</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_7、监控过程详解" class="toc-sidebar-link">7、监控过程详解</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#五、zabbix-用户参数-自定义监控项" class="toc-sidebar-link">五、Zabbix 用户参数（自定义监控项）</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、介绍和用法" class="toc-sidebar-link">1、介绍和用法</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、用法展示" class="toc-sidebar-link">2、用法展示</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、用法升级" class="toc-sidebar-link">3、用法升级</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_4、使用用户参数监控-php-fpm-服务的状态" class="toc-sidebar-link">4、使用用户参数监控 php-fpm 服务的状态</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#六、zabbix-网络发现-自动发现" class="toc-sidebar-link">六、Zabbix 网络发现（自动发现）</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、介绍-2" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、发现方式" class="toc-sidebar-link">2、发现方式</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、发现过程" class="toc-sidebar-link">3、发现过程</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_4、配置网络发现-network-discovery" class="toc-sidebar-link">4、配置网络发现 Network discovery</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#七、zabbix-web-监控" class="toc-sidebar-link">七、Zabbix web 监控</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、介绍-3" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、创建设置web场景" class="toc-sidebar-link">2、创建设置web场景</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、查看测试" class="toc-sidebar-link">3、查看测试</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#八、zabbix-主动-被动-监控" class="toc-sidebar-link">八、Zabbix 主动/被动 监控</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、介绍-4" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、设置一个通过內建key发送数据的主动监控" class="toc-sidebar-link">2、设置一个通过內建key发送数据的主动监控</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、设置一个通过命令zabbix-sender发送数据的主动监控" class="toc-sidebar-link">3、设置一个通过命令zabbix_sender发送数据的主动监控</a></li></ul></li></ul></div></div></div></div></div> <div class="option-box-toc-over"><img src="/images/system/toc.png" class="nozoom"> <span class="show-txt">目录</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:550px"><div style="font-weight:bold;text-align:center;">监控中心Zabbix入门</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#一、监控介绍" class="toc-sidebar-link">一、监控介绍</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、cacti" class="toc-sidebar-link">1、Cacti</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、nagios" class="toc-sidebar-link">2、Nagios</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、ganglia" class="toc-sidebar-link">3、Ganglia</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_4、zabbix" class="toc-sidebar-link">4、Zabbix</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#二、监控区别" class="toc-sidebar-link">二、监控区别</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#三、zabbix-监控介绍" class="toc-sidebar-link">三、Zabbix 监控介绍</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、zabbix-监控架构" class="toc-sidebar-link">1、Zabbix 监控架构</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、zabbix-优点" class="toc-sidebar-link">3、Zabbix 优点</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_4、zabbix-缺点" class="toc-sidebar-link">4、Zabbix 缺点</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_5、zabbix-监控系统监控对象" class="toc-sidebar-link">5、Zabbix 监控系统监控对象</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_6、zabbix监控方式" class="toc-sidebar-link">6、Zabbix监控方式</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_7、zabbix-架构" class="toc-sidebar-link">7、Zabbix 架构</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_8、zabbix-常用术语的含义" class="toc-sidebar-link">8、Zabbix 常用术语的含义</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#四、zabbix-监控系统部署" class="toc-sidebar-link">四、Zabbix 监控系统部署</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、实验准备" class="toc-sidebar-link">1、实验准备</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、zabbix的安装" class="toc-sidebar-link">2、Zabbix的安装</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、配置-server-端" class="toc-sidebar-link">3、配置 server 端</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_4、配置-web-gui" class="toc-sidebar-link">4、配置 web GUI</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_5、浏览器访问并进行初始化设置" class="toc-sidebar-link">5、浏览器访问并进行初始化设置</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_6、配置-agent-端" class="toc-sidebar-link">6、配置 agent 端</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_7、监控过程详解" class="toc-sidebar-link">7、监控过程详解</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#五、zabbix-用户参数-自定义监控项" class="toc-sidebar-link">五、Zabbix 用户参数（自定义监控项）</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、介绍和用法" class="toc-sidebar-link">1、介绍和用法</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、用法展示" class="toc-sidebar-link">2、用法展示</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、用法升级" class="toc-sidebar-link">3、用法升级</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_4、使用用户参数监控-php-fpm-服务的状态" class="toc-sidebar-link">4、使用用户参数监控 php-fpm 服务的状态</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#六、zabbix-网络发现-自动发现" class="toc-sidebar-link">六、Zabbix 网络发现（自动发现）</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、介绍-2" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、发现方式" class="toc-sidebar-link">2、发现方式</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、发现过程" class="toc-sidebar-link">3、发现过程</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_4、配置网络发现-network-discovery" class="toc-sidebar-link">4、配置网络发现 Network discovery</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#七、zabbix-web-监控" class="toc-sidebar-link">七、Zabbix web 监控</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、介绍-3" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、创建设置web场景" class="toc-sidebar-link">2、创建设置web场景</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、查看测试" class="toc-sidebar-link">3、查看测试</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#八、zabbix-主动-被动-监控" class="toc-sidebar-link">八、Zabbix 主动/被动 监控</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_1、介绍-4" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_2、设置一个通过內建key发送数据的主动监控" class="toc-sidebar-link">2、设置一个通过內建key发送数据的主动监控</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html#_3、设置一个通过命令zabbix-sender发送数据的主动监控" class="toc-sidebar-link">3、设置一个通过命令zabbix_sender发送数据的主动监控</a></li></ul></li></ul></div></div></div></div></div> <div class="option-box"><img src="/images/system/wechat.png" class="nozoom"> <span class="show-txt">手机看</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.9rem">微信扫一扫</span> <img height="180px" src="https://api.qrserver.com/v1/create-qr-code/?data=https://tec.hjcwzx.top/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E5%85%A5%E9%97%A8.html" style="margin:10px;">
                可以<b>手机看</b>或分享至<b>朋友圈</b></div></div></div></div> <div class="option-box"><img src="/images/system/toggle.png" width="30px" class="nozoom"> <span class="show-txt">左栏</span></div> <div class="option-box"><img src="/images/system/xingqiu.png" width="25px" class="nozoom"> <span class="show-txt">星球</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><img height="180px" src="/images/personal/xingqiu.png" style="margin:10px;"> <b>知识星球</b>：技术侦探
            </div></div></div></div> <div class="option-box"><img src="/images/system/wexin4.png" width="25px" class="nozoom"> <span class="show-txt">交流</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.8rem;font-weight:bold;">添加微信一起学习交流</span> <img src="/images/personal/weixin.png" height="180px" style="margin:10px;">
                PS：添加时请备注<b>技术侦探</b>，谢谢！
              </div></div></div></div> <div class="option-box"><img src="/images/system/heart-1.png" width="25px" class="nozoom"> <span class="show-txt">支持我</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.8rem;font-weight:bold;">鼓励/支持/赞赏我</span> <img height="180px" src="/images/personal/encourage-head.png" style="margin:5px;"> <br>1. 不靠它生存但仍希望得到你的鼓励；
                <br>2. 时刻警醒自己保持技术人的初心，沉淀，分享，成长；
              </div></div></div></div> <!----> <div title="监控中心Zabbix进阶" class="option-box" style="padding-left:2px;text-align:center;"><a href="/部署/zabbix/监控中心Zabbix进阶/监控中心Zabbix进阶.html"><img src="/images/system/next2.png" width="30px" class="nozoom"> <span class="show-txt">下一篇</span></a></div></div>  <div class="page-side-sitemap"><div class="option-box"><img src="/images/system/sitemap.png" class="nozoom img"> <span class="show-txt">站点图</span> <div class="sitemap-container"><h4>站点导航图
              <a href="/更新日志/更新日志.html" class="sitemap-top-link"> 更新日志</a></h4> <table class="sitemap-table"><tr><td nowrap="nowrap"><div class="sitemap-col-group">常用搜索</div></td> <td><div class="sitemap-col-item"><a href="http://www.baidu.com/" target="_blank" title="百度">
          百度
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.google.com/" target="_blank" title="Google">
          Google
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.bing.com/" target="_blank" title="Bing">
          Bing
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://github.com" target="_blank" title="Github">
          Github
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.programcreek.com/java-api-examples/index.php" target="_blank" title="搜代码">
          搜代码
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></td> <!----></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">技术社区</div></td> <td><div class="sitemap-col-item"><a href="http://www.csdn.net/" target="_blank" title="CDSN">
          CDSN
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.cnblogs.com/" target="_blank" title="博客园">
          博客园
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.oschina.net" target="_blank" title="OSChina">
          OSChina
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://segmentfault.com/" target="_blank" title="思否">
          思否
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://juejin.im" target="_blank" title="掘金">
          掘金
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.linuxidc.com/" target="_blank" title="Linux公社">
          Linux公社
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.ibm.com/developerworks/cn/" target="_blank" title="IBM 开发者">
          IBM 开发者
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://stackoverflow.com" target="_blank" title="StackOverflow">
          StackOverflow
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></td> <!----></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">Java相关</div></td> <!----> <td><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="sitemap-col-item">
          JavaSE基础
        </a><a href="/java/JavaSE高级/01_IO.html" class="sitemap-col-item">
          JavaSE高级
        </a><a href="/java/javaWeb/01_Web开发基础.html" class="sitemap-col-item">
          JavaWeb
        </a><a href="/java/JUC/1、JUC概述.html" class="sitemap-col-item">
          JUC
        </a><a href="/java/补充/JVM.html" class="sitemap-col-item">
          JVM
        </a><a href="/java/补充/枚举.html" class="sitemap-col-item">
          ENUM
        </a><a href="/java/补充/线程池.html" class="sitemap-col-item">
          线程池
        </a><a href="/java/补充/自定义注解.html" class="sitemap-col-item">
          自定义注解
        </a><a href="/java/响应式编程/前置知识.html" class="sitemap-col-item">
          响应式编程
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">Spring</div></td> <!----> <td><a href="/框架/Mybatis/01_MyBatis快速入门.html" class="sitemap-col-item">
          Mybatis
        </a><a href="/框架/Mybatis/03_MybatisPlus.html" class="sitemap-col-item">
          Mybatis Plus
        </a><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="sitemap-col-item">
          Spring
        </a><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="sitemap-col-item">
          Spring MVC
        </a><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="sitemap-col-item">
          Spring Boot
        </a><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="sitemap-col-item">
          Spring Cloud Alibaba
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">中间件&amp;插件</div></td> <!----> <td><a href="/中间件/maven/01_Maven基础.html" class="sitemap-col-item">
          Maven中央仓库
        </a><a href="/中间件/ElasticSearch/ElasticSearch.html" class="sitemap-col-item">
          ElasticSearch
        </a><a href="/中间件/redis/Redis笔记全.html" class="sitemap-col-item">
          Redis
        </a><a href="/中间件/redis/布隆过滤器.html" class="sitemap-col-item">
          布隆过滤器
        </a><a href="/中间件/rocketMq/RocketMQ.html" class="sitemap-col-item">
          RocketMQ.
        </a><a href="/中间件/git/笔记.html" class="sitemap-col-item">
          git
        </a><a href="/中间件/自定义Starter/自定义starter.html" class="sitemap-col-item">
          自定义starter
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">运维</div></td> <!----> <td><a href="/部署/nginx/Nginx.html" class="sitemap-col-item">
          Nginx
        </a><a href="/部署/docker/docker.html" class="sitemap-col-item">
          Docker
        </a><a href="/部署/linux/01_Linux_安装.html" class="sitemap-col-item">
          Linux
        </a><a href="/部署/vm/linux安装centos.html" class="sitemap-col-item">
          VM Ware
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">面向对象</div></td> <!----> <td><a href="/设计模式/创建型模式/" class="sitemap-col-item">
          设计模式
        </a></td></tr></table></div></div></div> <!----> </aside></div><div class="global-ui"><div class="read-more-wrap" style="display:none;position:absolute;bottom:0px;z-index:9999;width:100%;margin-top:-100px;font-family:PingFangSC-Regular, sans-serif;"><div id="read-more-mask" style="position: relative; height: 200px; background: -webkit-gradient(linear, 0 0%, 0 100%, from(rgba(255, 255, 255, 0)), to(rgb(255, 255, 255)));"></div> <a id="read-more-btn" target="_self" style="position: absolute; left: 50%; top: 70%; bottom: 30px;\n        transform: translate(-50%, -50%); width: 160px; height: 36px;\n         line-height: 36px; font-size: 15px; text-align: center;\n          border: 1px solid rgb(222, 104, 109); color: rgb(222, 104, 109);\n           background: rgb(255, 255, 255); cursor: pointer; border-radius: 6px;">阅读全文</a> <div id="btw-modal-wrap" style="display: none;"><div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0);"></div> <div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;"><span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 34px; font-size: 34px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">×</span> <p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px;">
            微信扫码或搜索：<span style="color: #E9405A; font-weight: bold;">智慧对话的未来</span> <br>发送：<span id="hutec-token" class="token" style="color: #e9415a; font-weight: bold; font-size: 17px; margin-bottom: 45px;">}</span> <br>即可<span style="color: #e9415a; font-weight: bold;">立即永久</span>解锁本站全部文章</p> <img src="/images/personal/qrcode.png" style="width: 180px; margin-top: 10px; margin-bottom: 30px; border: 8px solid rgb(230, 230, 230);"></div></div></div></div></div>
    <script src="/assets/js/cg-styles.js?v=1712123086861" defer></script><script src="/assets/js/cg-4.js?v=1712123086861" defer></script><script src="/assets/js/cg-11.js?v=1712123086861" defer></script><script src="/assets/js/cg-1.js?v=1712123086861" defer></script><script src="/assets/js/cg-79.js?v=1712123086861" defer></script><script src="/assets/js/cg-app.js?v=1712123086861" defer></script>
  </body>
</html>
