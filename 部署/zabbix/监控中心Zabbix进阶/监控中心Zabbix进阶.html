<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>监控中心Zabbix进阶 | 技术侦探</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <script charset="utf-8" async="async" src="/js/jquery.min.js"></script>
    <script charset="utf-8" async="async" src="/js/fingerprint2.min.js"></script>
    <script charset="utf-8" async="async" src="https://s9.cnzz.com/z_stat.php?id=1278232949&amp;web_id=1278232949"></script>
    <script>
              var _hmt = _hmt || [];
              (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?0b31b4c146bf7126aed5009e1a4a11c8";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
              })();
            </script>
    <meta name="description" content="技术并不是我们所追求的目的,而是技术创新世界">
    <meta property="article:modified_time" content="null">
    <meta property="og:title" content="监控中心Zabbix进阶">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html">
    <meta name="twitter:title" content="监控中心Zabbix进阶">
    <meta name="twitter:url" content="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="robots" content="all">
    <meta name="author" content="小傅哥">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="keywords" content="Java基础">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.ee4e0787.css" as="style"><link rel="preload" href="/assets/css/styles.css?v=1718377004316" as="style"><link rel="preload" href="/assets/js/cg-styles.js?v=1718377004316" as="script"><link rel="preload" href="/assets/js/cg-app.js?v=1718377004316" as="script"><link rel="preload" href="/assets/js/cg-4.js?v=1718377004316" as="script"><link rel="preload" href="/assets/js/cg-12.js?v=1718377004316" as="script"><link rel="preload" href="/assets/js/cg-1.js?v=1718377004316" as="script"><link rel="preload" href="/assets/js/cg-86.js?v=1718377004316" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.ee4e0787.css"><link rel="stylesheet" href="/assets/css/styles.css?v=1718377004316">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">技术侦探</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="nav-link">
  javaSE
</a></li><li class="dropdown-subitem"><a href="/java/javaWeb/01_Web开发基础.html" class="nav-link">
  javaWeb
</a></li><li class="dropdown-subitem"><a href="/java/JUC/1、JUC概述.html" class="nav-link">
  JUC
</a></li><li class="dropdown-subitem"><a href="/java/响应式编程/前置知识.html" class="nav-link">
  响应式编程
</a></li><li class="dropdown-subitem"><a href="/设计模式/概述/概述.html" class="nav-link">
  设计模式
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/jdbc/01_JDBC.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/db/mysql/Mysql基础/01_MySQL概述.html" class="nav-link">
  mysql
</a></li></ul></li><li class="dropdown-item"><h4>
          补充
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/补充/Retrofit2.html" class="nav-link">
  Retrofit2
</a></li><li class="dropdown-subitem"><a href="/java/补充/rxJava/rxJava.html" class="nav-link">
  rxJava
</a></li><li class="dropdown-subitem"><a href="/java/补充/lua.html" class="nav-link">
  lua
</a></li><li class="dropdown-subitem"><a href="/java/补充/JVM.html" class="nav-link">
  jvm
</a></li><li class="dropdown-subitem"><a href="/java/补充/枚举.html" class="nav-link">
  枚举
</a></li><li class="dropdown-subitem"><a href="/java/补充/线程池.html" class="nav-link">
  线程池
</a></li><li class="dropdown-subitem"><a href="/java/补充/自定义注解.html" class="nav-link">
  自定义注解
</a></li></ul></li><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端/前端基础/01_HTML.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-subitem"><a href="/前端/vue/01_ECMAScript6入门.html" class="nav-link">
  vue
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/框架/DDD架构/01-ddd是什么.html" class="nav-link">
  DDD
</a></li><li class="dropdown-item"><!----> <a href="/框架/Mybatis/01_MyBatis快速入门.html" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><h4>
          Spring全家桶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringSecurity/SpringSecurity.html" class="nav-link">
  SpringSecurity
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="nav-link">
  SpringCloudAlibaba
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/中间件/ElasticSearch/ElasticSearch.html" class="nav-link">
  中间件 | 自研轮子
</a></div><div class="nav-item"><a href="/部署/linux/01_Linux_安装.html" class="nav-link">
  部署|运维
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><span class="title">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/实战/商城/项目笔记.html" class="nav-link">
  锋迷铺子
</a></li><li class="dropdown-item"><!----> <a href="/实战/实用工具类/DocUtils.html" class="nav-link">
  实用工具类
</a></li><li class="dropdown-item"><!----> <a href="http://520.hjcwzx.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  研究生工作平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/更新日志/更新日志.html" class="nav-link">
  更新日志
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="nav-link">
  javaSE
</a></li><li class="dropdown-subitem"><a href="/java/javaWeb/01_Web开发基础.html" class="nav-link">
  javaWeb
</a></li><li class="dropdown-subitem"><a href="/java/JUC/1、JUC概述.html" class="nav-link">
  JUC
</a></li><li class="dropdown-subitem"><a href="/java/响应式编程/前置知识.html" class="nav-link">
  响应式编程
</a></li><li class="dropdown-subitem"><a href="/设计模式/概述/概述.html" class="nav-link">
  设计模式
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/jdbc/01_JDBC.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/db/mysql/Mysql基础/01_MySQL概述.html" class="nav-link">
  mysql
</a></li></ul></li><li class="dropdown-item"><h4>
          补充
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/补充/Retrofit2.html" class="nav-link">
  Retrofit2
</a></li><li class="dropdown-subitem"><a href="/java/补充/rxJava/rxJava.html" class="nav-link">
  rxJava
</a></li><li class="dropdown-subitem"><a href="/java/补充/lua.html" class="nav-link">
  lua
</a></li><li class="dropdown-subitem"><a href="/java/补充/JVM.html" class="nav-link">
  jvm
</a></li><li class="dropdown-subitem"><a href="/java/补充/枚举.html" class="nav-link">
  枚举
</a></li><li class="dropdown-subitem"><a href="/java/补充/线程池.html" class="nav-link">
  线程池
</a></li><li class="dropdown-subitem"><a href="/java/补充/自定义注解.html" class="nav-link">
  自定义注解
</a></li></ul></li><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端/前端基础/01_HTML.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-subitem"><a href="/前端/vue/01_ECMAScript6入门.html" class="nav-link">
  vue
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/框架/DDD架构/01-ddd是什么.html" class="nav-link">
  DDD
</a></li><li class="dropdown-item"><!----> <a href="/框架/Mybatis/01_MyBatis快速入门.html" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><h4>
          Spring全家桶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringSecurity/SpringSecurity.html" class="nav-link">
  SpringSecurity
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="nav-link">
  SpringCloudAlibaba
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/中间件/ElasticSearch/ElasticSearch.html" class="nav-link">
  中间件 | 自研轮子
</a></div><div class="nav-item"><a href="/部署/linux/01_Linux_安装.html" class="nav-link">
  部署|运维
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><span class="title">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/实战/商城/项目笔记.html" class="nav-link">
  锋迷铺子
</a></li><li class="dropdown-item"><!----> <a href="/实战/实用工具类/DocUtils.html" class="nav-link">
  实用工具类
</a></li><li class="dropdown-item"><!----> <a href="http://520.hjcwzx.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  研究生工作平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/更新日志/更新日志.html" class="nav-link">
  更新日志
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Zabbix</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/部署/zabbix/监控中心Zabbix入门/监控中心Zabbix入门.html" class="sidebar-link">监控中心Zabbix入门</a></li><li><a href="/部署/zabbix/监控中心Zabbix进阶/监控中心Zabbix进阶.html" class="active sidebar-link">监控中心Zabbix进阶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Nginx</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/部署/nginx/Nginx.html" class="sidebar-link">Nginx</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/部署/docker/微服务架构演变.html" class="sidebar-link">微服务架构</a></li><li><a href="/部署/docker/docker.html" class="sidebar-link">Docker入门</a></li><li><a href="/部署/docker/docker_new.html" class="sidebar-link">Docker(新)</a></li><li><a href="/部署/docker/docker使用个人阿里云镜像源.html" class="sidebar-link">使用阿里云本地镜像库拉取镜像</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/部署/linux/01_Linux_安装.html" class="sidebar-link">Linux_安装</a></li><li><a href="/部署/linux/02_Linux_简介及常用命令.html" class="sidebar-link">Linux_简介及常用命令</a></li><li><a href="/部署/linux/03_Linux_Vim使用.html" class="sidebar-link">Linux_Vim使用</a></li><li><a href="/部署/linux/04_Linux_软件安装及Java开发环境搭建.html" class="sidebar-link">Linux_软件安装及Java开发环境搭建</a></li><li><a href="/部署/linux/05_Linux_防火墙FirewallD设置.html" class="sidebar-link">Linux_防火墙FirewallD设置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vm</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/部署/vm/linux安装centos.html" class="sidebar-link">vm安装linux(centos7)</a></li><li><a href="/部署/vm/linux中网络连接的3种模式.html" class="sidebar-link">linux种网络连接的3种模式</a></li></ul></section></li></ul> </aside> <div><main class="page"> <div class="theme-default-content content__default"><h1 id="监控中心zabbix进阶"><a href="#监控中心zabbix进阶" class="header-anchor">#</a> 监控中心Zabbix进阶</h1> <h2 id="一、zabbix-基于snmp监控"><a href="#一、zabbix-基于snmp监控" class="header-anchor">#</a> 一、Zabbix 基于SNMP监控</h2> <h3 id="_1、介绍"><a href="#_1、介绍" class="header-anchor">#</a> 1、介绍</h3> <ul><li><p>SNMP：<strong>简单</strong>网络管理协议；（非常古老的协议）</p></li> <li><p>三种通信方式：读（get, getnext）、写（set）、trap（陷阱）；</p></li> <li><p>端口：</p></li></ul> <p>161/udp</p> <p>162/udp</p> <ul><li>SNMP协议：年代久远</li></ul> <p>v1: 1989</p> <p>v2c 1993</p> <p>v3: 1998</p> <ul><li><p>监控网络设备：交换机、路由器</p></li> <li><p>MIB：Management Information Base 信息管理基础</p></li> <li><p>OID：Object ID 对象ID</p></li></ul> <h3 id="_2、linux-启用-snmp"><a href="#_2、linux-启用-snmp" class="header-anchor">#</a> 2、Linux 启用 snmp</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># yum install net-snmp net-snmp-utils</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置文件：定义ACL</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/snmp/snmpd.conf</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>启动服务：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl start snmpd  # 被监控端开启的服务</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl start snmptrapd    # 监控端开启的服务（如果允许被监控端启动主动监控时启用）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3、配置文件的介绍"><a href="#_3、配置文件的介绍" class="header-anchor">#</a> 3、配置文件的介绍</h3> <p>开放数据：4步</p> <p><img src="/assets/img/1216496-20171226172045276-679726746.3d165a05.png" alt="img"></p> <p>1、定义认证符，将社区名称&quot;public&quot;映射为&quot;安全名称&quot;</p> <p>2、将安全名称映射到一个组名</p> <p>3、为我们创建一个视图，让我们的团队有权利</p> <p>**掩码：**我列出一些注释，有很多，可以再网上查询</p> <p><strong>.1.3.6.1.2.1.</strong></p> <p>1.1.0：系统描述信息，SysDesc</p> <p>1.3.0：监控时间， SysUptime</p> <p>1.5.0：主机名，SysName</p> <p>1.7.0：主机提供的服务，SysService</p> <p>.1.3.6.1.2.2.</p> <p>2.1.0：网络接口数目</p> <p>2.2.1.2:网络接口的描述信息</p> <p>2.2.1.3:网络接口类型</p> <p>……</p> <p><img src="/assets/img/1216496-20171226172045604-1497693285.6951eb5b.png" alt="img"></p> <p>4、授予对systemview视图的只读访问权</p> <p>4、测试工具</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># snmpget -v 2c -c public HOST OID</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># snmpwalk -v 2c -c public HOST OID # 通过这个端口查询到的数据，全列出了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/assets/img/1216496-20171226172045948-698976544.c58e26b1.png" alt="img"></p> <h3 id="_4、配置snmp监控"><a href="#_4、配置snmp监控" class="header-anchor">#</a> 4、配置SNMP监控</h3> <h4 id="_1、下载-修改配置文件"><a href="#_1、下载-修改配置文件" class="header-anchor">#</a> 1、下载，修改配置文件</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/snmp/snmpd.conf</span>
view    systemview    included   .1.3.6.1.2.1.1
view    systemview    included   .1.3.6.1.2.1.2      <span class="token comment"># 网络接口的相关数据</span>
view    systemview    included   .1.3.6.1.4.1.2021   <span class="token comment"># 系统资源负载，memory, disk io, cpu load </span>
view    systemview    included   .1.3.6.1.2.1.25
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2、在-agent-上测试"><a href="#_2、在-agent-上测试" class="header-anchor">#</a> 2、在 agent 上测试</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># snmpget -v 2c -c public 192.168.30.2 .1.3.6.1.2.1.1.3.0</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># snmpget -v 2c -c public 192.168.30.2 .1.3.6.1.2.1.1.5.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/assets/img/1216496-20171226172046245-1946753487.c58e26b1.png" alt="img"></p> <h4 id="_3、在监控页面-给node2加一个snmp的接口"><a href="#_3、在监控页面-给node2加一个snmp的接口" class="header-anchor">#</a> 3、在监控页面，给node2加一个snmp的接口</h4> <p><img src="/assets/img/1216496-20171226172046541-990434657.70299c2b.png" alt="img"></p> <h4 id="_4、在-node2-上加一个-template-os-linux-snmpv2-模板"><a href="#_4、在-node2-上加一个-template-os-linux-snmpv2-模板" class="header-anchor">#</a> 4、在 node2 上加一个 Template OS Linux SNMPv2 模板</h4> <p><img src="/assets/img/1216496-20171226172046854-1430722762.1cde768a.png" alt="img"></p> <ul><li>模板添加成功，生成一系列东西</li></ul> <p><img src="/assets/img/1216496-20171226172047151-639977143.48a4fc5c.png" alt="img"></p> <ul><li>点开一个item 看一下</li></ul> <p><img src="/assets/img/1216496-20171226172047463-1455547608.fd5065b3.png" alt="img"></p> <h4 id="_5、生成一些最新数据的图形-graph了"><a href="#_5、生成一些最新数据的图形-graph了" class="header-anchor">#</a> 5、生成一些最新数据的图形 graph了</h4> <p><img src="/assets/img/1216496-20171226172047729-481410869.72adee63.png" alt="img"></p> <h3 id="_5、设置入站出站packets-的snmp监控"><a href="#_5、设置入站出站packets-的snmp监控" class="header-anchor">#</a> 5、设置入站出站packets 的SNMP监控</h3> <h4 id="_1、监控网络设备-交换机、路由器的步骤"><a href="#_1、监控网络设备-交换机、路由器的步骤" class="header-anchor">#</a> 1、监控网络设备：交换机、路由器的步骤：</h4> <ul><li><p>把交换机、路由器的SNMP 把对应的OID的分支启用起来</p></li> <li><p>了解这些分支下有哪些OID，他们分别表示什么意义</p></li> <li><p>我们要监控的某一数据：如交换机的某一个接口流量、报文，发送、传入传出的报文数有多少个；传入传出的字节数有多少个，把OID取出来，保存</p></li></ul> <h4 id="_2、定义入站出站的item监控项"><a href="#_2、定义入站出站的item监控项" class="header-anchor">#</a> 2、定义入站出站的item监控项</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>interface traffic packets<span class="token punctuation">(</span>in<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1216496-20171226172048182-394941521.37b67548.png" alt="img"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>interface traffic packets<span class="token punctuation">(</span>out<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1216496-20171226172048510-973935048.b184e4a8.png" alt="img"></p> <h2 id="二、zabbix-jmx接口"><a href="#二、zabbix-jmx接口" class="header-anchor">#</a> 二、Zabbix JMX接口</h2> <p><img src="/assets/img/1216496-20171226172048698-2048639928.9e7dc2bb.png" alt="img"></p> <h3 id="_1、介绍-2"><a href="#_1、介绍-2" class="header-anchor">#</a> 1、介绍</h3> <p>Java虚拟机(JVM)具有内置的插件，使您能够使用JMX监视和管理它。您还可以使用JMX监视工具化的应用程序。</p> <h4 id="_1、配置设置介绍"><a href="#_1、配置设置介绍" class="header-anchor">#</a> 1、配置设置介绍</h4> <h5 id="_1、zabbix-java-gateway主机设置"><a href="#_1、zabbix-java-gateway主机设置" class="header-anchor">#</a> 1、zabbix-java-gateway主机设置</h5> <ul><li>安装 zabbix-java-gateway程序包，启动服务；</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum -y install zabbix-java-gateway</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2、zabbix-server端设置-需要重启服务"><a href="#_2、zabbix-server端设置-需要重启服务" class="header-anchor">#</a> 2、zabbix-server端设置（需要重启服务）</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">JavaGateway</span><span class="token operator">=</span><span class="token number">172.16</span>.0.70                    <span class="token comment">#即 zabbix server IP地址</span>
<span class="token assign-left variable">JavaGatewayPort</span><span class="token operator">=</span><span class="token number">10052</span>
<span class="token assign-left variable">StartJavaPollers</span><span class="token operator">=</span><span class="token number">5</span>  <span class="token comment">#监控项</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_3、tomcat主机设置"><a href="#_3、tomcat主机设置" class="header-anchor">#</a> 3、tomcat主机设置</h5> <ul><li>监控tomcat：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/sysconfig/tomcat</span>
<span class="token assign-left variable">CATALINA_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-Djava.rmi.server.hostname=TOMCAT_SERVER_IP -Djavax.management.builder.initial= -Dcom.sun.management.jmxremote=true -Dcom.sun.management.jmxremote.port=12345 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false&quot;</span>   <span class="token comment">#启用JVM接口，默认没有启用</span>

jmx<span class="token punctuation">[</span>object_name,attribute_name<span class="token punctuation">]</span>
object name      <span class="token comment"># 它代表MBean的对象名称</span>
attribute name - <span class="token comment"># 一个MBean属性名称，可选的复合数据字段名称以点分隔</span>
示例：
jmx<span class="token punctuation">[</span><span class="token string">&quot;java.lang:type=Memory&quot;</span>,<span class="token string">&quot;HeapMemoryUsage.used&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>4、 jmx的详细文档：https://docs.oracle.com/javase/1.5.0/docs/guide/management/agent.html</p> <ul><li><strong>注意:</strong>   如果是手动安装的tomcat  需要编辑  catalina.sh  文件 ，重启 tomcat</li></ul> <h3 id="_2、配置jvm接口监控"><a href="#_2、配置jvm接口监控" class="header-anchor">#</a> 2、配置JVM接口监控</h3> <h4 id="_1、安装配置-tomcat"><a href="#_1、安装配置-tomcat" class="header-anchor">#</a> 1、安装配置 tomcat</h4> <h5 id="_1、下载安装tomcat-主要是用jvm"><a href="#_1、下载安装tomcat-主要是用jvm" class="header-anchor">#</a> 1、下载安装tomcat，主要是用JVM</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum -y install java-1.8.0-openjdk-devel tomcat-admin-webapps tomcat-docs-webapp</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2、加catalina-opts-启用jvm接口-默认没有启用"><a href="#_2、加catalina-opts-启用jvm接口-默认没有启用" class="header-anchor">#</a> 2、加CATALINA_OPTS= #启用JVM接口，默认没有启用</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/sysconfig/tomcat</span>
<span class="token assign-left variable">CATALINA_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-Djava.rmi.server.hostname=192.168.30.2 -Djavax.management.builder.initial= -Dcom.sun.management.jmxremote=true   -Dcom.sun.management.jmxremote.port=12345  -Dcom.sun.management.jmxremote.ssl=false  -Dcom.sun.management.jmxremote.authenticate=false&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>3、开启服务</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># systemctl start tomcat</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2、在-zabbix-server-端安装配置-java-gateway"><a href="#_2、在-zabbix-server-端安装配置-java-gateway" class="header-anchor">#</a> 2、在 zabbix-server 端安装配置 java-gateway</h4> <h5 id="_1、安装配置-java-gateway"><a href="#_1、安装配置-java-gateway" class="header-anchor">#</a> 1、安装配置 java-gateway</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum -y install zabbix-java-gateway</span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/zabbix/zabbix_java_gateway.conf   # 安装完后，会生成一个java_gateway 的配置文件</span>
<span class="token assign-left variable">LISTEN_IP</span><span class="token operator">=</span><span class="token string">&quot;0.0.0.0&quot;</span>                             <span class="token comment">#监听服务器地址</span>
<span class="token assign-left variable">LISTEN_PORT</span><span class="token operator">=</span><span class="token number">10052</span>                               <span class="token comment">#监听zabbix_java进程的端口，默认是10052</span>
<span class="token assign-left variable">PID_FILE</span><span class="token operator">=</span><span class="token string">&quot;/tmp/zabbix_java.pid&quot;</span>                 <span class="token comment">#zabbix_java的pid路径</span>
<span class="token assign-left variable">START_POLLERS</span><span class="token operator">=</span><span class="token number">5</span>                                 <span class="token comment">#zabbix_java的进程数</span>
<span class="token assign-left variable">TIMEOUT</span><span class="token operator">=</span><span class="token number">10</span>                                      <span class="token comment">#zabbix_java的超时时间</span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># systemctl start zabbix-java-gateway.service # 可不用修改，直接开启服务 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="_2、修改-server-配置开启-java-gateway-的配置"><a href="#_2、修改-server-配置开启-java-gateway-的配置" class="header-anchor">#</a> 2、修改 server 配置开启 java-gateway 的配置</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/zabbix/zabbix_server.conf</span>
<span class="token assign-left variable">JavaGateway</span><span class="token operator">=</span><span class="token number">192.168</span>.30.107  
<span class="token assign-left variable">JavaGatewayPort</span><span class="token operator">=</span><span class="token number">10052</span>
<span class="token assign-left variable">StartJavaPollers</span><span class="token operator">=</span><span class="token number">5</span>    <span class="token comment"># 打开5个监控项</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="_3、-重启zabbix-server-服务"><a href="#_3、-重启zabbix-server-服务" class="header-anchor">#</a> 3、  重启zabbix-server 服务</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart zabbix-server </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_3、在node2-主机上添加jmx接口-实验模板"><a href="#_3、在node2-主机上添加jmx接口-实验模板" class="header-anchor">#</a> 3、在node2 主机上添加JMX接口，实验模板</h4> <h5 id="_1、添加jmx接口"><a href="#_1、添加jmx接口" class="header-anchor">#</a> 1、添加JMX接口</h5> <p><img src="/assets/img/1216496-20171226172049182-664693382.1d1fee5d.png" alt="img"></p> <h5 id="_2、在-node2-上连接-tomcat-jmx-模板"><a href="#_2、在-node2-上连接-tomcat-jmx-模板" class="header-anchor">#</a> 2、在 node2 上连接 tomcat JMX 模板</h5> <p><img src="/assets/img/1216496-20171226172049541-701630088.c200ff71.png" alt="img"></p> <h5 id="_3、随便查看一个监控项-item"><a href="#_3、随便查看一个监控项-item" class="header-anchor">#</a> 3、随便查看一个监控项 item</h5> <p><img src="/assets/img/1216496-20171226172050010-1062166097.d2facd59.png" alt="img"></p> <h4 id="_4、自己定义一个堆内存使用的监控项-基于jvm接口-没必要-使用模板就好"><a href="#_4、自己定义一个堆内存使用的监控项-基于jvm接口-没必要-使用模板就好" class="header-anchor">#</a> 4、自己定义一个堆内存使用的监控项，基于JVM接口（没必要，使用模板就好）</h4> <p><img src="/assets/img/1216496-20171226172050479-619246539.7e54278c.png" alt="img"></p> <h2 id="三、zabbix-分布式监控"><a href="#三、zabbix-分布式监控" class="header-anchor">#</a> 三、Zabbix 分布式监控</h2> <p><img src="/assets/img/1216496-20171226172050995-2135249770.8a1278f4.png" alt="img"></p> <h3 id="_1、介绍-3"><a href="#_1、介绍-3" class="header-anchor">#</a> 1、介绍</h3> <p>分布式监控概述：proxy and node</p> <h4 id="_1、zabbix-的三种架构"><a href="#_1、zabbix-的三种架构" class="header-anchor">#</a> 1、Zabbix 的三种架构</h4> <ul><li><p>Server-agent</p></li> <li><p>Server-Node-agent</p></li> <li><p>Server-Proxy-agent</p></li></ul> <h4 id="_2、配置介绍"><a href="#_2、配置介绍" class="header-anchor">#</a> 2、配置介绍</h4> <p>Zabbix Proxy的配置：</p> <ul><li><p>server-node-agent</p></li> <li><p>server-proxy-agent</p></li></ul> <h5 id="_1、配置proxy主机"><a href="#_1、配置proxy主机" class="header-anchor">#</a> 1、配置proxy主机</h5> <h6 id="_1、安装程序包"><a href="#_1、安装程序包" class="header-anchor">#</a> 1、安装程序包</h6> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>zabbix-proxy-mysql zabbix-get zabbix-agent zabbix-sender
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="_2、准备数据库"><a href="#_2、准备数据库" class="header-anchor">#</a> 2、准备数据库</h6> <p>创建、授权用户、导入schema.sql；</p> <h6 id="_3、修改配置文件"><a href="#_3、修改配置文件" class="header-anchor">#</a> 3、修改配置文件</h6> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">Server</span><span class="token operator">=</span> zabbix server  <span class="token comment"># 主机地址；</span>
<span class="token assign-left variable">Hostname</span><span class="token operator">=</span>              <span class="token comment"># 当前代理服务器的名称；在server添加proxy时，必须使用此处指定的名称；需要事先确保server能解析此名称；</span>
<span class="token assign-left variable">DBHost</span><span class="token operator">=</span>
<span class="token assign-left variable">DBName</span><span class="token operator">=</span>
<span class="token assign-left variable">DBUser</span><span class="token operator">=</span>
<span class="token assign-left variable">DBPassword</span><span class="token operator">=</span>
<span class="token assign-left variable">ConfigFrequency</span><span class="token operator">=</span><span class="token number">10</span>    <span class="token comment"># proxy被动模式下，server多少秒同步配置文件至proxy。该参数仅用于被动模式下的代理。范围是1-3600*24*7</span>
<span class="token assign-left variable">DataSenderFrequency</span><span class="token operator">=</span><span class="token number">1</span> <span class="token comment">#代理将每N秒将收集的数据发送到服务器。 对于被动模式下的代理，该参数将被忽略。范围是1-3600</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h6 id="_4、在-server-端添加此-porxy"><a href="#_4、在-server-端添加此-porxy" class="header-anchor">#</a> 4、在 server 端添加此 Porxy</h6> <p>​    Administration --&gt; Proxies</p> <h6 id="_5、在server端配置通过此proxy监控的主机"><a href="#_5、在server端配置通过此proxy监控的主机" class="header-anchor">#</a> 5、在Server端配置通过此Proxy监控的主机；</h6> <p>注意：zabbix agent 端要允许 zabbix proxy 主机执行数据采集操作：</p> <h3 id="_2、实现分布式-zabbix-proxy-监控"><a href="#_2、实现分布式-zabbix-proxy-监控" class="header-anchor">#</a> 2、实现分布式 zabbix proxy 监控</h3> <h4 id="_1、实验前准备"><a href="#_1、实验前准备" class="header-anchor">#</a> 1、实验前准备</h4> <ul><li><p>ntpdate 172.168.30.1 同步时间</p></li> <li><p>关闭防火墙，selinux</p></li> <li><p>设置主机名 hostnamectl set-hostname zbproxy.qfedu.com</p></li> <li><p>vim /etc/hosts 每个机器都设置hosts，以解析主机名；DNS也行</p></li></ul> <p><img src="data:image/png;base64,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" alt="img"></p> <h4 id="_2、环境配置-4台主机"><a href="#_2、环境配置-4台主机" class="header-anchor">#</a> 2、环境配置（4台主机）</h4> <table><thead><tr><th>机器名称</th> <th>IP配置</th> <th>服务角色</th></tr></thead> <tbody><tr><td>zabbix-server</td> <td>192.168.30.107</td> <td>监控</td></tr> <tr><td>agent-node1</td> <td>192.168.30.7</td> <td>被监控端</td></tr> <tr><td>agent-node2</td> <td>192.168.30.2</td> <td>被监控端</td></tr> <tr><td>node3</td> <td>192.168.30.3</td> <td>代理proxy</td></tr></tbody></table> <p>zabbix-server 直接监控一台主机 node1</p> <p>zabbix-server 通过代理 node3 监控 node2</p> <h4 id="_3、在-node3-上配置-mysql"><a href="#_3、在-node3-上配置-mysql" class="header-anchor">#</a> 3、在 node3 上配置 mysql</h4> <h5 id="_1、创建配置-mysql"><a href="#_1、创建配置-mysql" class="header-anchor">#</a> 1、创建配置 mysql</h5> <h6 id="_1、创建-mariadb-repo"><a href="#_1、创建-mariadb-repo" class="header-anchor">#</a> 1、创建 mariadb.repo</h6> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/yum.repos.d/mariadb.repo</span>
写入以下内容：
<span class="token punctuation">[</span>mariadb<span class="token punctuation">]</span>
name <span class="token operator">=</span> MariaDB 
baseurl <span class="token operator">=</span> https://mirrors.ustc.edu.cn/mariadb/yum/10.4/centos7-amd64 
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://mirrors.ustc.edu.cn/mariadb/yum/RPM-GPG-KEY-MariaDB 
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h6 id="_2、yum-安装最新版本-mariadb"><a href="#_2、yum-安装最新版本-mariadb" class="header-anchor">#</a> 2、yum 安装最新版本 mariadb</h6> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment"># yum install -y MariaDB-server MariaDB-clien</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>修改配置文件</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/my.cnf.d/server.cnf</span>
    <span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
    skip_name_resolve <span class="token operator">=</span> ON          <span class="token comment"># 跳过主机名解析</span>
    innodb_file_per_table <span class="token operator">=</span> ON      <span class="token comment"># 开启独立表空间</span>
    innodb_buffer_pool_size <span class="token operator">=</span> 256M  <span class="token comment"># 缓存池大小</span>
    max_connections <span class="token operator">=</span> <span class="token number">2000</span>          <span class="token comment"># 最大连接数</span>
    log-bin <span class="token operator">=</span> master-log            <span class="token comment"># 开启二进制日志</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h6 id="_3、重启我们的数据库服务"><a href="#_3、重启我们的数据库服务" class="header-anchor">#</a> 3、重启我们的数据库服务</h6> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment">#  systemctl restart mariadb</span>
<span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment">#  mysql_secure_installation  # 初始化mariadb</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h6 id="_4、创建数据库-和-授权用户"><a href="#_4、创建数据库-和-授权用户" class="header-anchor">#</a> 4、创建数据库 和 授权用户</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">database</span> zbxproxydb <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token string">'utf8'</span><span class="token punctuation">;</span>
MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> zbxproxydb<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">'zbxproxyuser'</span><span class="token variable">@'192.168.30.%'</span> identified <span class="token keyword">by</span> <span class="token string">'zbxproxypass'</span><span class="token punctuation">;</span>
MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_3、在node3-上下载zabbix-相关的包-主要是代理proxy的包"><a href="#_3、在node3-上下载zabbix-相关的包-主要是代理proxy的包" class="header-anchor">#</a> 3、在node3 上下载zabbix 相关的包，主要是代理proxy的包</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment"># yum -y install zabbix-proxy-mysql zabbix-get zabbix-agent zabbix-sender</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_1、初始化数据库"><a href="#_1、初始化数据库" class="header-anchor">#</a> 1、初始化数据库</h5> <p>zabbix-proxy-mysql 包里带有，导入数据的文件</p> <p><img src="/assets/img/1216496-20171226172052791-1016956277.8d8d6abb.png" alt="img"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment"># cp /usr/share/doc/zabbix-proxy-mysql-3.4.4/schema.sql.gz ./ 复制</span>
<span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment"># gzip -d schema.sql.gz 解包</span>
<span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment"># mysql -root -p zbxproxydb &lt; schema.sql 导入数据</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_2、查看数据已经生成"><a href="#_2、查看数据已经生成" class="header-anchor">#</a> 2、查看数据已经生成</h5> <p><img src="/assets/img/1216496-20171226172053276-1712858671.cc29c1ec.png" alt="img"></p> <h4 id="_4、配置-proxy-端"><a href="#_4、配置-proxy-端" class="header-anchor">#</a> 4、配置 proxy 端</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/zabbix/zabbix_proxy.conf</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1216496-20171226172053682-47495044.675480d9.png" alt="img"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">Server</span><span class="token operator">=</span><span class="token number">192.168</span>.30.107        <span class="token comment"># server 的IP</span>
<span class="token assign-left variable">ServerPort</span><span class="token operator">=</span><span class="token number">10051</span>             <span class="token comment"># server 的端口</span>

<span class="token assign-left variable">Hostname</span><span class="token operator">=</span>zbxproxy.qfedu.com  <span class="token comment"># 主机名</span>
<span class="token assign-left variable">ListenPort</span><span class="token operator">=</span><span class="token number">10051</span>             <span class="token comment"># proxy自己的监听端口</span>
<span class="token assign-left variable">EnableRemoteCommands</span><span class="token operator">=</span><span class="token number">1</span>       <span class="token comment"># 允许远程命令</span>
<span class="token assign-left variable">LogRemoteCommands</span><span class="token operator">=</span><span class="token number">1</span>          <span class="token comment"># 记录远程命令的日志</span>

<span class="token comment"># 数据的配置</span>
<span class="token assign-left variable">DBHost</span><span class="token operator">=</span><span class="token number">192.168</span>.30.3
<span class="token assign-left variable">DBName</span><span class="token operator">=</span>zbxproxydb  
<span class="token assign-left variable">DBUser</span><span class="token operator">=</span>zbxproxyuser
<span class="token assign-left variable">DBPassword</span><span class="token operator">=</span>zbxproxypass

<span class="token assign-left variable">ConfigFrequency</span><span class="token operator">=</span><span class="token number">30</span>      <span class="token comment"># 多长时间，去服务端拖一次有自己监控的操作配置；为了实验更快的生效，这里设置30秒，默认3600s</span>
<span class="token assign-left variable">DataSenderFrequency</span><span class="token operator">=</span><span class="token number">1</span>   <span class="token comment"># 每一秒向server 端发一次数据，发送频度</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>2、开启服务</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment"># systemctl start zabbix-proxy</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_5、配置node2端允许proxy代理监控"><a href="#_5、配置node2端允许proxy代理监控" class="header-anchor">#</a> 5、配置node2端允许proxy代理监控</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/zabbix/zabbix_agentd.conf</span>
<span class="token assign-left variable">Server</span><span class="token operator">=</span><span class="token number">192.168</span>.30.107,192.168.30.3
<span class="token assign-left variable">ServerActive</span><span class="token operator">=</span><span class="token number">192.168</span>.30.107,192.168.30.3
<span class="token punctuation">[</span>root@node3 ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart zabbix-agent # 启动服务 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_6、把代理加入监控-server-创建配置agent-代理"><a href="#_6、把代理加入监控-server-创建配置agent-代理" class="header-anchor">#</a> 6、把代理加入监控 server 创建配置agent 代理</h4> <h5 id="_1、创建agent-代理"><a href="#_1、创建agent-代理" class="header-anchor">#</a> 1、创建agent 代理</h5> <p><img src="/assets/img/1216496-20171226172053932-978486530.75e9185d.png" alt="img"></p> <h5 id="_2、配置"><a href="#_2、配置" class="header-anchor">#</a> 2、配置</h5> <p><img src="/assets/img/1216496-20171226172054213-335809349.9f0b8a82.png" alt="img"></p> <h4 id="_7、创建node2-主机并采用代理监控"><a href="#_7、创建node2-主机并采用代理监控" class="header-anchor">#</a> 7、创建node2 主机并采用代理监控</h4> <p><img src="/assets/img/1216496-20171226172054682-1009619727.b34dc5cc.png" alt="img"></p> <ul><li>设置代理成功</li></ul> <p><img src="/assets/img/1216496-20171226172055307-1060200173.1ea22694.png" alt="img"></p> <h4 id="_8、创建item监控项"><a href="#_8、创建item监控项" class="header-anchor">#</a> 8、创建item监控项</h4> <h5 id="_1、随便创一个监控项-cpu-switches"><a href="#_1、随便创一个监控项-cpu-switches" class="header-anchor">#</a> 1、随便创一个监控项 CPU Switches</h5> <p><img src="/assets/img/1216496-20171226172055698-1128474710.a4ac8a58.png" alt="img"></p> <h5 id="_2、进程里设置每秒更改"><a href="#_2、进程里设置每秒更改" class="header-anchor">#</a> 2、进程里设置每秒更改</h5> <p><img src="/assets/img/1216496-20171226172055932-1067681793.20540ff9.png" alt="img"></p> <h5 id="_3、成功graph-图形生成"><a href="#_3、成功graph-图形生成" class="header-anchor">#</a> 3、成功graph 图形生成</h5> <p><img src="/assets/img/1216496-20171226172056416-1575771036.4201481e.png" alt="img"></p> <h2 id="四、"><a href="#四、" class="header-anchor">#</a> 四、</h2> <h3 id="_1、官方的-share-分享网站"><a href="#_1、官方的-share-分享网站" class="header-anchor">#</a> 1、官方的 share 分享网站</h3> <p>https://share.zabbix.com/zabbix-tools-and-utilities</p> <ul><li>例如：我们要实现监控Nginx ，我们查找一个模板</li></ul> <p><img src="/assets/img/1216496-20171226172057635-1089716709.81666a2f.png" alt="img"></p> <ul><li>就以这个模板为例</li></ul> <p>​                                          <img src="/assets/img/1216496-20171226172058182-128310444.1b494a7d.png" alt="img"></p> <h3 id="_2、在node1-上使用此模板"><a href="#_2、在node1-上使用此模板" class="header-anchor">#</a> 2、在node1 上使用此模板</h3> <h4 id="_1、安装配置-nginx"><a href="#_1、安装配置-nginx" class="header-anchor">#</a> 1、安装配置 nginx</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># yum -y install nginx</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/nginx/nginx.conf  # 按照网页的操作指示</span>
location /stub_status <span class="token punctuation">{</span>
        stub_status on<span class="token punctuation">;</span>
        access_log off<span class="token punctuation">;</span>
    <span class="token comment">#    allow 127.0.0.1;   #为了操作方便，我取消的访问控制</span>
    <span class="token comment">#    deny all;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="data:image/png;base64,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" alt="img"></p> <p>2、启动服务</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart nginx</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2、下载模板所依赖的脚本"><a href="#_2、下载模板所依赖的脚本" class="header-anchor">#</a> 2、下载模板所依赖的脚本</h4> <p><img src="/assets/img/1216496-20171226172058823-57198051.a2ed56c6.png" alt="img"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p /srv/zabbix/libexec/</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># cd /srv/zabbix/libexec/</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># wget https://raw.githubusercontent.com/oscm/zabbix/master/nginx/nginx.sh # 从网页上获取脚本</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># chmod +x nginx.sh # 加执行权限</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_3、配置-agent-的用户参数-userparameter"><a href="#_3、配置-agent-的用户参数-userparameter" class="header-anchor">#</a> 3、配置 agent 的用户参数 UserParameter</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># cd /etc/zabbix/zabbix_agentd.d/</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># wget https://raw.githubusercontent.com/oscm/zabbix/master/nginx/userparameter_nginx.conf # 很短自己写也行</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="data:image/png;base64,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" alt="img"></p> <h4 id="_4、在-windows-上下载模板并导入server-的模板中"><a href="#_4、在-windows-上下载模板并导入server-的模板中" class="header-anchor">#</a> 4、在 windows 上下载模板并导入server 的模板中</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># wget https://raw.githubusercontent.com/oscm/zabbix/master/nginx/zbx_export_templates.xml</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以现在linux上下载，再sz 导出到 windows 上</p> <p><img src="/assets/img/1216496-20171226172059291-1133694346.0bfc6d74.png" alt="img"></p> <h5 id="_1、导入下载的模板"><a href="#_1、导入下载的模板" class="header-anchor">#</a> 1、导入下载的模板</h5> <p><img src="/assets/img/1216496-20171226172059635-1317185355.21118c02.png" alt="img"></p> <h5 id="_2、主机-node1-链接这个模板"><a href="#_2、主机-node1-链接这个模板" class="header-anchor">#</a> 2、主机 node1 链接这个模板</h5> <p><img src="/assets/img/1216496-20171226172100041-1015144646.21d0061c.png" alt="img"></p> <h5 id="_3、模板生效"><a href="#_3、模板生效" class="header-anchor">#</a> 3、模板生效</h5> <p><img src="/assets/img/1216496-20171226172100323-635966866.8e65f4b6.png" alt="img"></p> <h2 id="五、zabbix-server-监控自己-数据库-nginx"><a href="#五、zabbix-server-监控自己-数据库-nginx" class="header-anchor">#</a> 五、Zabbix-server 监控自己，数据库，nginx</h2> <h3 id="_1、下载安装配置agent"><a href="#_1、下载安装配置agent" class="header-anchor">#</a> 1、下载安装配置agent</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/zabbix/zabbix_agentd.conf</span>
<span class="token assign-left variable">EnableRemoteCommands</span><span class="token operator">=</span><span class="token number">1</span>    允许远程命令
<span class="token assign-left variable">LogRemoteCommands</span><span class="token operator">=</span><span class="token number">1</span>    记录远程命令
<span class="token assign-left variable">Server</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1   <span class="token comment">#建议真实ip地址</span>
<span class="token assign-left variable">ServerActive</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1
<span class="token assign-left variable">Hostname</span><span class="token operator">=</span>server.qfedu.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2、自动生成-zabbix-server-的主机"><a href="#_2、自动生成-zabbix-server-的主机" class="header-anchor">#</a> 2、自动生成 Zabbix server 的主机</h3> <p><img src="/assets/img/1216496-20171226172101526-749330259.8613ac83.png" alt="img"></p> <h3 id="_3、在主机中添加模板"><a href="#_3、在主机中添加模板" class="header-anchor">#</a> 3、在主机中添加模板</h3> <p><img src="/assets/img/1216496-20171226172101885-2112581492.b051c251.png" alt="img"></p> <h3 id="_4、启用zabbix-server"><a href="#_4、启用zabbix-server" class="header-anchor">#</a> 4、启用Zabbix server</h3> <p><img src="/assets/img/1216496-20171226172102370-823261452.4f995f08.png" alt="img"></p> <h3 id="_5、监控到数据"><a href="#_5、监控到数据" class="header-anchor">#</a> 5、监控到数据</h3> <h4 id="zabbix-agent-客户端操作"><a href="#zabbix-agent-客户端操作" class="header-anchor">#</a> zabbix_agent 客户端操作</h4> <h4 id="_1、mysql-创建-zabbix-账号连接本地mysql"><a href="#_1、mysql-创建-zabbix-账号连接本地mysql" class="header-anchor">#</a> 1、mysql 创建 zabbix 账号连接本地mysql</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>mysql<span class="token operator">&gt;</span> GRANT ALL ON *.* TO <span class="token string">'zabbix'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'123456'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> FLUSH PRIVILEGES<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2、在 zabbix_agentd 创建 .my.cnf （用户名密码登录配置文件）</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cat  /etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf  # 获取登录配置文件创建路径</span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p /var/lib/zabbix</span>
<span class="token comment"># 在/var/lib/zabbix下创建(隐藏).my.cnf</span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cat ./.my.cnf</span>
 <span class="token punctuation">[</span>client<span class="token punctuation">]</span>
 <span class="token assign-left variable">user</span><span class="token operator">=</span>zabbix
 <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="/assets/img/1216496-20171226172102698-926445046.71715b91.png" alt="img"></p> <h2 id="六、"><a href="#六、" class="header-anchor">#</a> 六、</h2> <h3 id="_1、申请企业微信"><a href="#_1、申请企业微信" class="header-anchor">#</a> 1、申请企业微信</h3> <h4 id="_1、填写注册信息"><a href="#_1、填写注册信息" class="header-anchor">#</a> 1、填写注册信息</h4> <p><img src="/assets/img/20180616131755799-1581514954519.65908312.png" alt="img"></p> <h3 id="_2、配置微信企业号"><a href="#_2、配置微信企业号" class="header-anchor">#</a> 2、配置微信企业号</h3> <h4 id="_1、创建告警组-然后把接受消息人加进来"><a href="#_1、创建告警组-然后把接受消息人加进来" class="header-anchor">#</a> 1、创建告警组，然后把接受消息人加进来</h4> <p><img src="/assets/img/20180616132217589-1581514954520.2dbe6242.png" alt="img"></p> <h4 id="_2、记录账号名称-等下填写接收人信息需要用到"><a href="#_2、记录账号名称-等下填写接收人信息需要用到" class="header-anchor">#</a> 2、记录账号名称，等下填写接收人信息需要用到</h4> <p><img src="/assets/img/20180805151546815-1581514954520.96faac3a.png" alt="img"></p> <h4 id="_3、点击我的企业-查看企业信息-要记录企业corpid"><a href="#_3、点击我的企业-查看企业信息-要记录企业corpid" class="header-anchor">#</a> 3、点击我的企业，查看企业信息，要记录企业CorpID</h4> <p><img src="/assets/img/20180616132724160-1581514954521.cefcd236.png" alt="img"></p> <h4 id="_4、点击企业应用-创建应用"><a href="#_4、点击企业应用-创建应用" class="header-anchor">#</a> 4、点击企业应用，创建应用</h4> <p><img src="/assets/img/20180616132943249-1581514954521.3d92a50e.png" alt="img"></p> <h4 id="_5、填写信息和通知用户组"><a href="#_5、填写信息和通知用户组" class="header-anchor">#</a> 5、填写信息和通知用户组</h4> <p><img src="/assets/img/2018061613311477-1581514954521.e2004710.png" alt="img"></p> <h4 id="_6、创建完-记录agentld和secret"><a href="#_6、创建完-记录agentld和secret" class="header-anchor">#</a> 6、创建完，记录Agentld和Secret</h4> <p><img src="/assets/img/2018061613331047-1581514954521.d64cb663.png" alt="img"></p> <h3 id="_3、配置zabbix服务器"><a href="#_3、配置zabbix服务器" class="header-anchor">#</a> 3、配置zabbix服务器</h3> <h4 id="_1、首先确认已经记录的信息"><a href="#_1、首先确认已经记录的信息" class="header-anchor">#</a> 1、首先确认已经记录的信息</h4> <p>告警组用户的账号，企业CorpID和创建应用的Secret、Agentld</p> <h4 id="_2、修改zabbix-conf"><a href="#_2、修改zabbix-conf" class="header-anchor">#</a> 2、修改zabbix.conf</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@lqfedu.com ~<span class="token punctuation">]</span><span class="token comment"># grep alertscripts /etc/zabbix/zabbix_server.conf </span>
<span class="token comment"># AlertScriptsPath=${datadir}/zabbix/alertscripts</span>
<span class="token assign-left variable">AlertScriptsPath</span><span class="token operator">=</span>/usr/lib/zabbix/alertscripts
我们设置zabbix默认脚本路径，这样在web端就可以获取到脚本
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_3、下载并设置脚本"><a href="#_3、下载并设置脚本" class="header-anchor">#</a> 3、下载并设置脚本</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@lqfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd /usr/lib/zabbix/alertscripts/</span>
<span class="token punctuation">[</span>root@lqfedu.com alertscripts<span class="token punctuation">]</span><span class="token comment"># wget https://raw.githubusercontent.com/OneOaaS/weixin-alert/master/weixin_linux_amd64</span>
<span class="token punctuation">[</span>root@lqfedu.com alertscripts<span class="token punctuation">]</span><span class="token comment"># mv weixin_linux_amd64 wechat</span>
<span class="token punctuation">[</span>root@lqfedu.com alertscripts<span class="token punctuation">]</span><span class="token comment"># chmod 755 wechat </span>
<span class="token punctuation">[</span>root@lqfedu.com alertscripts<span class="token punctuation">]</span><span class="token comment"># chown zabbix:zabbix wechat </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_4、执行脚本进行测试"><a href="#_4、执行脚本进行测试" class="header-anchor">#</a> 4、执行脚本进行测试</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@lqfedu.com alertscripts<span class="token punctuation">]</span><span class="token comment"># ./wechat --corpid=xxx --corpsecret=xxx --msg=&quot;您好，告警测试&quot; --user=用户账号 --agentid=xxx</span>
<span class="token punctuation">{</span><span class="token string">&quot;errcode&quot;</span>:0,<span class="token string">&quot;errmsg&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;ok&quot;</span>,<span class="token string">&quot;invaliduser&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/assets/img/20180616134501823-1581514954521.3599cdb5.png" alt="img"></p> <p>提示：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token parameter variable">-corpid</span><span class="token operator">=</span> 我们企业里面的id
<span class="token parameter variable">--corpsecret</span><span class="token operator">=</span> 这里就是我们Secret里面的id
<span class="token parameter variable">-msg</span><span class="token operator">=</span> 内容
<span class="token parameter variable">-user</span><span class="token operator">=</span>我们邀请用户的账号
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>因为脚本是编译过的，无法进行编辑，我们可以使用 ./wechat -h or --help 查看</p> <h3 id="_4、zabbix-web页面配置告警信息"><a href="#_4、zabbix-web页面配置告警信息" class="header-anchor">#</a> 4、zabbix web页面配置告警信息</h3> <h4 id="_1、管理-报警媒介类型-创建告警媒介"><a href="#_1、管理-报警媒介类型-创建告警媒介" class="header-anchor">#</a> 1、管理-报警媒介类型-创建告警媒介</h4> <p><img src="/assets/img/20180616135048574-1581514954521.520bb9cf.png" alt="img"></p> <h4 id="_2、填写报警媒介信息"><a href="#_2、填写报警媒介信息" class="header-anchor">#</a> 2、填写报警媒介信息</h4> <p><img src="/assets/img/20180616135352989-1581514954521.ef998ce1.png" alt="img"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token parameter variable">--corpid</span><span class="token operator">=</span>我们企业里面的id
<span class="token parameter variable">--corpsecret</span><span class="token operator">=</span>这里就是我们Secret里面的id
<span class="token parameter variable">--agentid</span><span class="token operator">=</span> Agentld ID
<span class="token parameter variable">--user</span><span class="token operator">=</span><span class="token punctuation">{</span>ALERT.SENDTO<span class="token punctuation">}</span>
<span class="token parameter variable">--msg</span><span class="token operator">=</span><span class="token punctuation">{</span>ALERT.MESSAGE<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_3、设置告警用户"><a href="#_3、设置告警用户" class="header-anchor">#</a> 3、设置告警用户</h4> <p><img src="/assets/img/20180616135636811-1581514954521.75c02a01.png" alt="img"></p> <p><img src="/assets/img/20180616140000905-1581514954521.8284b108.png" alt="img"></p> <h4 id="_4、设置告警动作"><a href="#_4、设置告警动作" class="header-anchor">#</a> 4、设置告警动作</h4> <p><img src="/assets/img/20180616140122839-1581514954521.ffbb900c.png" alt="img"></p> <h5 id="_1、动作信息"><a href="#_1、动作信息" class="header-anchor">#</a> 1、动作信息</h5> <p><img src="/assets/img/20180616140240794-1581514954521.d40d58c2.png" alt="img"></p> <h5 id="_2、填写告警时候操作信息"><a href="#_2、填写告警时候操作信息" class="header-anchor">#</a> 2、填写告警时候操作信息</h5> <p><img src="/assets/img/20180616141444154-1581514954521.523713f6.png" alt="img"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>故障告警:<span class="token punctuation">{</span>TRIGGER.STATUS<span class="token punctuation">}</span>: <span class="token punctuation">{</span>TRIGGER.NAME<span class="token punctuation">}</span> 
告警主机:<span class="token punctuation">{</span>HOST.NAME<span class="token punctuation">}</span> 
主机地址:<span class="token punctuation">{</span>HOST.IP<span class="token punctuation">}</span> 
告警时间:<span class="token punctuation">{</span>EVENT.DATE<span class="token punctuation">}</span> <span class="token punctuation">{</span>EVENT.TIME<span class="token punctuation">}</span> 
告警等级:<span class="token punctuation">{</span>TRIGGER.SEVERITY<span class="token punctuation">}</span> 
告警信息:<span class="token punctuation">{</span>TRIGGER.NAME<span class="token punctuation">}</span> 
问题详情:<span class="token punctuation">{</span>ITEM.NAME<span class="token punctuation">}</span>:<span class="token punctuation">{</span>ITEM.VALUE<span class="token punctuation">}</span> 
事件代码:<span class="token punctuation">{</span>EVENT.ID<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="_3、填写恢复操作信息"><a href="#_3、填写恢复操作信息" class="header-anchor">#</a> 3、填写恢复操作信息</h5> <p><img src="/assets/img/20180616141452375-1581514954521.1e02f981.png" alt="img"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>故障解除:<span class="token punctuation">{</span>TRIGGER.STATUS<span class="token punctuation">}</span>: <span class="token punctuation">{</span>TRIGGER.NAME<span class="token punctuation">}</span> 
恢复主机:<span class="token punctuation">{</span>HOST.NAME<span class="token punctuation">}</span> 
主机地址:<span class="token punctuation">{</span>HOST.IP<span class="token punctuation">}</span> 
恢复时间:<span class="token punctuation">{</span>EVENT.DATE<span class="token punctuation">}</span> <span class="token punctuation">{</span>EVENT.TIME<span class="token punctuation">}</span> 
恢复等级:<span class="token punctuation">{</span>TRIGGER.SEVERITY<span class="token punctuation">}</span> 
恢复信息:<span class="token punctuation">{</span>TRIGGER.NAME<span class="token punctuation">}</span> 
问题详情:<span class="token punctuation">{</span>ITEM.NAME<span class="token punctuation">}</span>:<span class="token punctuation">{</span>ITEM.VALUE<span class="token punctuation">}</span> 
事件代码:<span class="token punctuation">{</span>EVENT.ID<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_5、手动触发告警-测试微信接收信息"><a href="#_5、手动触发告警-测试微信接收信息" class="header-anchor">#</a> 5、手动触发告警，测试微信接收信息</h3> <ul><li>在agent端使用yum安装一下redis：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># yum install redis -y</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>修改配置文件</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/redis.conf </span>
<span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0        <span class="token comment">#不做任何认证操作</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>修改完成以后启动服务并检查端口：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl start redis</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># ss -nutlp | grep redis</span>
tcp    LISTEN     <span class="token number">0</span>      <span class="token number">128</span>       *:6379                  *:*                   users:<span class="token variable"><span class="token punctuation">((</span>&quot;redis<span class="token operator">-</span>server&quot;<span class="token punctuation">,</span>pid<span class="token operator">=</span><span class="token number">5250</span><span class="token punctuation">,</span>fd<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">))</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_1、定义监控项"><a href="#_1、定义监控项" class="header-anchor">#</a> 1、定义监控项</h4> <ul><li>进入 配置 ---&gt; 主机 ---&gt; node1 ---&gt; 监控项（items）---&gt; 创建监控项</li></ul> <p><img src="/assets/img/1204916-20171202113104229-190921891-1581514954521.789ffed8.png" alt="img"></p> <ul><li>填写完毕以后点击下方的添加。</li></ul> <p><img src="/assets/img/1204916-20171202113113058-1658955278-1581514954521.fd8c65b5.png" alt="img"></p> <ul><li>该监控项已成功添加。查看一下他的值：检测中 ---&gt; 最新数据</li></ul> <p><img src="data:image/png;base64,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" alt="img"></p> <h4 id="_2、定义触发器"><a href="#_2、定义触发器" class="header-anchor">#</a> 2、定义触发器</h4> <ul><li>进入 配置 ---&gt; 主机 ---&gt; node1 ---&gt; 触发器（trigger）---&gt; 创建触发器</li></ul> <p><img src="/assets/img/1204916-20171202113131761-6927531-1581514954521.da3a3478.png" alt="img"></p> <ul><li>填写完毕以后点击下方的添加</li></ul> <p><img src="/assets/img/1204916-20171202113142604-1237551286-1581514954521.84d35081.png" alt="img"></p> <ul><li><p>该触发器已成功添加。查看：监测中 ---&gt; 最新数据
<img src="/assets/img/1204916-20171202113150479-1838545643-1581514954521.9420ed0d.png" alt="img"></p></li> <li><p>手动关闭 redis 服务来检测：</p></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl stop redis.service</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>进入监测中 ---&gt; 问题</li></ul> <p><img src="/assets/img/1204916-20171202113158901-587145295-1581514954521.c7044259.png" alt="img"></p> <ul><li>已经显示的是问题了。并且有持续的时间，当服务被打开，会转为已解决状态：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl start redis.service </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/1204916-20171202113209698-2146797322-1581514954521.a5879bff.png" alt="img"></p> <p><img src="/assets/img/无标题-1555110317243-1581514954521.abd890c5.png" alt="无标题"></p> <h3 id="_6、微信客户端检测"><a href="#_6、微信客户端检测" class="header-anchor">#</a> 6、微信客户端检测</h3> <h2 id="七、zabbix-调优"><a href="#七、zabbix-调优" class="header-anchor">#</a> 七、Zabbix 调优</h2> <h3 id="_1、调优"><a href="#_1、调优" class="header-anchor">#</a> 1、调优</h3> <h4 id="_1、database"><a href="#_1、database" class="header-anchor">#</a> 1、Database：</h4> <ul><li><p>历史数据不要保存太长时长；</p></li> <li><p>尽量让数据缓存在数据库服务器的内存中；</p></li></ul> <p>2、触发器表达式：</p> <ul><li><p>减少使用聚合函数min(), max(), avg()；尽量使用last()，nodata()，因为聚合函数，要运算</p></li> <li><p>数据收集：polling较慢(减少使用SNMP/agentless/agent）；<strong>尽量使用trapping（agent(active）主动监控）；</strong></p></li> <li><p>数据类型：文本型数据处理速度较慢；<strong>尽量少</strong>收集类型为<strong>文本</strong> text或string类型的数据；<strong>多使用</strong>类型为numeric <strong>数值型数据</strong> 的；</p></li></ul> <h3 id="_2、zabbix服务器的进程"><a href="#_2、zabbix服务器的进程" class="header-anchor">#</a> 2、zabbix服务器的进程</h3> <h4 id="_1、服务器组件的数量"><a href="#_1、服务器组件的数量" class="header-anchor">#</a> 1、服务器组件的数量；</h4> <ul><li><p>alerter, discoverer, escalator, http poller, hourekeeper, icmp pinger, ipmi polller, poller, trapper, configration syncer, ...</p></li> <li><p>StartPollers=60</p></li> <li><p>StartPingers=10</p></li></ul> <p>...</p> <ul><li>StartDBSyncer=5</li></ul> <p>...</p> <h4 id="_2、设定合理的缓存大小"><a href="#_2、设定合理的缓存大小" class="header-anchor">#</a> 2、设定合理的缓存大小</h4> <ul><li><p>CacheSize=8M</p></li> <li><p>HistoryCacheSize=16M</p></li> <li><p>HistoryIndexCacheSize=4M</p></li> <li><p>TrendCacheSize=4M</p></li> <li><p>ValueCacheSize=4M</p></li></ul> <h4 id="_3、数据库优化"><a href="#_3、数据库优化" class="header-anchor">#</a> 3、数据库优化</h4> <p>分表：</p> <p>history_*</p> <p>trends*</p> <p>events*</p> <h3 id="_3、其它解决方案"><a href="#_3、其它解决方案" class="header-anchor">#</a> 3、其它解决方案</h3> <ul><li><p>grafana：展示</p></li> <li><p>collectd：收集</p></li> <li><p>influxdb：存储</p></li></ul> <h3 id="_4、grafana-collectd-influxdb"><a href="#_4、grafana-collectd-influxdb" class="header-anchor">#</a> 4、grafana+collectd+influxdb</h3> <h4 id="_5、prometheus"><a href="#_5、prometheus" class="header-anchor">#</a> 5、prometheus：</h4> <ul><li><p>exporter：收集</p></li> <li><p>alertmanager:</p></li> <li><p>grafana：展示</p></li></ul> <h2 id="八、zabbix监控实战-tomcat监控"><a href="#八、zabbix监控实战-tomcat监控" class="header-anchor">#</a> 八、Zabbix监控实战-Tomcat监控</h2> <h3 id="_1、方法一-开发java监控页面"><a href="#_1、方法一-开发java监控页面" class="header-anchor">#</a> 1、方法一：开发java监控页面</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com tomcat8_1<span class="token punctuation">]</span><span class="token comment"># cat /application/tomcat/webapps/memtest/meminfo.jsp </span>
<span class="token operator">&lt;</span>%
Runtime rtm <span class="token operator">=</span> Runtime.getRuntime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
long mm <span class="token operator">=</span> rtm.maxMemory<span class="token punctuation">(</span><span class="token punctuation">)</span>/1024/1024<span class="token punctuation">;</span>
long tm <span class="token operator">=</span> rtm.totalMemory<span class="token punctuation">(</span><span class="token punctuation">)</span>/1024/1024<span class="token punctuation">;</span>
long fm <span class="token operator">=</span> rtm.freeMemory<span class="token punctuation">(</span><span class="token punctuation">)</span>/1024/1024<span class="token punctuation">;</span>

out.println<span class="token punctuation">(</span><span class="token string">&quot;JVM memory detail info :&lt;br&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out.println<span class="token punctuation">(</span><span class="token string">&quot;Max memory:&quot;</span>+mm+<span class="token string">&quot;MB&quot;</span>+<span class="token string">&quot;&lt;br&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out.println<span class="token punctuation">(</span><span class="token string">&quot;Total memory:&quot;</span>+tm+<span class="token string">&quot;MB&quot;</span>+<span class="token string">&quot;&lt;br&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out.println<span class="token punctuation">(</span><span class="token string">&quot;Free memory:&quot;</span>+fm+<span class="token string">&quot;MB&quot;</span>+<span class="token string">&quot;&lt;br&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out.println<span class="token punctuation">(</span><span class="token string">&quot;Available memory can be used is :&quot;</span>+<span class="token punctuation">(</span>mm+fm-tm<span class="token punctuation">)</span>+<span class="token string">&quot;MB&quot;</span>+<span class="token string">&quot;&lt;br&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
%<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2、方法二-使用jps命令进行监控"><a href="#_2、方法二-使用jps命令进行监控" class="header-anchor">#</a> 2、方法二：使用jps命令进行监控</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># jps -lvm</span>

<span class="token number">31906</span> org.apache.catalina.startup.Bootstrap start <span class="token parameter variable">-Djava.util.logging.config.file</span><span class="token operator">=</span>/application/tomcat8_1/conf/logging.properties <span class="token parameter variable">-Djava.util.logging.manager</span><span class="token operator">=</span>org.apache.juli.ClassLoaderLogManager <span class="token parameter variable">-Djava.endorsed.dirs</span><span class="token operator">=</span>/application/tomcat8_1/endorsed <span class="token parameter variable">-Dcatalina.base</span><span class="token operator">=</span>/application/tomcat8_1 <span class="token parameter variable">-Dcatalina.home</span><span class="token operator">=</span>/application/tomcat8_1 <span class="token parameter variable">-Djava.io.tmpdir</span><span class="token operator">=</span>/application/tomcat8_1/temp

<span class="token number">31812</span> org.apache.catalina.startup.Bootstrap start <span class="token parameter variable">-Djava.util.logging.config.file</span><span class="token operator">=</span>/application/tomcat/conf/logging.properties <span class="token parameter variable">-Djava.util.logging.manager</span><span class="token operator">=</span>org.apache.juli.ClassLoaderLogManager <span class="token parameter variable">-Djava.endorsed.dirs</span><span class="token operator">=</span>/application/tomcat/endorsed <span class="token parameter variable">-Dcatalina.base</span><span class="token operator">=</span>/application/tomcat <span class="token parameter variable">-Dcatalina.home</span><span class="token operator">=</span>/application/tomcat <span class="token parameter variable">-Djava.io.tmpdir</span><span class="token operator">=</span>/application/tomcat/temp

<span class="token number">31932</span> org.apache.catalina.startup.Bootstrap start <span class="token parameter variable">-Djava.util.logging.config.file</span><span class="token operator">=</span>/application/tomcat8_2/conf/logging.properties <span class="token parameter variable">-Djava.util.logging.manager</span><span class="token operator">=</span>org.apache.juli.ClassLoaderLogManager <span class="token parameter variable">-Djava.endorsed.dirs</span><span class="token operator">=</span>/application/tomcat8_2/endorsed <span class="token parameter variable">-Dcatalina.base</span><span class="token operator">=</span>/application/tomcat8_2 <span class="token parameter variable">-Dcatalina.home</span><span class="token operator">=</span>/application/tomcat8_2 <span class="token parameter variable">-Djava.io.tmpdir</span><span class="token operator">=</span>/application/tomcat8_2/temp

<span class="token number">32079</span> sun.tools.jps.Jps <span class="token parameter variable">-lvm</span> <span class="token parameter variable">-Denv.class.path</span><span class="token operator">=</span>.:/application/jdk/lib:/application/jdk/jre/lib:/application/jdk/lib/tools.jar <span class="token parameter variable">-Dapplication.home</span><span class="token operator">=</span>/application/jdk1.8.0_60 <span class="token parameter variable">-Xms8m</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_3、tomcat-远程监控功能"><a href="#_3、tomcat-远程监控功能" class="header-anchor">#</a> 3、Tomcat 远程监控功能</h3> <h4 id="_1、修改配置文件-开启远程监控"><a href="#_1、修改配置文件-开启远程监控" class="header-anchor">#</a> 1、修改配置文件，开启远程监控</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /application/tomcat8_1/bin/catalina.sh +97</span>
<span class="token assign-left variable">CATALINA_OPTS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$CATALINA_OPTS</span>
-Dcom.sun.management.jmxremote 
-Dcom.sun.management.jmxremote.port=12345  
-Dcom.sun.management.jmxremote.authenticate=false 
-Dcom.sun.management.jmxremote.ssl=false 
-Djava.rmi.server.hostname=10.0.0.17&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_2、重启服务-检查12345端口是否开启"><a href="#_2、重启服务-检查12345端口是否开启" class="header-anchor">#</a> 2、重启服务，检查12345端口是否开启</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># /application/tomcat8_1/bin/shutdown.sh </span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># /application/tomcat8_1/bin/startup.sh </span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># netstat -tunlp|grep 12345</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_3、-检查端口"><a href="#_3、-检查端口" class="header-anchor">#</a> 3、 检查端口</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># netstat -tunlp|grep 12345</span>
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::12345           :::*          LISTEN      <span class="token number">33158</span>/java  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>4、在windows上监控tomcat</p> <p><strong>注意：windwos需要安装jdk环境！</strong></p> <p>查考：http://www.oracle.com/technetwork/java/javase/downloads/index.html</p> <h5 id="_1、软件路径"><a href="#_1、软件路径" class="header-anchor">#</a> 1、软件路径</h5> <div class="language-cmd line-numbers-mode"><pre class="language-text"><code>C:\Program Files\Java\jdk1.8.0_31\bin
jconsole.exe   jvisualvm.exe
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="_2、jconsole-exe-使用说明"><a href="#_2、jconsole-exe-使用说明" class="header-anchor">#</a> 2、jconsole.exe 使用说明</h5> <p><img src="/assets/img/1190037-20171127162727784-599308853.7e7ffd81.png" alt="img"></p> <p>​         连接成功即可进行监控，连接的时候注意端口信息。</p> <p><img src="/assets/img/1190037-20171127162738565-738384915.d67517e9.png" alt="img"></p> <h6 id="_3、jvisualvm-exe-使用说明"><a href="#_3、jvisualvm-exe-使用说明" class="header-anchor">#</a> 3、jvisualvm.exe 使用说明</h6> <p><img src="/assets/img/1190037-20171127162750784-48883054.4369ef0b.png" alt="img"></p> <p>​         <strong>输入ip地址</strong></p> <p><img src="data:image/png;base64,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" alt="img"></p> <p>​         <strong>主机添加完成，添加JMX监控</strong></p> <p><img src="/assets/img/1190037-20171127162808253-922440046.e022a7e8.png" alt="img"></p> <p>​            <strong>注意添加的时候输入端口信息</strong></p> <p><img src="/assets/img/1190037-20171127162819378-1066040054.c6a6993c.png" alt="img"></p> <p>​         添加完成后就能够多tomcat程序进行监控。</p> <h3 id="_4、zabbix-监控-tomcat-程序"><a href="#_4、zabbix-监控-tomcat-程序" class="header-anchor">#</a> 4、zabbix 监控 tomcat 程序</h3> <h5 id="_1、zabbix-服务端安装配置-java监控服务"><a href="#_1、zabbix-服务端安装配置-java监控服务" class="header-anchor">#</a> 1、zabbix 服务端安装配置 java监控服务</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum install zabbix-java-gateway -y</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2、查看配置文件"><a href="#_2、查看配置文件" class="header-anchor">#</a> 2、查看配置文件</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>配置文件路径：/etc/zabbix/zabbix_java_gateway.conf
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># sed -i -e '220a JavaGateway=127.0.0.1' -e '236a StartJavaPollers=5'  /etc/zabbix/zabbix_server.conf</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="_3、启动zabbix-java-gateway服务-与zabbix服务"><a href="#_3、启动zabbix-java-gateway服务-与zabbix服务" class="header-anchor">#</a> 3、启动zabbix-java-gateway服务，与zabbix服务</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># systemctl start zabbix-java-gateway.service</span>
<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart zabbix-server.service</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="_4、检查java端口是否开启"><a href="#_4、检查java端口是否开启" class="header-anchor">#</a> 4、检查java端口是否开启</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># netstat -lntup |grep java</span>
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::10052   :::*    LISTEN      <span class="token number">72971</span>/java  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="_5、检查java进程是否存在"><a href="#_5、检查java进程是否存在" class="header-anchor">#</a> 5、检查java进程是否存在</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ps -ef |grep [j]ava</span>
zabbix    <span class="token number">72971</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">11</span>:29 ?        00:00:00 <span class="token function">java</span> <span class="token parameter variable">-server</span> <span class="token parameter variable">-Dlogback.configurationFile</span><span class="token operator">=</span>/etc/zabbix/zabbix_java_gateway_logback.xml <span class="token parameter variable">-classpath</span> lib:lib/android-json-4.3_r3.1.jar:lib/logback-classic-0.9.27.jar:lib/logback-core-0.9.27.jar:lib/slf4j-api-1.6.1.jar:bin/zabbix-java-gateway-3.0.13.jar <span class="token parameter variable">-Dzabbix.pidFile</span><span class="token operator">=</span>/var/run/zabbix/zabbix_java.pid <span class="token parameter variable">-Dzabbix.timeout</span><span class="token operator">=</span><span class="token number">3</span> <span class="token parameter variable">-Dsun.rmi.transport.tcp.responseTimeout</span><span class="token operator">=</span><span class="token number">3000</span> com.zabbix.gateway.JavaGateway
zabbix    <span class="token number">73255</span>  <span class="token number">73226</span>  <span class="token number">0</span> <span class="token number">11</span>:35 ?        00:00:00 /usr/sbin/zabbix_server: <span class="token function">java</span> poller <span class="token comment">#1 [got 0 values in 0.000002 sec, idle 5 sec]</span>
zabbix    <span class="token number">73256</span>  <span class="token number">73226</span>  <span class="token number">0</span> <span class="token number">11</span>:35 ?        00:00:00 /usr/sbin/zabbix_server: <span class="token function">java</span> poller <span class="token comment">#2 [got 0 values in 0.000002 sec, idle 5 sec]</span>
zabbix    <span class="token number">73257</span>  <span class="token number">73226</span>  <span class="token number">0</span> <span class="token number">11</span>:35 ?        00:00:00 /usr/sbin/zabbix_server: <span class="token function">java</span> poller <span class="token comment">#3 [got 0 values in 0.000002 sec, idle 5 sec]</span>
zabbix    <span class="token number">73258</span>  <span class="token number">73226</span>  <span class="token number">0</span> <span class="token number">11</span>:35 ?        00:00:00 /usr/sbin/zabbix_server: <span class="token function">java</span> poller <span class="token comment">#4 [got 0 values in 0.000002 sec, idle 5 sec]</span>
zabbix    <span class="token number">73259</span>  <span class="token number">73226</span>  <span class="token number">0</span> <span class="token number">11</span>:35 ?        00:00:00 /usr/sbin/zabbix_server: <span class="token function">java</span> poller <span class="token comment">#5 [got 0 values in 0.000004 sec, idle 5 sec]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="_6、web界面添加"><a href="#_6、web界面添加" class="header-anchor">#</a> 6、web界面添加</h5> <h6 id="_1、添加主机"><a href="#_1、添加主机" class="header-anchor">#</a> 1、添加主机</h6> <p><img src="/assets/img/1190037-20171127163059878-505035611.41d08f7b.png" alt="img"></p> <h6 id="_2、主机管理模板-注意是jmx模板"><a href="#_2、主机管理模板-注意是jmx模板" class="header-anchor">#</a> 2、主机管理模板，注意是JMX模板</h6> <p><img src="/assets/img/1190037-20171127163107737-761922553.b093d4a2.png" alt="img"></p> <h6 id="_3、监控完成"><a href="#_3、监控完成" class="header-anchor">#</a> 3、监控完成</h6> <p><img src="/assets/img/1190037-20171127163113909-1086285598.89f06047.png" alt="img"></p> <h3 id="_5、排除-tomcat-故障步骤"><a href="#_5、排除-tomcat-故障步骤" class="header-anchor">#</a> 5、排除 tomcat 故障步骤</h3> <h6 id="_1、查看-catalina-out"><a href="#_1、查看-catalina-out" class="header-anchor">#</a> 1、查看 catalina.out</h6> <h6 id="_2、使用-sh-show-busy-java-threads-sh-脚本进行检测"><a href="#_2、使用-sh-show-busy-java-threads-sh-脚本进行检测" class="header-anchor">#</a> 2、使用 sh show-busy-java-threads.sh 脚本进行检测</h6> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># @Function</span>
<span class="token comment"># Find out the highest cpu consumed threads of java, and print the stack of these threads.</span>
<span class="token comment">#</span>
<span class="token comment"># @Usage</span>
<span class="token comment">#   $ ./show-busy-java-threads.sh</span>
<span class="token comment">#</span>
<span class="token comment"># @author Jerry Lee</span>

<span class="token builtin class-name">readonly</span> <span class="token assign-left variable">PROG</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">basename</span> $0<span class="token variable">`</span></span>
<span class="token builtin class-name">readonly</span> <span class="token parameter variable">-a</span> <span class="token assign-left variable">COMMAND_LINE</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token variable">$0</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span><span class="token punctuation">)</span>

<span class="token function-name function">usage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF
Usage: <span class="token variable">${PROG}</span> [OPTION]...
Find out the highest cpu consumed threads of java, and print the stack of these threads.
Example: <span class="token variable">${PROG}</span> -c 10

Options:
    -p, --pid       find out the highest cpu consumed threads from the specifed java process,
                    default from all java process.
    -c, --count     set the thread count to show, default is 5
    -h, --help      display this help and exit
EOF</span>
    <span class="token builtin class-name">exit</span> <span class="token variable">$1</span>
<span class="token punctuation">}</span>

<span class="token builtin class-name">readonly</span> <span class="token assign-left variable">ARGS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>getopt <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$PROG</span>&quot;</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-o</span> c:p:h <span class="token parameter variable">-l</span> count:,pid:,help -- <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span><span class="token variable">`</span></span>
<span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> usage <span class="token number">1</span>
<span class="token builtin class-name">eval</span> <span class="token builtin class-name">set</span> -- <span class="token string">&quot;<span class="token variable">${ARGS}</span>&quot;</span>

<span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token keyword">in</span>
    -c<span class="token operator">|</span>--count<span class="token punctuation">)</span>
        <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$2</span>&quot;</span>
        <span class="token builtin class-name">shift</span> <span class="token number">2</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    -p<span class="token operator">|</span>--pid<span class="token punctuation">)</span>
        <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$2</span>&quot;</span>
        <span class="token builtin class-name">shift</span> <span class="token number">2</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    -h<span class="token operator">|</span>--help<span class="token punctuation">)</span>
        usage
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    --<span class="token punctuation">)</span>
        <span class="token builtin class-name">shift</span>
        <span class="token builtin class-name">break</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
<span class="token keyword">done</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable">${count<span class="token operator">:-</span>5}</span>

<span class="token function-name function">redEcho</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-c</span> /dev/stdout <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span>
        <span class="token comment"># if stdout is console, turn on color output.</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-ne</span> <span class="token string">&quot;<span class="token entity" title="\033">\033</span>[1;31m&quot;</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\033">\033</span>[0m&quot;</span>
    <span class="token punctuation">}</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">yellowEcho</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-c</span> /dev/stdout <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span>
        <span class="token comment"># if stdout is console, turn on color output.</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-ne</span> <span class="token string">&quot;<span class="token entity" title="\033">\033</span>[1;33m&quot;</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\033">\033</span>[0m&quot;</span>
    <span class="token punctuation">}</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">blueEcho</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-c</span> /dev/stdout <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span>
        <span class="token comment"># if stdout is console, turn on color output.</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-ne</span> <span class="token string">&quot;<span class="token entity" title="\033">\033</span>[1;36m&quot;</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\033">\033</span>[0m&quot;</span>
    <span class="token punctuation">}</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># Check the existence of jstack command!</span>
<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token function">which</span> jstack <span class="token operator">&amp;&gt;</span> /dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$JAVA_HOME</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span>
        redEcho <span class="token string">&quot;Error: jstack not found on PATH!&quot;</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token operator">!</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;<span class="token variable">$JAVA_HOME</span>/bin/jstack&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span>
        redEcho <span class="token string">&quot;Error: jstack not found on PATH and <span class="token variable">$JAVA_HOME</span>/bin/jstack file does NOT exists!&quot;</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token operator">!</span> <span class="token punctuation">[</span> <span class="token parameter variable">-x</span> <span class="token string">&quot;<span class="token variable">$JAVA_HOME</span>/bin/jstack&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span>
        redEcho <span class="token string">&quot;Error: jstack not found on PATH and <span class="token variable">$JAVA_HOME</span>/bin/jstack is NOT executalbe!&quot;</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span>&quot;</span>
<span class="token keyword">fi</span>

<span class="token builtin class-name">readonly</span> <span class="token assign-left variable">uuid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%s<span class="token variable">`</span></span>_<span class="token variable">${<span class="token environment constant">RANDOM</span>}</span>_<span class="token variable">$$</span>

<span class="token function-name function">cleanupWhenExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rm</span> /tmp/<span class="token variable">${uuid}</span>_* <span class="token operator">&amp;&gt;</span> /dev/null
<span class="token punctuation">}</span>
<span class="token builtin class-name">trap</span> <span class="token string">&quot;cleanupWhenExit&quot;</span> EXIT

<span class="token function-name function">printStackOfThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> line
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
    <span class="token keyword">while</span> <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">&quot; &quot;</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-a</span> line <span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token variable">${line<span class="token punctuation">[</span>0<span class="token punctuation">]</span>}</span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">threadId</span><span class="token operator">=</span><span class="token variable">${line<span class="token punctuation">[</span>1<span class="token punctuation">]</span>}</span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">threadId0x</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">printf</span> %x $<span class="token punctuation">{</span>threadId<span class="token punctuation">}</span><span class="token variable">`</span></span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token variable">${line<span class="token punctuation">[</span>2<span class="token punctuation">]</span>}</span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">pcpu</span><span class="token operator">=</span><span class="token variable">${line<span class="token punctuation">[</span>4<span class="token punctuation">]</span>}</span>

        <span class="token builtin class-name">local</span> <span class="token assign-left variable">jstackFile</span><span class="token operator">=</span>/tmp/<span class="token variable">${uuid}</span>_<span class="token variable">${pid}</span>

        <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;<span class="token variable">${jstackFile}</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${user}</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;<span class="token variable">${<span class="token environment constant">USER</span>}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                    jstack <span class="token variable">${pid}</span> <span class="token operator">&gt;</span> <span class="token variable">${jstackFile}</span>
                <span class="token keyword">else</span>
                    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token environment constant">$UID</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                        <span class="token function">sudo</span> <span class="token parameter variable">-u</span> <span class="token variable">${user}</span> jstack <span class="token variable">${pid}</span> <span class="token operator">&gt;</span> <span class="token variable">${jstackFile}</span>
                    <span class="token keyword">else</span>
                        redEcho <span class="token string">&quot;[<span class="token variable"><span class="token variable">$((</span>count<span class="token operator">++</span><span class="token variable">))</span></span>] Fail to jstack Busy(<span class="token variable">${pcpu}</span>%) thread(<span class="token variable">${threadId}</span>/0x<span class="token variable">${threadId0x}</span>) stack of java process(<span class="token variable">${pid}</span>) under user(<span class="token variable">${user}</span>).&quot;</span>
                        redEcho <span class="token string">&quot;User of java process(<span class="token variable">$user</span>) is not current user(<span class="token environment constant">$USER</span>), need sudo to run again:&quot;</span>
                        yellowEcho <span class="token string">&quot;    sudo <span class="token variable">${COMMAND_LINE<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span>
                        <span class="token builtin class-name">echo</span>
                        <span class="token builtin class-name">continue</span>
                    <span class="token keyword">fi</span>
                <span class="token keyword">fi</span>
            <span class="token punctuation">}</span> <span class="token operator">||</span> <span class="token punctuation">{</span>
                redEcho <span class="token string">&quot;[<span class="token variable"><span class="token variable">$((</span>count<span class="token operator">++</span><span class="token variable">))</span></span>] Fail to jstack Busy(<span class="token variable">${pcpu}</span>%) thread(<span class="token variable">${threadId}</span>/0x<span class="token variable">${threadId0x}</span>) stack of java process(<span class="token variable">${pid}</span>) under user(<span class="token variable">${user}</span>).&quot;</span>
                <span class="token builtin class-name">echo</span>
                <span class="token function">rm</span> <span class="token variable">${jstackFile}</span>
                <span class="token builtin class-name">continue</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        blueEcho <span class="token string">&quot;[<span class="token variable"><span class="token variable">$((</span>count<span class="token operator">++</span><span class="token variable">))</span></span>] Busy(<span class="token variable">${pcpu}</span>%) thread(<span class="token variable">${threadId}</span>/0x<span class="token variable">${threadId0x}</span>) stack of java process(<span class="token variable">${pid}</span>) under user(<span class="token variable">${user}</span>):&quot;</span>
        <span class="token function">sed</span> <span class="token string">&quot;/nid=0x<span class="token variable">${threadId0x}</span> /,/^$/p&quot;</span> <span class="token parameter variable">-n</span> <span class="token variable">${jstackFile}</span>
    <span class="token keyword">done</span>
<span class="token punctuation">}</span>


<span class="token function">ps</span> <span class="token parameter variable">-Leo</span> pid,lwp,user,comm,pcpu --no-headers <span class="token operator">|</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">${pid}</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
    <span class="token function">awk</span> <span class="token string">'$4==&quot;java&quot;{print $0}'</span> <span class="token operator">||</span>
    <span class="token function">awk</span> <span class="token parameter variable">-v</span> <span class="token string">&quot;pid=<span class="token variable">${pid}</span>&quot;</span> <span class="token string">'$1==pid,$4==&quot;java&quot;{print $0}'</span>
<span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-k5</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-n</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">--lines</span> <span class="token string">&quot;<span class="token variable">${count}</span>&quot;</span> <span class="token operator">|</span> printStackOfThread
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br></div></div><h2 id="九、zabbix-监控-php-fpm"><a href="#九、zabbix-监控-php-fpm" class="header-anchor">#</a> 九、zabbix 监控 php-fpm</h2> <p>zabbix监控php-fpm主要是通过nginx配置php-fpm的状态输出页面，在正则取值.要nginx能输出php-fpm的状态首先要先修改php-fpm的配置，没有开启nginx是没有法输出php-fpm status。</p> <h3 id="_1、修改文件php-fpm"><a href="#_1、修改文件php-fpm" class="header-anchor">#</a> 1、修改文件php-fpm</h3> <p>vim /application/php-5.5.32/etc/php-fpm.conf文件</p> <p><img src="/assets/1469203-20181021111145530-1093315619.png" alt="img"></p> <h3 id="_2、修改nginx配置文件"><a href="#_2、修改nginx配置文件" class="header-anchor">#</a> 2、修改nginx配置文件</h3> <p>vim /application/nginx/conf/extra/www.conf，在server 区块下添加一行内容</p> <p><img src="/assets/1469203-20181021111723825-434667199.png" alt="img"></p> <p><strong>重启nginx</strong></p> <h3 id="_3、curl-127-0-0-1-php-status-我们可以看到php-fpm-的状态信息"><a href="#_3、curl-127-0-0-1-php-status-我们可以看到php-fpm-的状态信息" class="header-anchor">#</a> 3、curl 127.0.0.1/php_status 我们可以看到php-fpm 的状态信息</h3> <p><img src="/assets/1469203-20181021111937582-1246959624.png" alt="img"></p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>含义</strong></th></tr></thead> <tbody><tr><td><strong>pool</strong></td> <td><strong>php-fpm pool的名称，大多数情况下为www</strong></td></tr> <tr><td><strong>process manager</strong></td> <td><strong>进程管理方式，现今大多都为dynamic，不要使用static</strong></td></tr> <tr><td><strong>start time</strong></td> <td><strong>php-fpm上次启动的时间</strong></td></tr> <tr><td><strong>start since</strong></td> <td><strong>php-fpm已运行了多少秒</strong></td></tr> <tr><td><strong>accepted conn</strong></td> <td><strong>pool接收到的请求数</strong></td></tr> <tr><td><strong>listen queue</strong></td> <td><strong>处于等待状态中的连接数，如果不为0，需要增加php-fpm进程数</strong></td></tr> <tr><td><strong>max listen queue</strong></td> <td><strong>php-fpm启动到现在处于等待连接的最大数量</strong></td></tr> <tr><td><strong>listen queue len</strong></td> <td><strong>处于等待连接队列的套接字大小</strong></td></tr> <tr><td><strong>idle processes</strong></td> <td><strong>处于空闲状态的进程数</strong></td></tr> <tr><td><strong>active processes</strong></td> <td><strong>处于活动状态的进程数</strong></td></tr> <tr><td><strong>total processess</strong></td> <td><strong>进程总数</strong></td></tr> <tr><td><strong>max active process</strong></td> <td><strong>从php-fpm启动到现在最多有几个进程处于活动状态</strong></td></tr> <tr><td><strong>max children reached</strong></td> <td><strong>当pm试图启动更多的children进程时，却达到了进程数的限制，达到一次记录一次，如果不为0，需要增加php-fpm pool进程的最大数</strong></td></tr> <tr><td><strong>slow requests</strong></td> <td><strong>当启用了php-fpm slow-log功能时，如果出现php-fpm慢请求这个计数器会增加，一般不当的Mysql查询会触发这个值</strong></td></tr></tbody></table> <h3 id="_4、编写监控脚本和监控文件"><a href="#_4、编写监控脚本和监控文件" class="header-anchor">#</a> 4、编写监控脚本和监控文件</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim /server/scripts/php_fpm-status.sh

#!/bin/sh
#php-fpm status
case $1 in
ping) #检测php-fpm进程是否存在
/sbin/pidof php-fpm | wc -l
;;
start_since) #提取status中的start since数值
/usr/bin/curl 127.0.0.1/php_status 2&gt;/dev/null | awk 'NR==4{print $3}'
;;
conn) #提取status中的accepted conn数值
/usr/bin/curl 127.0.0.1/php_status 2&gt;/dev/null | awk 'NR==5{print $3}'
;;
listen_queue) #提取status中的listen queue数值
/usr/bin/curl 127.0.0.1/php_status 2&gt;/dev/null | awk 'NR==6{print $3}'
;;
max_listen_queue) #提取status中的max listen queue数值
/usr/bin/curl 127.0.0.1/php_status 2&gt;/dev/null | awk 'NR==7{print $4}'
;;
listen_queue_len) #提取status中的listen queue len
/usr/bin/curl 127.0.0.1/php_status 2&gt;/dev/null | awk 'NR==8{print $4}'
;;
idle_processes) #提取status中的idle processes数值
/usr/bin/curl 127.0.0.1/php_status 2&gt;/dev/null | awk 'NR==9{print $3}'
;;
active_processes) #提取status中的active processes数值
/usr/bin/curl 127.0.0.1/php_status 2&gt;/dev/null | awk 'NR==10{print $3}'
;;
total_processes) #提取status中的total processess数值
/usr/bin/curl 127.0.0.1/php_status 2&gt;/dev/null | awk 'NR==11{print $3}'
;;
max_active_processes) #提取status中的max active processes数值
/usr/bin/curl 127.0.0.1/php_status 2&gt;/dev/null | awk 'NR==12{print $4}'
;;
max_children_reached) #提取status中的max children reached数值
/usr/bin/curl 127.0.0.1/php_status 2&gt;/dev/null | awk 'NR==13{print $4}'
;;
slow_requests) #提取status中的slow requests数值
/usr/bin/curl 127.0.0.1/php_status 2&gt;/dev/null | awk 'NR==14{print $3}'
;;
*)
echo &quot;Usage: $0 {conn|listen_queue|max_listen_queue|listen_queue_len|idle_processes|active_processess|total_processes|max_active_processes|max_children_reached|slow_requests}&quot;
exit 1
;;
esac

vim /etc/zabbix/zabbix_agentd.d/test.conf

UserParameter=php_status[*],/bin/sh /server/scripts/php_fpm-status.sh $1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h3 id="_5、重启服务"><a href="#_5、重启服务" class="header-anchor">#</a> 5、重启服务</h3> <p><img src="/assets/1469203-20181021115709644-600951436.png" alt="img"></p> <p>在服务端测试</p> <p><img src="/assets/1469203-20181021120116630-1188327031.png" alt="img"></p> <h3 id="_6、在web端进行配置"><a href="#_6、在web端进行配置" class="header-anchor">#</a> 6、在web端进行配置</h3> <p><img src="/assets/1469203-20181021120934677-1355519728.png" alt="img"></p> <p><img src="/assets/1469203-20181021121048666-960995697.png" alt="img"></p> <p><img src="/assets/1469203-20181021121417385-1782676060.png" alt="img"></p> <p><img src="/assets/1469203-20181021140310477-1768203390.png" alt="img"></p> <p>这时候我们再来看最新监控数据，就可以看到我们监控的内容了<img src="/assets/1469203-20181021143537786-1115883382.png" alt="img"></p> <p>配置到这，我们PHP状态监控基本完成，根据需求配置相应的触发器，即可。</p> <p>你要的模板</p> <p>链接: https://pan.baidu.com/s/1z0IU82uGId-LH1EryyuwCw 提取码: q6n9</p> <h2 id="十、zabbix-监控-mysql"><a href="#十、zabbix-监控-mysql" class="header-anchor">#</a> 十、zabbix 监控 mysql</h2> <h3 id="_1、监控规划"><a href="#_1、监控规划" class="header-anchor">#</a> 1、监控规划</h3> <p>在创建监控项之前要尽量考虑清楚要监控什么，怎么监控，监控数据如何存储，监控数据如何展现，如何处理报警等。要进行监控的系统规划需要对Zabbix很了解，这里只是提出监控的需求。</p> <p>需求一：监控MySQL的状态，当状态发生异常，发出报警；</p> <p>需求二：监控MySQL的操作，并用图表展现；</p> <h3 id="_2、自定义脚本监控扩展agent"><a href="#_2、自定义脚本监控扩展agent" class="header-anchor">#</a> 2、自定义脚本监控扩展Agent</h3> <p>Zabbix Server与Agent之间监控数据的采集主要是通过Zabbix Server主动向Agent询问某个Key的值，Agent会根据Key去调用相应的函数去获取这个值并返回给Server端。Zabbix 2.4.7的Agent本并没有内置MySQL的监控功能（但是Server端提供了相应的Template配置），所以我们需要使用Zabbix的User Parameters功能，为MySQL添加监控脚本。</p> <h3 id="_3、授权mysql登录用户-agent端"><a href="#_3、授权mysql登录用户-agent端" class="header-anchor">#</a> 3、授权mysql登录用户（agent端）</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; grant usage on *.* to zabbix@127.0.0.1 identified by '123456';

mysql&gt; flush privileges;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4、agent端配置"><a href="#_4、agent端配置" class="header-anchor">#</a> 4、agent端配置</h3> <h4 id="存活检测"><a href="#存活检测" class="header-anchor">#</a> 存活检测</h4> <p>利用UserParameter参数自定义Agent Key。
对于需求一 ，我们采用mysqladmin这个工具来实现，命令如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># mysqladmin -h 127.0.0.1 -u zabbix -p123456 ping 
mysqld is alive


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果MySQL状态正常，会显示mysqld is alive，否则会提示连接不上。对于服务器端，mysqld is alive这样的句子不好理解，服务器端最好只接收1和0，1表示服务可用，0表示服务不可用。那么再改进一下这个命令，如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># mysqladmin -h 127.0.0.1 -u zabbix -p123456 ping |grep -c alive
1

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>用户名和密码放在命令中对于以后的维护不好，所以我们在/var/lib/zabbix/下创建一个包含MySQL用户名和密码的配置文件“.my.cnf”，如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>user=zabbix
host=127.0.0.1
password='123456'

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>有了这个文件后的命令变更为</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>HOME=/var/lib/zabbix/ mysqladmin ping |grep -c alive
1
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>做完这一步后需要做的就是，将这个监控命令添加到Zabbix Agent中，并与一个Key对应，这样Zabbox Server就能通过这个Key获取MySQL的状态了。我们使用mysql.ping作为MySQL状态的Key。</p> <p>首先在去除/etc/zabbix/zabbix_agentd.conf中</p> <p>“Include=/etc/zabbix_agentd.d/” 这一行的注释符。</p> <p>其次，在/etc/zabbix/zabbix_agentd.d/目录下创建userparameter_mysql.conf文件。在文件中添加如下命令：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UserParameter=mysql.ping,HOME=/var/lib/zabbix mysqladmin ping | grep -c alive
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用下面的命令测试是否正常工作。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># /usr/sbin/zabbix_agentd -t mysql.ping
mysql.ping                                    [t|1]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="其他性能指标"><a href="#其他性能指标" class="header-anchor">#</a> 其他性能指标</h4> <h5 id="_1-添加userparameter-mysql"><a href="#_1-添加userparameter-mysql" class="header-anchor">#</a> 1.添加userparameter_mysql</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim /etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf

####监控mysql性能的脚本

UserParameter=mysql.status[*],/etc/zabbix/zabbix_agentd.d/check_mysql.sh $1

#####mysql版本

UserParameter=mysql.version,mysql -V
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="_2-check-mysql-sh"><a href="#_2-check-mysql-sh" class="header-anchor">#</a> 2.check_mysql.sh</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>#!/bin/bash
# -------------------------------------------------------------------------------
# FileName: check_mysql.sh
# Revision: 1.0
# -------------------------------------------------------------------------------
# Copyright:
# License: GPL

# 用户名
MYSQL_USER='zabbix'

# 密码
MYSQL_PWD='zabbix@123'

# 主机地址/IP
MYSQL_HOST='ip'

# 端口
MYSQL_PORT='3306'

# 数据连接
MYSQL_CONN=&quot;/usr/bin/mysqladmin -u${MYSQL_USER} -p${MYSQL_PWD} -h${MYSQL_HOST} -P${MYSQL_PORT}&quot;

# 参数是否正确
if [ $# -ne &quot;1&quot; ];then
echo &quot;arg error!&quot;
fi

# 获取数据
case $1 in
Uptime)
result=`${MYSQL_CONN} status 2&gt;/dev/null |cut -f2 -d&quot;:&quot;|cut -f1 -d&quot;T&quot;`
echo $result
;;
Com_update)
result=`${MYSQL_CONN} extended-status   2&gt;/dev/null  |grep -w &quot;Com_update&quot;|cut -d&quot;|&quot; -f3`
echo $result
;;
Slow_queries)
result=`${MYSQL_CONN} status  2&gt;/dev/null  |cut -f5 -d&quot;:&quot;|cut -f1 -d&quot;O&quot;`
echo $result
;;
Com_select)
result=`${MYSQL_CONN} extended-status  2&gt;/dev/null  |grep -w &quot;Com_select&quot;|cut -d&quot;|&quot; -f3`
echo $result
;;
Com_rollback)
result=`${MYSQL_CONN} extended-status  2&gt;/dev/null   |grep -w &quot;Com_rollback&quot;|cut -d&quot;|&quot; -f3`
echo $result
;;
Questions)
result=`${MYSQL_CONN} status   2&gt;/dev/null |cut -f4 -d&quot;:&quot;|cut -f1 -d&quot;S&quot;`
echo $result
;;
Com_insert)
result=`${MYSQL_CONN} extended-status   2&gt;/dev/null  |grep -w &quot;Com_insert&quot;|cut -d&quot;|&quot; -f3`
echo $result
;;
Com_delete)
result=`${MYSQL_CONN} extended-status   2&gt;/dev/null  |grep -w &quot;Com_delete&quot;|cut -d&quot;|&quot; -f3`
echo $result
;;
Com_commit)
result=`${MYSQL_CONN} extended-status   2&gt;/dev/null  |grep -w &quot;Com_commit&quot;|cut -d&quot;|&quot; -f3`
echo $result
;;
Bytes_sent)
result=`${MYSQL_CONN} extended-status  2&gt;/dev/null  |grep -w &quot;Bytes_sent&quot; |cut -d&quot;|&quot; -f3`
echo $result
;;
Bytes_received)
result=`${MYSQL_CONN} extended-status  2&gt;/dev/null  |grep -w &quot;Bytes_received&quot; |cut -d&quot;|&quot; -f3`
echo $result
;;
Com_begin)
result=`${MYSQL_CONN} extended-status  2&gt;/dev/null  |grep -w &quot;Com_begin&quot;|cut -d&quot;|&quot; -f3`
echo $result
;;

*)
echo &quot;Usage:$0(Uptime|Com_update|Slow_queries|Com_select|Com_rollback|Questions|Com_insert|Com_delete|Com_commit|Bytes_sent|Bytes_received|Com_begin)&quot;
;;
esac

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br></div></div><h5 id="_3-授权"><a href="#_3-授权" class="header-anchor">#</a> 3.授权：</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>chmod +x  /etc/zabbix/zabbix_agentd.d/check_mysql.sh

Chown zabbix.zabbix  /etc/zabbix/zabbix_agentd.d/check_mysql.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_4-zabbix-agent上测试"><a href="#_4-zabbix-agent上测试" class="header-anchor">#</a> 4.   zabbix_agent上测试：</h5> <p>zabbix_agentd -t mysql.ping</p> <p><img src="/assets/image-20200408141921337.png" alt="image-20200408141921337"></p> <h5 id="_5-zabbix-server测试"><a href="#_5-zabbix-server测试" class="header-anchor">#</a> 5.Zabbix_server测试</h5> <p>zabbix_get -s ip -P 端口  -k mysql.ping</p> <p><img src="/assets/clip_image002.jpg" alt="img"></p> <h3 id="_5、在web端进行配置"><a href="#_5、在web端进行配置" class="header-anchor">#</a> 5、在web端进行配置</h3> <p>**创建主机 **</p> <p><img src="/assets/clip_image002.gif" alt="IMG_256"></p> <p><img src="/assets/clip_image004.gif" alt="IMG_257"></p> <p><strong>关联模板</strong></p> <p><img src="/assets/clip_image006.gif" alt="IMG_258"></p> <p><strong>创建监控项</strong></p> <p><img src="/assets/clip_image008.gif" alt="IMG_259"></p> <p><strong>创建图形</strong></p> <p><img src="/assets/clip_image010.gif" alt="IMG_260"></p> <p><strong>查看监控图像</strong></p> <p><img src="/assets/clip_image012.gif" alt="IMG_261"></p> <p>其他监控项以此配置完成</p> <h3 id="_6、zabbix自带mysql监控项"><a href="#_6、zabbix自带mysql监控项" class="header-anchor">#</a> 6、zabbix自带mysql监控项</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>version:数据库版本
key_buffer_size:myisam的索引buffer大小
sort_buffer_size:会话的排序空间（每个线程会申请一个）
join_buffer_size:这是为链接操作分配的最小缓存大小，这些连接使用普通索引扫描、范围扫描、或者连接不适用索引
max_connections:最大允许同时连接的数量
max_connect_errors：允许一个主机最多的错误链接次数，如果超过了就会拒绝之后链接（默认100）。可以使用flush hosts命令去解除拒绝
open_files_limits:操作系统允许mysql打开的文件数量，可以通过opened_tables状态确定是否需要增大table_open_cache,如果opened_tables比较大且一直还在增大说明需要增大table_open_cache
max-heap_tables_size:建立的内存表的最大大小（默认16M）这个参数和tmp_table_size一起限制内部临时表的最大值(取这两个参数的小的一个），如果超过限制，则表会变为innodb或myisam引擎，（5.7.5之前是默认是myisam，5.7.6开始是innodb，可以通过internal_tmp_disk_storage_engine参数调整）。
max_allowed_packet:一个包的最大大小
##########GET INNODB INFO
#INNODB variables
innodb_version:
innodb_buffer_pool_instances：将innodb缓冲池分为指定的多个（默认为1）
innodb_buffer_pool_size:innodb缓冲池大小、5.7.5引入了innodb_buffer_pool_chunk_size,
innodb_doublewrite：是否开启doublewrite（默认开启）
innodb_read_io_threads:IO读线程的数量
innodb_write_io_threads:IO写线程的数量
########innodb status
innodb_buffer_pool_pages_total:innodb缓冲池页的数量、大小等于innodb_buffer_pool_size/(16*1024)
innodb_buffer_pool_pages_data:innodb缓冲池中包含数据的页的数量
########## GET MYSQL HITRATE
1、查询缓存命中率
如果Qcache_hits+Com_select&lt;&gt;0则为 Qcache_hits/（Qcache_hits+Com_select），否则为0

2、线程缓存命中率
如果Connections&lt;&gt;0,则为1-Threads_created/Connections，否则为0

3、myisam键缓存命中率
如果Key_read_requests&lt;&gt;0,则为1-Key_reads/Key_read_requests，否则为0

4、myisam键缓存写命中率
如果Key_write_requests&lt;&gt;0,则为1-Key_writes/Key_write_requests，否则为0

5、键块使用率
如果Key_blocks_used+Key_blocks_unused&lt;&gt;0，则Key_blocks_used/（Key_blocks_used+Key_blocks_unused），否则为0

6、创建磁盘存储的临时表比率
如果Created_tmp_disk_tables+Created_tmp_tables&lt;&gt;0,则Created_tmp_disk_tables/（Created_tmp_disk_tables+Created_tmp_tables），否则为0

7、连接使用率
如果max_connections&lt;&gt;0，则threads_connected/max_connections，否则为0

8、打开文件比率
如果open_files_limit&lt;&gt;0，则open_files/open_files_limit，否则为0

9、表缓存使用率
如果table_open_cache&lt;&gt;0，则open_tables/table_open_cache，否则为0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="十一、-zabbix其他常用自定义监控项"><a href="#十一、-zabbix其他常用自定义监控项" class="header-anchor">#</a> 十一、 zabbix其他常用自定义监控项</h2> <h3 id="redis相关的自定义项"><a href="#redis相关的自定义项" class="header-anchor">#</a> redis相关的自定义项</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim /usr/local/zabbix/etc/zabbix_agentd.conf.d/redis.conf
UserParameter=Redis.Status,/usr/local/redis/bin/redis-cli -h 127.0.0.1 -p 6379 ping |grep -c PONG
UserParameter=Redis_conn[*],/usr/local/redis/bin/redis-cli -h $1 -p $2 info | grep -w &quot;connected_clients&quot; | awk -F':' '{print $2}'
UserParameter=Redis_rss_mem[*],/usr/local/redis/bin/redis-cli -h $1 -p $2 info | grep -w &quot;used_memory_rss&quot; | awk -F':' '{print $2}'
UserParameter=Redis_lua_mem[*],/usr/local/redis/bin/redis-cli -h $1 -p $2 info | grep -w &quot;used_memory_lua&quot; | awk -F':' '{print $2}'
UserParameter=Redis_cpu_sys[*],/usr/local/redis/bin/redis-cli -h $1 -p $2 info | grep -w &quot;used_cpu_sys&quot; | awk -F':' '{print $2}'
UserParameter=Redis_cpu_user[*],/usr/local/redis/bin/redis-cli -h $1 -p $2 info | grep -w &quot;used_cpu_user&quot; | awk -F':' '{print $2}'
UserParameter=Redis_cpu_sys_cline[*],/usr/local/redis/bin/redis-cli -h $1 -p $2 info | grep -w &quot;used_cpu_sys_children&quot; | awk -F':' '{print $2}'
UserParameter=Redis_cpu_user_cline[*],/usr/local/redis/bin/redis-cli -h $1 -p $2 info | grep -w &quot;used_cpu_user_children&quot; | awk -F':' '{print $2}'
UserParameter=Redis_keys_num[*],/usr/local/redis/bin/redis-cli -h $1 -p $2 info | grep -w &quot;$$1&quot; | grep -w &quot;keys&quot; | grep db$3 | awk -F'=' '{print $2}' | awk -F',' '{print $1}'
UserParameter=Redis_loading[*],/usr/local/redis/bin/redis-cli -h $1 -p $2 info | grep loading | awk -F':' '{print $$2}'

Redis.Status --检测Redis运行状态， 返回整数
Redis_conn  --检测Redis成功连接数，返回整数
Redis_rss_mem  --检测Redis系统分配内存，返回整数
Redis_lua_mem  --检测Redis引擎消耗内存，返回整数
Redis_cpu_sys --检测Redis主程序核心CPU消耗率，返回整数
Redis_cpu_user --检测Redis主程序用户CPU消耗率，返回整数
Redis_cpu_sys_cline --检测Redis后台核心CPU消耗率，返回整数
Redis_cpu_user_cline --检测Redis后台用户CPU消耗率，返回整数
Redis_keys_num --检测库键值数，返回整数
Redis_loding --检测Redis持久化文件状态，返回整数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="nginx相关的自定义项"><a href="#nginx相关的自定义项" class="header-anchor">#</a> nginx相关的自定义项</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim /etc/nginx/conf.d/default.conf
    location /nginx-status
    {
        stub_status on;
        access_log off;
        allow 127.0.0.1;
        deny all;
    }

    
vim /usr/local/zabbix/etc/zabbix_agentd.conf.d/nginx.conf
UserParameter=Nginx.active,/usr/bin/curl -s &quot;http://127.0.0.1:80/nginx-status&quot; | awk '/Active/ {print $NF}'
UserParameter=Nginx.read,/usr/bin/curl -s &quot;http://127.0.0.1:80/nginx-status&quot; | grep 'Reading' | cut -d&quot; &quot; -f2
UserParameter=Nginx.wrie,/usr/bin/curl -s &quot;http://127.0.0.1:80/nginx-status&quot; | grep 'Writing' | cut -d&quot; &quot; -f4
UserParameter=Nginx.wait,/usr/bin/curl -s &quot;http://127.0.0.1:80/nginx-status&quot; | grep 'Waiting' | cut -d&quot; &quot; -f6
UserParameter=Nginx.accepted,/usr/bin/curl -s &quot;http://127.0.0.1:80/nginx-status&quot; | awk '/^[ \t]+[0-9]+[ \t]+[0-9]+[ \t]+[0-9]+/ {print $1}'
UserParameter=Nginx.handled,/usr/bin/curl -s &quot;http://127.0.0.1:80/nginx-status&quot; | awk '/^[ \t]+[0-9]+[ \t]+[0-9]+[ \t]+[0-9]+/ {print $2}'
UserParameter=Nginx.requests,/usr/bin/curl -s &quot;http://127.0.0.1:80/nginx-status&quot; | awk '/^[ \t]+[0-9]+[ \t]+[0-9]+[ \t]+[0-9]+/ {print $3}'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="tcp相关的自定义项"><a href="#tcp相关的自定义项" class="header-anchor">#</a> TCP相关的自定义项</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim /usr/local/zabbix/share/zabbix/alertscripts/tcp_connection.sh
#!/bin/bash
function ESTAB { 
/usr/sbin/ss -ant |awk '{++s[$1]} END {for(k in s) print k,s[k]}' | grep 'ESTAB' | awk '{print $2}'
}
function TIMEWAIT {
/usr/sbin/ss -ant | awk '{++s[$1]} END {for(k in s) print k,s[k]}' | grep 'TIME-WAIT' | awk '{print $2}'
}
function LISTEN {
/usr/sbin/ss -ant | awk '{++s[$1]} END {for(k in s) print k,s[k]}' | grep 'LISTEN' | awk '{print $2}'
}
$1

vim /usr/local/zabbix/etc/zabbix_agentd.conf.d/cattcp.conf
UserParameter=tcp[*],/usr/local/zabbix/share/zabbix/alertscripts/tcp_connection.sh $1

tcp[TIMEWAIT] --检测TCP的驻留数，返回整数
tcp[ESTAB]  --检测tcp的连接数、返回整数
tcp[LISTEN] --检测TCP的监听数，返回整数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="系统监控常用自带监控项"><a href="#系统监控常用自带监控项" class="header-anchor">#</a> 系统监控常用自带监控项</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>agent.ping 检测客户端可达性、返回nothing表示不可达。1表示可达
system.cpu.load --检测cpu负载。返回浮点数
system.cpu.util -- 检测cpu使用率。返回浮点数
vfs.dev.read -- 检测硬盘读取数据，返回是sps.ops.bps浮点类型，需要定义1024倍
vfs.dev.write -- 检测硬盘写入数据。返回是sps.ops.bps浮点类型，需要定义1024倍
net.if.out[br0] --检测网卡流速、流出方向，时间间隔为60S
net-if-in[br0] --检测网卡流速，流入方向（单位：字节） 时间间隔60S
proc.num[]  目前系统中的进程总数，时间间隔60s
proc.num[,,run] 目前正在运行的进程总数，时间间隔60S
###处理器信息
通过zabbix_get 获取负载值
合理的控制用户态、系统态、IO等待时间剋保证进程高效率的运行
系统态运行时间较高说明进程进行系统调用的次数比较多，一般的程序如果系统态运行时间占用过高就需要优化程序，减少系统调用
io等待时间过高则表明硬盘的io性能差，如果是读写文件比较频繁、读写效率要求比较高，可以考虑更换硬盘，或者使用多磁盘做raid的方案
system.cpu.swtiches --cpu的进程上下文切换，单位sps，表示每秒采样次数，api中参数history需指定为3
system.cpu.intr  --cpu中断数量、api中参数history需指定为3
system.cpu.load[percpu,avg1]  --cpu每分钟的负载值，按照核数做平均值(Processor load (1 min average per core))，api中参数history需指定为0
system.cpu.load[percpu,avg5]  --cpu每5分钟的负载值，按照核数做平均值(Processor load (5 min average per core))，api中参数history需指定为0
system.cpu.load[percpu,avg15]  --cpu每5分钟的负载值，按照核数做平均值(Processor load (15 min average per core))，api中参数history需指定为0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="系统监控常用自定义监控项"><a href="#系统监控常用自定义监控项" class="header-anchor">#</a> 系统监控常用自定义监控项</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>####内存相关
vim /usr/local/zabbix/etc/zabbix_agentd.conf.d/catcarm.conf
UserParameter=ram.info[*],/bin/cat  /proc/meminfo  |awk '/^$1:{print $2}'
ram.info[Cached] --检测内存的缓存使用量、返回整数，需要定义1024倍
ram.info[MemFree] --检测内存的空余量，返回整数，需要定义1024倍
ram.info[Buffers] --检测内存的使用量，返回整数，需要定义1024倍

####TCP相关的自定义项
vim /usr/local/zabbix/share/zabbix/alertscripts/tcp_connection.sh
#!/bin/bash
function ESTAB { 
/usr/sbin/ss -ant |awk '{++s[$1]} END {for(k in s) print k,s[k]}' | grep 'ESTAB' | awk '{print $2}'
}
function TIMEWAIT {
/usr/sbin/ss -ant | awk '{++s[$1]} END {for(k in s) print k,s[k]}' | grep 'TIME-WAIT' | awk '{print $2}'
}
function LISTEN {
/usr/sbin/ss -ant | awk '{++s[$1]} END {for(k in s) print k,s[k]}' | grep 'LISTEN' | awk '{print $2}'
}
$1

vim /usr/local/zabbix/etc/zabbix_agentd.conf.d/cattcp.conf
UserParameter=tcp[*],/usr/local/zabbix/share/zabbix/alertscripts/tcp_connection.sh $1

tcp[TIMEWAIT] --检测TCP的驻留数，返回整数
tcp[ESTAB]  --检测tcp的连接数、返回整数
tcp[LISTEN] --检测TCP的监听数，返回整数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2024/4/13</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/部署/zabbix/监控中心Zabbix入门/监控中心Zabbix入门.html" class="prev">
          监控中心Zabbix入门
        </a></span> <span class="next"><a href="/部署/nginx/Nginx.html">
          Nginx
        </a>
        →
      </span></p></div> </main></div> <aside class="page-sidebar"> <div class="page-side-toolbar"><div class="option-box-toc-fixed"><div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:650px"><div style="font-weight:bold;text-align:center;">监控中心Zabbix进阶</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#一、zabbix-基于snmp监控" class="toc-sidebar-link">一、Zabbix 基于SNMP监控</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、介绍" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、linux-启用-snmp" class="toc-sidebar-link">2、Linux 启用 snmp</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、配置文件的介绍" class="toc-sidebar-link">3、配置文件的介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、配置snmp监控" class="toc-sidebar-link">4、配置SNMP监控</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、设置入站出站packets-的snmp监控" class="toc-sidebar-link">5、设置入站出站packets 的SNMP监控</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#二、zabbix-jmx接口" class="toc-sidebar-link">二、Zabbix JMX接口</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、介绍-2" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、配置jvm接口监控" class="toc-sidebar-link">2、配置JVM接口监控</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#三、zabbix-分布式监控" class="toc-sidebar-link">三、Zabbix 分布式监控</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、介绍-3" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、实现分布式-zabbix-proxy-监控" class="toc-sidebar-link">2、实现分布式 zabbix proxy 监控</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#四、" class="toc-sidebar-link">四、</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、官方的-share-分享网站" class="toc-sidebar-link">1、官方的 share 分享网站</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、在node1-上使用此模板" class="toc-sidebar-link">2、在node1 上使用此模板</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#五、zabbix-server-监控自己-数据库-nginx" class="toc-sidebar-link">五、Zabbix-server 监控自己，数据库，nginx</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、下载安装配置agent" class="toc-sidebar-link">1、下载安装配置agent</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、自动生成-zabbix-server-的主机" class="toc-sidebar-link">2、自动生成 Zabbix server 的主机</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、在主机中添加模板" class="toc-sidebar-link">3、在主机中添加模板</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、启用zabbix-server" class="toc-sidebar-link">4、启用Zabbix server</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、监控到数据" class="toc-sidebar-link">5、监控到数据</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#六、" class="toc-sidebar-link">六、</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、申请企业微信" class="toc-sidebar-link">1、申请企业微信</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、配置微信企业号" class="toc-sidebar-link">2、配置微信企业号</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、配置zabbix服务器" class="toc-sidebar-link">3、配置zabbix服务器</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、zabbix-web页面配置告警信息" class="toc-sidebar-link">4、zabbix web页面配置告警信息</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、手动触发告警-测试微信接收信息" class="toc-sidebar-link">5、手动触发告警，测试微信接收信息</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_6、微信客户端检测" class="toc-sidebar-link">6、微信客户端检测</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#七、zabbix-调优" class="toc-sidebar-link">七、Zabbix 调优</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、调优" class="toc-sidebar-link">1、调优</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、zabbix服务器的进程" class="toc-sidebar-link">2、zabbix服务器的进程</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、其它解决方案" class="toc-sidebar-link">3、其它解决方案</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、grafana-collectd-influxdb" class="toc-sidebar-link">4、grafana+collectd+influxdb</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#八、zabbix监控实战-tomcat监控" class="toc-sidebar-link">八、Zabbix监控实战-Tomcat监控</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、方法一-开发java监控页面" class="toc-sidebar-link">1、方法一：开发java监控页面</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、方法二-使用jps命令进行监控" class="toc-sidebar-link">2、方法二：使用jps命令进行监控</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、tomcat-远程监控功能" class="toc-sidebar-link">3、Tomcat 远程监控功能</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、zabbix-监控-tomcat-程序" class="toc-sidebar-link">4、zabbix 监控 tomcat 程序</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、排除-tomcat-故障步骤" class="toc-sidebar-link">5、排除 tomcat 故障步骤</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#九、zabbix-监控-php-fpm" class="toc-sidebar-link">九、zabbix 监控 php-fpm</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、修改文件php-fpm" class="toc-sidebar-link">1、修改文件php-fpm</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、修改nginx配置文件" class="toc-sidebar-link">2、修改nginx配置文件</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、curl-127-0-0-1-php-status-我们可以看到php-fpm-的状态信息" class="toc-sidebar-link">3、curl 127.0.0.1/php_status 我们可以看到php-fpm 的状态信息</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、编写监控脚本和监控文件" class="toc-sidebar-link">4、编写监控脚本和监控文件</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、重启服务" class="toc-sidebar-link">5、重启服务</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_6、在web端进行配置" class="toc-sidebar-link">6、在web端进行配置</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#十、zabbix-监控-mysql" class="toc-sidebar-link">十、zabbix 监控 mysql</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、监控规划" class="toc-sidebar-link">1、监控规划</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、自定义脚本监控扩展agent" class="toc-sidebar-link">2、自定义脚本监控扩展Agent</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、授权mysql登录用户-agent端" class="toc-sidebar-link">3、授权mysql登录用户（agent端）</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、agent端配置" class="toc-sidebar-link">4、agent端配置</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、在web端进行配置" class="toc-sidebar-link">5、在web端进行配置</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_6、zabbix自带mysql监控项" class="toc-sidebar-link">6、zabbix自带mysql监控项</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#十一、-zabbix其他常用自定义监控项" class="toc-sidebar-link">十一、 zabbix其他常用自定义监控项</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#redis相关的自定义项" class="toc-sidebar-link">redis相关的自定义项</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#nginx相关的自定义项" class="toc-sidebar-link">nginx相关的自定义项</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#tcp相关的自定义项" class="toc-sidebar-link">TCP相关的自定义项</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#系统监控常用自带监控项" class="toc-sidebar-link">系统监控常用自带监控项</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#系统监控常用自定义监控项" class="toc-sidebar-link">系统监控常用自定义监控项</a></li></ul></li></ul></div></div></div></div></div> <div class="option-box-toc-over"><img src="/images/system/toc.png" class="nozoom"> <span class="show-txt">目录</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:550px"><div style="font-weight:bold;text-align:center;">监控中心Zabbix进阶</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#一、zabbix-基于snmp监控" class="toc-sidebar-link">一、Zabbix 基于SNMP监控</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、介绍" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、linux-启用-snmp" class="toc-sidebar-link">2、Linux 启用 snmp</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、配置文件的介绍" class="toc-sidebar-link">3、配置文件的介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、配置snmp监控" class="toc-sidebar-link">4、配置SNMP监控</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、设置入站出站packets-的snmp监控" class="toc-sidebar-link">5、设置入站出站packets 的SNMP监控</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#二、zabbix-jmx接口" class="toc-sidebar-link">二、Zabbix JMX接口</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、介绍-2" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、配置jvm接口监控" class="toc-sidebar-link">2、配置JVM接口监控</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#三、zabbix-分布式监控" class="toc-sidebar-link">三、Zabbix 分布式监控</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、介绍-3" class="toc-sidebar-link">1、介绍</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、实现分布式-zabbix-proxy-监控" class="toc-sidebar-link">2、实现分布式 zabbix proxy 监控</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#四、" class="toc-sidebar-link">四、</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、官方的-share-分享网站" class="toc-sidebar-link">1、官方的 share 分享网站</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、在node1-上使用此模板" class="toc-sidebar-link">2、在node1 上使用此模板</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#五、zabbix-server-监控自己-数据库-nginx" class="toc-sidebar-link">五、Zabbix-server 监控自己，数据库，nginx</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、下载安装配置agent" class="toc-sidebar-link">1、下载安装配置agent</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、自动生成-zabbix-server-的主机" class="toc-sidebar-link">2、自动生成 Zabbix server 的主机</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、在主机中添加模板" class="toc-sidebar-link">3、在主机中添加模板</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、启用zabbix-server" class="toc-sidebar-link">4、启用Zabbix server</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、监控到数据" class="toc-sidebar-link">5、监控到数据</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#六、" class="toc-sidebar-link">六、</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、申请企业微信" class="toc-sidebar-link">1、申请企业微信</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、配置微信企业号" class="toc-sidebar-link">2、配置微信企业号</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、配置zabbix服务器" class="toc-sidebar-link">3、配置zabbix服务器</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、zabbix-web页面配置告警信息" class="toc-sidebar-link">4、zabbix web页面配置告警信息</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、手动触发告警-测试微信接收信息" class="toc-sidebar-link">5、手动触发告警，测试微信接收信息</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_6、微信客户端检测" class="toc-sidebar-link">6、微信客户端检测</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#七、zabbix-调优" class="toc-sidebar-link">七、Zabbix 调优</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、调优" class="toc-sidebar-link">1、调优</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、zabbix服务器的进程" class="toc-sidebar-link">2、zabbix服务器的进程</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、其它解决方案" class="toc-sidebar-link">3、其它解决方案</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、grafana-collectd-influxdb" class="toc-sidebar-link">4、grafana+collectd+influxdb</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#八、zabbix监控实战-tomcat监控" class="toc-sidebar-link">八、Zabbix监控实战-Tomcat监控</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、方法一-开发java监控页面" class="toc-sidebar-link">1、方法一：开发java监控页面</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、方法二-使用jps命令进行监控" class="toc-sidebar-link">2、方法二：使用jps命令进行监控</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、tomcat-远程监控功能" class="toc-sidebar-link">3、Tomcat 远程监控功能</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、zabbix-监控-tomcat-程序" class="toc-sidebar-link">4、zabbix 监控 tomcat 程序</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、排除-tomcat-故障步骤" class="toc-sidebar-link">5、排除 tomcat 故障步骤</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#九、zabbix-监控-php-fpm" class="toc-sidebar-link">九、zabbix 监控 php-fpm</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、修改文件php-fpm" class="toc-sidebar-link">1、修改文件php-fpm</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、修改nginx配置文件" class="toc-sidebar-link">2、修改nginx配置文件</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、curl-127-0-0-1-php-status-我们可以看到php-fpm-的状态信息" class="toc-sidebar-link">3、curl 127.0.0.1/php_status 我们可以看到php-fpm 的状态信息</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、编写监控脚本和监控文件" class="toc-sidebar-link">4、编写监控脚本和监控文件</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、重启服务" class="toc-sidebar-link">5、重启服务</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_6、在web端进行配置" class="toc-sidebar-link">6、在web端进行配置</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#十、zabbix-监控-mysql" class="toc-sidebar-link">十、zabbix 监控 mysql</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_1、监控规划" class="toc-sidebar-link">1、监控规划</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_2、自定义脚本监控扩展agent" class="toc-sidebar-link">2、自定义脚本监控扩展Agent</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_3、授权mysql登录用户-agent端" class="toc-sidebar-link">3、授权mysql登录用户（agent端）</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_4、agent端配置" class="toc-sidebar-link">4、agent端配置</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_5、在web端进行配置" class="toc-sidebar-link">5、在web端进行配置</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#_6、zabbix自带mysql监控项" class="toc-sidebar-link">6、zabbix自带mysql监控项</a></li></ul></li><li><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#十一、-zabbix其他常用自定义监控项" class="toc-sidebar-link">十一、 zabbix其他常用自定义监控项</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#redis相关的自定义项" class="toc-sidebar-link">redis相关的自定义项</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#nginx相关的自定义项" class="toc-sidebar-link">nginx相关的自定义项</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#tcp相关的自定义项" class="toc-sidebar-link">TCP相关的自定义项</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#系统监控常用自带监控项" class="toc-sidebar-link">系统监控常用自带监控项</a></li><li class="toc-sidebar-sub-header"><a href="/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html#系统监控常用自定义监控项" class="toc-sidebar-link">系统监控常用自定义监控项</a></li></ul></li></ul></div></div></div></div></div> <div class="option-box"><img src="/images/system/wechat.png" class="nozoom"> <span class="show-txt">手机看</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.9rem">微信扫一扫</span> <img height="180px" src="https://api.qrserver.com/v1/create-qr-code/?data=https://tec.hjcwzx.top/%E9%83%A8%E7%BD%B2/zabbix/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6/%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83Zabbix%E8%BF%9B%E9%98%B6.html" style="margin:10px;">
                可以<b>手机看</b>或分享至<b>朋友圈</b></div></div></div></div> <div class="option-box"><img src="/images/system/toggle.png" width="30px" class="nozoom"> <span class="show-txt">左栏</span></div> <div class="option-box"><img src="/images/system/xingqiu.png" width="25px" class="nozoom"> <span class="show-txt">星球</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><img height="180px" src="/images/personal/xingqiu.png" style="margin:10px;"> <b>知识星球</b>：技术侦探
            </div></div></div></div> <div class="option-box"><img src="/images/system/wexin4.png" width="25px" class="nozoom"> <span class="show-txt">交流</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.8rem;font-weight:bold;">添加微信一起学习交流</span> <img src="/images/personal/weixin.png" height="180px" style="margin:10px;">
                PS：添加时请备注<b>技术侦探</b>，谢谢！
              </div></div></div></div> <div class="option-box"><img src="/images/system/heart-1.png" width="25px" class="nozoom"> <span class="show-txt">支持我</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.8rem;font-weight:bold;">鼓励/支持/赞赏我</span> <img height="180px" src="/images/personal/encourage-head.png" style="margin:5px;"> <br>1. 不靠它生存但仍希望得到你的鼓励；
                <br>2. 时刻警醒自己保持技术人的初心，沉淀，分享，成长；
              </div></div></div></div> <div title="监控中心Zabbix入门" class="option-box" style="padding-left:2px;text-align:center;"><a href="/部署/zabbix/监控中心Zabbix入门/监控中心Zabbix入门.html"><img src="/images/system/pre2.png" width="30px" class="nozoom"> <span class="show-txt">上一篇</span></a></div> <div title="Nginx" class="option-box" style="padding-left:2px;text-align:center;"><a href="/部署/nginx/Nginx.html"><img src="/images/system/next2.png" width="30px" class="nozoom"> <span class="show-txt">下一篇</span></a></div></div>  <div class="page-side-sitemap"><div class="option-box"><img src="/images/system/sitemap.png" class="nozoom img"> <span class="show-txt">站点图</span> <div class="sitemap-container"><h4>站点导航图
              <a href="/更新日志/更新日志.html" class="sitemap-top-link"> 更新日志</a></h4> <table class="sitemap-table"><tr><td nowrap="nowrap"><div class="sitemap-col-group">常用搜索</div></td> <td><div class="sitemap-col-item"><a href="http://www.baidu.com/" target="_blank" title="百度">
          百度
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.google.com/" target="_blank" title="Google">
          Google
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.bing.com/" target="_blank" title="Bing">
          Bing
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://github.com" target="_blank" title="Github">
          Github
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.programcreek.com/java-api-examples/index.php" target="_blank" title="搜代码">
          搜代码
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></td> <!----></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">技术社区</div></td> <td><div class="sitemap-col-item"><a href="http://www.csdn.net/" target="_blank" title="CDSN">
          CDSN
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.cnblogs.com/" target="_blank" title="博客园">
          博客园
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.oschina.net" target="_blank" title="OSChina">
          OSChina
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://segmentfault.com/" target="_blank" title="思否">
          思否
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://juejin.im" target="_blank" title="掘金">
          掘金
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.linuxidc.com/" target="_blank" title="Linux公社">
          Linux公社
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.ibm.com/developerworks/cn/" target="_blank" title="IBM 开发者">
          IBM 开发者
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://stackoverflow.com" target="_blank" title="StackOverflow">
          StackOverflow
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></td> <!----></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">Java相关</div></td> <!----> <td><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="sitemap-col-item">
          JavaSE基础
        </a><a href="/java/JavaSE高级/01_IO.html" class="sitemap-col-item">
          JavaSE高级
        </a><a href="/java/javaWeb/01_Web开发基础.html" class="sitemap-col-item">
          JavaWeb
        </a><a href="/java/JUC/1、JUC概述.html" class="sitemap-col-item">
          JUC
        </a><a href="/java/补充/JVM.html" class="sitemap-col-item">
          JVM
        </a><a href="/java/补充/枚举.html" class="sitemap-col-item">
          ENUM
        </a><a href="/java/补充/线程池.html" class="sitemap-col-item">
          线程池
        </a><a href="/java/补充/自定义注解.html" class="sitemap-col-item">
          自定义注解
        </a><a href="/java/响应式编程/前置知识.html" class="sitemap-col-item">
          响应式编程
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">Spring</div></td> <!----> <td><a href="/框架/Mybatis/01_MyBatis快速入门.html" class="sitemap-col-item">
          Mybatis
        </a><a href="/框架/Mybatis/03_MybatisPlus.html" class="sitemap-col-item">
          Mybatis Plus
        </a><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="sitemap-col-item">
          Spring
        </a><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="sitemap-col-item">
          Spring MVC
        </a><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="sitemap-col-item">
          Spring Boot
        </a><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="sitemap-col-item">
          Spring Cloud Alibaba
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">中间件&amp;插件</div></td> <!----> <td><a href="/中间件/maven/01_Maven基础.html" class="sitemap-col-item">
          Maven中央仓库
        </a><a href="/中间件/ElasticSearch/ElasticSearch.html" class="sitemap-col-item">
          ElasticSearch
        </a><a href="/中间件/redis/Redis笔记全.html" class="sitemap-col-item">
          Redis
        </a><a href="/中间件/redis/布隆过滤器.html" class="sitemap-col-item">
          布隆过滤器
        </a><a href="/中间件/rocketMq/RocketMQ.html" class="sitemap-col-item">
          RocketMQ.
        </a><a href="/中间件/git/笔记.html" class="sitemap-col-item">
          git
        </a><a href="/中间件/自定义Starter/自定义starter.html" class="sitemap-col-item">
          自定义starter
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">运维</div></td> <!----> <td><a href="/部署/nginx/Nginx.html" class="sitemap-col-item">
          Nginx
        </a><a href="/部署/docker/docker.html" class="sitemap-col-item">
          Docker
        </a><a href="/部署/linux/01_Linux_安装.html" class="sitemap-col-item">
          Linux
        </a><a href="/部署/vm/linux安装centos.html" class="sitemap-col-item">
          VM Ware
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">面向对象</div></td> <!----> <td><a href="/设计模式/创建型模式/" class="sitemap-col-item">
          设计模式
        </a></td></tr></table></div></div></div> <!----> </aside></div><div class="global-ui"><div class="read-more-wrap" style="display:none;position:absolute;bottom:0px;z-index:9999;width:100%;margin-top:-100px;font-family:PingFangSC-Regular, sans-serif;"><div id="read-more-mask" style="position: relative; height: 200px; background: -webkit-gradient(linear, 0 0%, 0 100%, from(rgba(255, 255, 255, 0)), to(rgb(255, 255, 255)));"></div> <a id="read-more-btn" target="_self" style="position: absolute; left: 50%; top: 70%; bottom: 30px;\n        transform: translate(-50%, -50%); width: 160px; height: 36px;\n         line-height: 36px; font-size: 15px; text-align: center;\n          border: 1px solid rgb(222, 104, 109); color: rgb(222, 104, 109);\n           background: rgb(255, 255, 255); cursor: pointer; border-radius: 6px;">阅读全文</a> <div id="btw-modal-wrap" style="display: none;"><div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0);"></div> <div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;"><span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 34px; font-size: 34px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">×</span> <p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px;">
            微信扫码或搜索：<span style="color: #E9405A; font-weight: bold;">智慧对话的未来</span> <br>发送：<span id="hutec-token" class="token" style="color: #e9415a; font-weight: bold; font-size: 17px; margin-bottom: 45px;">}</span> <br>即可<span style="color: #e9415a; font-weight: bold;">立即永久</span>解锁本站全部文章</p> <img src="/images/personal/qrcode.png" style="width: 180px; margin-top: 10px; margin-bottom: 30px; border: 8px solid rgb(230, 230, 230);"></div></div></div></div></div>
    <script src="/assets/js/cg-styles.js?v=1718377004316" defer></script><script src="/assets/js/cg-4.js?v=1718377004316" defer></script><script src="/assets/js/cg-12.js?v=1718377004316" defer></script><script src="/assets/js/cg-1.js?v=1718377004316" defer></script><script src="/assets/js/cg-86.js?v=1718377004316" defer></script><script src="/assets/js/cg-app.js?v=1718377004316" defer></script>
  </body>
</html>
