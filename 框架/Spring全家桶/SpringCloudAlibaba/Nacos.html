<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nacos | 技术侦探</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <script charset="utf-8" async="async" src="/js/jquery.min.js"></script>
    <script charset="utf-8" async="async" src="/js/fingerprint2.min.js"></script>
    <script charset="utf-8" async="async" src="https://s9.cnzz.com/z_stat.php?id=1278232949&amp;web_id=1278232949"></script>
    <script>
              var _hmt = _hmt || [];
              (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?0b31b4c146bf7126aed5009e1a4a11c8";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
              })();
            </script>
    <meta name="description" content="技术并不是我们所追求的目的,而是技术创新世界">
    <meta property="article:modified_time" content="null">
    <meta property="og:title" content="Nacos">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html">
    <meta name="twitter:title" content="Nacos">
    <meta name="twitter:url" content="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="robots" content="all">
    <meta name="author" content="小傅哥">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="keywords" content="Java基础">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.ee4e0787.css" as="style"><link rel="preload" href="/assets/css/styles.css?v=1718377004316" as="style"><link rel="preload" href="/assets/js/cg-styles.js?v=1718377004316" as="script"><link rel="preload" href="/assets/js/cg-app.js?v=1718377004316" as="script"><link rel="preload" href="/assets/js/cg-4.js?v=1718377004316" as="script"><link rel="preload" href="/assets/js/cg-16.js?v=1718377004316" as="script"><link rel="preload" href="/assets/js/cg-1.js?v=1718377004316" as="script"><link rel="preload" href="/assets/js/cg-86.js?v=1718377004316" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.ee4e0787.css"><link rel="stylesheet" href="/assets/css/styles.css?v=1718377004316">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">技术侦探</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="nav-link">
  javaSE
</a></li><li class="dropdown-subitem"><a href="/java/javaWeb/01_Web开发基础.html" class="nav-link">
  javaWeb
</a></li><li class="dropdown-subitem"><a href="/java/JUC/1、JUC概述.html" class="nav-link">
  JUC
</a></li><li class="dropdown-subitem"><a href="/java/响应式编程/前置知识.html" class="nav-link">
  响应式编程
</a></li><li class="dropdown-subitem"><a href="/设计模式/概述/概述.html" class="nav-link">
  设计模式
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/jdbc/01_JDBC.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/db/mysql/Mysql基础/01_MySQL概述.html" class="nav-link">
  mysql
</a></li></ul></li><li class="dropdown-item"><h4>
          补充
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/补充/Retrofit2.html" class="nav-link">
  Retrofit2
</a></li><li class="dropdown-subitem"><a href="/java/补充/rxJava/rxJava.html" class="nav-link">
  rxJava
</a></li><li class="dropdown-subitem"><a href="/java/补充/lua.html" class="nav-link">
  lua
</a></li><li class="dropdown-subitem"><a href="/java/补充/JVM.html" class="nav-link">
  jvm
</a></li><li class="dropdown-subitem"><a href="/java/补充/枚举.html" class="nav-link">
  枚举
</a></li><li class="dropdown-subitem"><a href="/java/补充/线程池.html" class="nav-link">
  线程池
</a></li><li class="dropdown-subitem"><a href="/java/补充/自定义注解.html" class="nav-link">
  自定义注解
</a></li></ul></li><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端/前端基础/01_HTML.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-subitem"><a href="/前端/vue/01_ECMAScript6入门.html" class="nav-link">
  vue
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/框架/DDD架构/01-ddd是什么.html" class="nav-link">
  DDD
</a></li><li class="dropdown-item"><!----> <a href="/框架/Mybatis/01_MyBatis快速入门.html" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><h4>
          Spring全家桶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringSecurity/SpringSecurity.html" class="nav-link">
  SpringSecurity
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="nav-link">
  SpringCloudAlibaba
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/中间件/ElasticSearch/ElasticSearch.html" class="nav-link">
  中间件 | 自研轮子
</a></div><div class="nav-item"><a href="/部署/linux/01_Linux_安装.html" class="nav-link">
  部署|运维
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><span class="title">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/实战/商城/项目笔记.html" class="nav-link">
  锋迷铺子
</a></li><li class="dropdown-item"><!----> <a href="/实战/实用工具类/DocUtils.html" class="nav-link">
  实用工具类
</a></li><li class="dropdown-item"><!----> <a href="http://520.hjcwzx.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  研究生工作平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/更新日志/更新日志.html" class="nav-link">
  更新日志
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="nav-link">
  javaSE
</a></li><li class="dropdown-subitem"><a href="/java/javaWeb/01_Web开发基础.html" class="nav-link">
  javaWeb
</a></li><li class="dropdown-subitem"><a href="/java/JUC/1、JUC概述.html" class="nav-link">
  JUC
</a></li><li class="dropdown-subitem"><a href="/java/响应式编程/前置知识.html" class="nav-link">
  响应式编程
</a></li><li class="dropdown-subitem"><a href="/设计模式/概述/概述.html" class="nav-link">
  设计模式
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/jdbc/01_JDBC.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/db/mysql/Mysql基础/01_MySQL概述.html" class="nav-link">
  mysql
</a></li></ul></li><li class="dropdown-item"><h4>
          补充
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/补充/Retrofit2.html" class="nav-link">
  Retrofit2
</a></li><li class="dropdown-subitem"><a href="/java/补充/rxJava/rxJava.html" class="nav-link">
  rxJava
</a></li><li class="dropdown-subitem"><a href="/java/补充/lua.html" class="nav-link">
  lua
</a></li><li class="dropdown-subitem"><a href="/java/补充/JVM.html" class="nav-link">
  jvm
</a></li><li class="dropdown-subitem"><a href="/java/补充/枚举.html" class="nav-link">
  枚举
</a></li><li class="dropdown-subitem"><a href="/java/补充/线程池.html" class="nav-link">
  线程池
</a></li><li class="dropdown-subitem"><a href="/java/补充/自定义注解.html" class="nav-link">
  自定义注解
</a></li></ul></li><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端/前端基础/01_HTML.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-subitem"><a href="/前端/vue/01_ECMAScript6入门.html" class="nav-link">
  vue
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/框架/DDD架构/01-ddd是什么.html" class="nav-link">
  DDD
</a></li><li class="dropdown-item"><!----> <a href="/框架/Mybatis/01_MyBatis快速入门.html" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><h4>
          Spring全家桶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringSecurity/SpringSecurity.html" class="nav-link">
  SpringSecurity
</a></li><li class="dropdown-subitem"><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="nav-link">
  SpringCloudAlibaba
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/中间件/ElasticSearch/ElasticSearch.html" class="nav-link">
  中间件 | 自研轮子
</a></div><div class="nav-item"><a href="/部署/linux/01_Linux_安装.html" class="nav-link">
  部署|运维
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><span class="title">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/实战/商城/项目笔记.html" class="nav-link">
  锋迷铺子
</a></li><li class="dropdown-item"><!----> <a href="/实战/实用工具类/DocUtils.html" class="nav-link">
  实用工具类
</a></li><li class="dropdown-item"><!----> <a href="http://520.hjcwzx.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  研究生工作平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/更新日志/更新日志.html" class="nav-link">
  更新日志
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>服务中心</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="active sidebar-link">Nacos</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>网关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/框架/Spring全家桶/SpringCloudAlibaba/SpringCloud-Gateway.html" class="sidebar-link">GateWay</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>流控</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/框架/Spring全家桶/SpringCloudAlibaba/Sentinel.html" class="sidebar-link">Sentinel</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>链路追踪</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/框架/Spring全家桶/SpringCloudAlibaba/Sleuth.html" class="sidebar-link">Sleuth</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>分布式事务</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/框架/Spring全家桶/SpringCloudAlibaba/分布式事务.html" class="sidebar-link">Seata</a></li></ul></section></li></ul> </aside> <div><main class="page"> <div class="theme-default-content content__default"><h1 id="nacos"><a href="#nacos" class="header-anchor">#</a> Nacos</h1> <p><strong>CAP原则又称CAP定理，指的是在一个分布式系统中Consistency（一致性）、 Availability（可用性）、Partition tolerance（分区容错性），要么是AP，要么是CP</strong></p> <p><strong>nacos工作流程:</strong></p> <p><strong>服务注册:微服务模块启动起来后会向nacos注册信息（实例名，ip，端口） ，双层Map存</strong></p> <p><strong>服务心跳:微服务模块5秒发送心跳，告诉nacos可以提供服务</strong></p> <p>**服务发现:微服务模块本地会开启定时任务，从nacos拉取最新的注册信息，缓存到本地   (35秒) **</p> <p><strong>服务健康检查：nacos开启定时任务， 15秒后收不到某服务的心跳后，会将healthy置位false,30秒后收不到，剔除</strong></p> <p>**Ribbon工作流程 **</p> <p><strong>1拦截远程调用</strong></p> <p><strong>2获取serviceId</strong></p> <p><strong>3 查看本地缓存中有无该服务实例列表，如果没有，根据serviceId从nacos中找到相应的服务实例缓存到本地,且每隔35秒更新本地缓存</strong></p> <p><strong>4 根据负载均衡策略确定一个实例</strong></p> <p><strong>5 将实例的地址信息交给RestTemplat，发http请求</strong></p> <p><strong>Ribbon的负载均衡策略</strong></p> <p><strong>1 最可用策略    （并发最小）</strong></p> <p><strong>2可用过滤策略  （把不可用的过滤掉，可用的进行轮询）</strong></p> <p><strong>3权重响应时间策略  （根据平均响应时间）</strong></p> <p><strong>4重试策略</strong></p> <p><strong>5轮询策略     轮询</strong></p> <p><strong>6随机策略</strong></p> <p><strong>7zone回避策略     轮询      默认</strong></p> <p><strong>nacos: 注册中心/配置中心       (工作流程)</strong></p> <p><strong>ribbon：[客户端]负载均衡器  (工作流程)</strong></p> <p><strong>feign:远程调用 (声明式http客户端)</strong></p> <h1 id="一-微服务架构"><a href="#一-微服务架构" class="header-anchor">#</a> 一：微服务架构</h1> <h2 id="_1-0-单体架构"><a href="#_1-0-单体架构" class="header-anchor">#</a> 1.0：单体架构</h2> <blockquote><p>将项目所有模块（功能）打成jar或者war，然后部署一个进程</p></blockquote> <p><img src="/assets/img/v2-1b379f20419869e262997606ea5fd4ed_720w.1b379f20.png" alt="v2-1b379f20419869e262997606ea5fd4ed_720w"></p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>优点：
1：部署简单: 由于是完整的结构体，可以直接部署在一个服务器上即可。
2：技术单一: 项目不需要复杂的技术栈，往往一套熟悉的技术栈就可以完成开发。
3：用人成本低: 单个程序员可以完成业务接口到数据库的整个流程。

缺点：
1：系统启动慢， 一个进程包含了所有的业务逻辑，涉及到的启动模块过多，导致系统的启动、重启时间周期过长;
2：系统错误隔离性差、可用性差，任何一个模块的错误均可能造成整个系统的宕机;
3：可伸缩性差：系统的扩容只能只对这个应用进行扩容，无法结合业务模块的特点进行伸缩。
4：线上问题修复周期长：任何一个线上问题修复需要对整个应用系统进行全面升级。
5. 跨语言程度差
6. 不利于安全管理，所有开发人员都拥有全量代码

运营平台，传统项目，访问量不大  采用单体架构

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_1-1-微服务架构"><a href="#_1-1-微服务架构" class="header-anchor">#</a> 1.1：微服务架构</h2> <p>微服务架构论文：https://martinfowler.com/articles/microservices.html</p> <p>译文：https://mp.weixin.qq.com/s?__biz=MjM5MjEwNTEzOQ==&amp;mid=401500724&amp;idx=1&amp;sn=4e42fa2ffcd5732ae044fe6a387a1cc3#rd</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>In short, the microservice architectural style [1] is an approach to developing a single application as a suite of small services, each running in its own process and communicating with lightweight mechanisms（ 美 ['mekə,nɪzəm]  机制）, often an HTTP resource API. These services are built around business capabilities and independently deployable by fully automated deployment machinery. There is a bare minimum of centralized management of these services, which may be written in different programming languages and use different data storage technologies.

简而言之，微服务架构风格[1]这种开发方法，是以开发一组小型服务的方式来开发一个独立的应用系统的。其中每个小型服务都运行在自己的进程中，并经常采用HTTP资源API这样轻量的机制来相互通信。这些服务围绕业务功能进行构建，并能通过全自动的部署机制来进行独立部署。这些微服务可以使用不同的语言来编写，并且可以使用不同的数据存储技术。对这些微服务我们仅做最低限度的集中管理。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>解读微服务特点:</strong></p> <p>1:微服务是一种项目架构思想(风格)    （微服务是一种架构设计思想）</p> <p>2:微服务架构是一系列小服务的组合（组件化与多服务）</p> <p>3:任何一个微服务，都是一个独立的进程（独立开发、独立维护、独立部署）</p> <p>4:轻量级通信http协议(跨语言,跨平台)</p> <p>5:服务粒度(围绕业务功能拆分)</p> <p>6:去中心化管理(去中心化”地治理技术、去中心化地管理数据)</p> <h2 id="_1-2-微服务架构的优势"><a href="#_1-2-微服务架构的优势" class="header-anchor">#</a> 1.2：微服务架构的优势</h2> <p><strong>1.易于开发和维护</strong>
一个微服务只关注一个特定的业务功能，所以它的业务清晰、代码量较少。开发和维护单个微服务相对比较简单，整个应用是由若干个微服务构建而成，所以整个应用也会维持在可控状态；</p> <p><strong>2.单个微服务启动较快</strong>
单个微服务代码量较少，所以启动会比较快；</p> <p><strong>3.局部修改容易部署</strong>
单体应用只要有修改，就要重新部署整个应用，微服务解决了这样的问题。一般来说，对某个微服务进行修改，只需要重新部署这个服务即可；</p> <p><strong>4.技术栈不受限</strong>
在微服务中，我们可以结合项目业务及团队的特点，合理地选择技术栈</p> <p><strong>5.按需伸缩</strong></p> <h2 id="_1-3-微服务架构的缺点-挑战"><a href="#_1-3-微服务架构的缺点-挑战" class="header-anchor">#</a> 1.3：微服务架构的缺点(挑战)</h2> <p>1、服务太多，导致服务间的依赖错综复杂，运维难度大</p> <p>2、微服务放大了分布式架构的系列问题</p> <ul><li>分布式事务（seata）、     @Transactional    （不是同一个连接，）</li> <li>分布式锁怎么处理（redisson）， synchronized</li> <li>服务注册与发现（nacos）、</li> <li>依赖服务不稳定（sentinel）导致服务雪崩怎么办？</li></ul> <p>3、运维复杂度陡增，部署数量多、监控进程多导致整体运维复杂度提升。</p> <blockquote><p>微服务架构适用于互联网项目（58、电商、视频点播）</p></blockquote> <h2 id="_1-4-springcloud与微服务关系"><a href="#_1-4-springcloud与微服务关系" class="header-anchor">#</a> 1.4：SpringCloud与微服务关系</h2> <p>微服务：</p> <p>dubbo       zookper</p> <p>springcloud      (  netflix 一代  eureka</p> <p>​                                alibaba 新一代  nacos      )</p> <ul><li><p>Springcloud为微服务思想提供了完美的解决方案</p></li> <li><p>Springcloud是一些列框架的集合体（服务的注册与发现【注册中心】、服务间远程调用、服务降级、服务熔断、服务限流、分布式事务 等）</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>一般我们说springcloud 其实指的是Springcloud-netflix，Springcloud并不是造轮子，只是把Netflix公司的组件做二次开发
Springcloud第二代  Springcloud-alibaba
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>netflix:eureka , ribbon ,hytrix,spring cloud config,zull</p> <p>alibaba :nacos   ribbon sentinel  nacos  spring cloud gateway</p></li></ul> <h2 id="_1-5-springboot和springcloud关系"><a href="#_1-5-springboot和springcloud关系" class="header-anchor">#</a> 1.5：SpringBoot和SpringCloud关系</h2> <ul><li><p>SpringBoot专注于快速方便的开发单个个体微服务。</p></li> <li><p>SpringCloud是关注全局的微服务协调、整理、治理的框架，它将SpringBoot开发的单体整合并管理起来。</p></li> <li><p>SpringBoot可以离开SpringCloud独立使用开发项目，但是SpringCloud离不开SpringBoot，属于依赖关系。</p></li></ul> <p><strong>注意点：1 spring  cloud alibaba 需要导入 spring cloud 依赖</strong></p> <p>​                <strong>2 每个单体项目都是一个SpringBoot项目</strong></p> <h1 id="二-服务注册与发现-nacos"><a href="#二-服务注册与发现-nacos" class="header-anchor">#</a> 二：服务注册与发现    (nacos)</h1> <h2 id="_2-1-服务注册与发现"><a href="#_2-1-服务注册与发现" class="header-anchor">#</a> 2.1：服务注册与发现</h2> <blockquote><p><strong>服务注册</strong>，就是将提供某个服务的模块信息(通常是这个服务的ip和端口)注册到1个公共的组件上去（比如: zookeeper\consul\eureka\nacos）。</p> <p><strong>服务发现</strong>，就是新注册的这个服务模块能够及时的被其他调用者发现。不管是服务新增和服务删减都能实现自动发现。</p></blockquote> <h2 id="_2-2-注册中心对比"><a href="#_2-2-注册中心对比" class="header-anchor">#</a> 2.2：注册中心对比</h2> <table><thead><tr><th>对比组件</th> <th>Nacos</th> <th>Eureka</th> <th>Consul</th> <th>Zookeeper</th></tr></thead> <tbody><tr><td>一致性对比</td> <td>支持AP和CP模型</td> <td>AP模型</td> <td>CP模型</td> <td>CP模型</td></tr> <tr><td>健康检查</td> <td>tcp/http/client Beat</td> <td>client Beat</td> <td>TCP/HTTP/gRPC</td> <td>keep Alive</td></tr> <tr><td>负载均衡策略</td> <td>Ribbon</td> <td>Ribbon</td> <td>Fabio</td> <td>-</td></tr> <tr><td>雪崩保护</td> <td>有</td> <td>有</td> <td>无</td> <td>无</td></tr> <tr><td>自动注销实例</td> <td>支持</td> <td>支持</td> <td>不支持</td> <td>支持</td></tr> <tr><td>访问协议</td> <td>HTTP</td> <td>HTTP</td> <td>HTTP</td> <td>TCP</td></tr> <tr><td>监听支持</td> <td>支持</td> <td>支持</td> <td>支持</td> <td>支持</td></tr> <tr><td>多数据中心</td> <td>支持</td> <td>支持</td> <td>支持</td> <td>不支持</td></tr> <tr><td>跨注册中心同步</td> <td>支持</td> <td>不支持</td> <td>支持</td> <td>不支持</td></tr> <tr><td>Springcloud集成</td> <td>支持</td> <td>支持</td> <td>支持</td> <td>不支持</td></tr> <tr><td>Dubbo集成</td> <td>支持</td> <td>不支持</td> <td>不支持</td> <td>支持</td></tr> <tr><td>K8s集成</td> <td>支持</td> <td>不支持</td> <td>支持</td> <td>不支持</td></tr></tbody></table> <h1 id="三-nacos简介与安装"><a href="#三-nacos简介与安装" class="header-anchor">#</a> 三：nacos简介与安装</h1> <p>官网：https://nacos.io/zh-cn/docs/what-is-nacos.html</p> <h2 id="_3-1-nacos功能与架构"><a href="#_3-1-nacos功能与架构" class="header-anchor">#</a> 3.1：nacos功能与架构</h2> <p><strong>nacos架构：</strong></p> <p><img src="/assets/img/1561217892717-1418fb9b-7faa-4324-87b9-f1740329f564.c1092b1f.jpeg" alt="1561217892717-1418fb9b-7faa-4324-87b9-f1740329f564"></p> <p><strong>nacos功能：</strong></p> <ul><li><p>名字服务 (Naming Service)</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>命名服务是指通过指定的名字来获取资源或者服务的地址，提供者的信息

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <p>​</p> <ul><li><p>配置服务 (Configuration Service)</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>动态配置服务让您能够以中心化、外部化和动态化的方式管理所有环境的配置。动态配置消除了配置变更时重新部署应用和服务的需要。配置中心化管理让实现无状态服务更简单，也让按需弹性扩展服务更容易。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h2 id="_3-2-nacos安装"><a href="#_3-2-nacos安装" class="header-anchor">#</a> 3.2：nacos安装</h2> <p>下载地址:https://github.com/alibaba/nacos/tags</p> <p>1：解压安装</p> <p>2：配置</p> <p><img src="/assets/img/image-20210816151513489.9e30a173.png" alt="image-20210816151513489"></p> <p>3：创建数据库以及表（conf&gt;nacos-mysql.sql）</p> <p>4：配置startup.cmd，以standalone方式启动</p> <p><img src="/assets/img/image-20210816150721928.6d5b04ef.png" alt="image-20210816150721928"></p> <p>5：启动</p> <h2 id="_3-2-nacos注册中心工作流程"><a href="#_3-2-nacos注册中心工作流程" class="header-anchor">#</a> 3.2：nacos注册中心工作流程</h2> <p><img src="/assets/img/image-20201025201055054.3c577c90.png" alt="image-20201025201055054"></p> <h1 id="四-微服务入门案例"><a href="#四-微服务入门案例" class="header-anchor">#</a> 四：微服务入门案例</h1> <h2 id="_4-1-boot与cloud版本"><a href="#_4-1-boot与cloud版本" class="header-anchor">#</a> 4.1：boot与cloud版本</h2> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>springboot:提供了快速开发微服务的能力
springcloud提供了微服务治理的能力（服务注册与发现、服务降级、限流、熔断、网关、负载均衡、配置中心...），为微服务开发提供了全家桶服务
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>springboot的版本查看地址：https://spring.io/projects/spring-boot#learn</p> <p>springcloud的版本查看地址：https://spring.io/projects/spring-cloud#overview</p> <p>详细版本对应信息查看：https://start.spring.io/actuator/info</p> <p><img src="/assets/img/image-20201017145706708.fa99f5ae.png" alt="image-20201017145706708"></p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>注意：
如果采用springboot和springcloud（springcloud netflix）那么使用以上版本对应就ok了，
但是如果要使用alibaba的组件（nacos、sentinel、RocketMQ、Seata）必须使用springcloud alibaba
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_4-2-springcloud-alibaba"><a href="#_4-2-springcloud-alibaba" class="header-anchor">#</a> 4.2：SpringCloud-alibaba</h2> <p>Springcloud与springcloud-alibaba关系</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>◆ 我们通常说的SpringCloud，泛指Spring Cloud Netflix，也是springcloud第一代
◆ SpringCloud Alibaba是SpringCloud的子项目，是阿里巴巴结合自身微服务实践，
◆ SpringCloud Alibaba符合SpringCloud标准，依赖于springcloud
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/assets/img/image-20201017153801040.74ad59f0.png" alt="image-20201017153801040"></p> <h2 id="_4-3-确定版本"><a href="#_4-3-确定版本" class="header-anchor">#</a> 4.3：确定版本</h2> <p>确定方式：通过查看springcloud alibaba 官网确定</p> <p>https://github.com/alibaba/spring-cloud-alibaba/wiki/版本说明</p> <table><thead><tr><th>Spring Cloud Version</th> <th>Spring Cloud Alibaba Version</th> <th>Spring Boot Version</th></tr></thead> <tbody><tr><td>Spring Cloud Hoxton.SR8</td> <td>2.2.4.RELEASE</td> <td>2.3.2.RELEASE</td></tr> <tr><td>Spring Cloud Greenwich.SR6</td> <td>2.1.3.RELEASE</td> <td>2.1.13.RELEASE</td></tr> <tr><td>Spring Cloud Hoxton.SR3</td> <td>2.2.1.RELEASE</td> <td>2.2.5.RELEASE</td></tr> <tr><td>Spring Cloud Hoxton.RELEASE</td> <td>2.2.0.RELEASE</td> <td>2.2.X.RELEASE</td></tr> <tr><td>Spring Cloud Greenwich</td> <td>2.1.2.RELEASE</td> <td>2.1.X.RELEASE</td></tr> <tr><td>Spring Cloud Finchley</td> <td>2.0.3.RELEASE</td> <td>2.0.X.RELEASE</td></tr> <tr><td>Spring Cloud Edgware</td> <td>1.5.1.RELEASE(停止维护，建议升级)</td> <td>1.5.X.RELEASE</td></tr></tbody></table> <p><strong>面试题</strong></p> <p><strong>最终决定（版本号记忆）：</strong></p> <p><strong>springcloud-alibaba:     2.2.6.RELEASE</strong></p> <p><strong>springcloud:                   Hoxton.SR9</strong></p> <p><strong>springboot:                     2.3.2.RELEASE</strong></p> <h2 id="_4-4-创建父工程"><a href="#_4-4-创建父工程" class="header-anchor">#</a> 4.4：创建父工程</h2> <p><img src="/assets/img/nacos1.80ad5bc9.jpg" alt="nacos1"></p> <p>父工程锁定springboot、springcloud、springcloud-alibaba版本</p> <p><img src="/assets/img/nacos2.9a8b0b8e.png" alt="nacos2"></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.qf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modules</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>cloud-goods<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--   初次搭建不需要--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modules</span><span class="token punctuation">&gt;</span></span>


    <span class="token comment">&lt;!--    父工程的职责：锁定版本    springboot、springcloud、springcloud-alibaba--&gt;</span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.6.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="_4-5-服务提供者"><a href="#_4-5-服务提供者" class="header-anchor">#</a> 4.5：服务提供者</h2> <p>nacos学习文档：https://github.com/alibaba/spring-cloud-alibaba/blob/master/spring-cloud-alibaba-docs/src/main/asciidoc-zh/nacos-discovery.adoc</p> <h3 id="_4-5-1-pom-xml"><a href="#_4-5-1-pom-xml" class="header-anchor">#</a> 4.5.1：pom.xml</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token comment">&lt;!--  微服务基础依赖  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--   web的场景依赖     --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

       <span class="token comment">&lt;!--   服务注册与发现的场景依赖     --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_4-5-2-application-yml"><a href="#_4-5-2-application-yml" class="header-anchor">#</a> 4.5.2：application.yml</h3> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring</span><span class="token punctuation">:</span>
<span class="token key attr-name">  application</span><span class="token punctuation">:</span>
<span class="token key attr-name">    name</span><span class="token punctuation">:</span> <span class="token value attr-value">cloud-goods #服务名称，必须，保证唯一</span>
<span class="token key attr-name">  cloud</span><span class="token punctuation">:</span>
<span class="token key attr-name">    nacos</span><span class="token punctuation">:</span>
<span class="token key attr-name">      discovery</span><span class="token punctuation">:</span>
<span class="token key attr-name">        server-addr</span><span class="token punctuation">:</span> <span class="token value attr-value">localhost:8848 #指定nacos-server的地址</span>
<span class="token key attr-name">        username</span><span class="token punctuation">:</span> <span class="token value attr-value">nacos</span>
<span class="token key attr-name">        password</span><span class="token punctuation">:</span> <span class="token value attr-value">nacos</span>
<span class="token key attr-name">server</span><span class="token punctuation">:</span>
<span class="token key attr-name">  port</span><span class="token punctuation">:</span> <span class="token value attr-value">9001</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-5-3-启动类加注解"><a href="#_4-5-3-启动类加注解" class="header-anchor">#</a> 4.5.3：启动类加注解</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>discovery<span class="token punctuation">.</span></span><span class="token class-name">EnableDiscoveryClient</span></span><span class="token punctuation">;</span>


<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>  <span class="token comment">//开关，开启服务的注册与发现功能重点！！！客户端上加@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GoodsApp</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">GoodsApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_4-5-4-查询商品接口"><a href="#_4-5-4-查询商品接口" class="header-anchor">#</a> 4.5.4：查询商品接口</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;goods&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GoodsController</span> <span class="token punctuation">{</span>


    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;findById/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Goods</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token string">&quot;小米&quot;</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_4-6-服务消费者"><a href="#_4-6-服务消费者" class="header-anchor">#</a> 4.6：服务消费者</h2> <h3 id="_4-6-1-pom-xml"><a href="#_4-6-1-pom-xml" class="header-anchor">#</a> 4.6.1：pom.xml</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.qf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-orders<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--  web的场景依赖      --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- 健康检查的场景依赖--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- nacos服务注册与发现的场景依赖--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.qf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-entity<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="_4-6-2-application-yml"><a href="#_4-6-2-application-yml" class="header-anchor">#</a> 4.6.2：application.yml</h3> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring</span><span class="token punctuation">:</span>
<span class="token key attr-name">  application</span><span class="token punctuation">:</span>
<span class="token key attr-name">    name</span><span class="token punctuation">:</span> <span class="token value attr-value">cloud-orders  #服务的应用名称</span>
<span class="token key attr-name">  cloud</span><span class="token punctuation">:</span>
<span class="token key attr-name">    nacos</span><span class="token punctuation">:</span>
<span class="token key attr-name">      discovery</span><span class="token punctuation">:</span> <span class="token value attr-value">#nacos配置</span>
<span class="token key attr-name">        server-addr</span><span class="token punctuation">:</span> <span class="token value attr-value">localhost:8848</span>
<span class="token key attr-name">        username</span><span class="token punctuation">:</span> <span class="token value attr-value">nacos</span>
<span class="token key attr-name">        password</span><span class="token punctuation">:</span> <span class="token value attr-value">nacos</span>
<span class="token comment">        #ip: 127.0.0.1  #服务注册的ip，可以不写，nacos自动检测到ip</span>
<span class="token comment">        #port: 9002     #服务注册的端口，可以不写，nacos自动检测到port</span>

<span class="token key attr-name">server</span><span class="token punctuation">:</span>
<span class="token key attr-name">  port</span><span class="token punctuation">:</span> <span class="token value attr-value">9001</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_4-6-3-启动类加注解"><a href="#_4-6-3-启动类加注解" class="header-anchor">#</a> 4.6.3：启动类加注解</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>discovery<span class="token punctuation">.</span></span><span class="token class-name">EnableDiscoveryClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>loadbalancer<span class="token punctuation">.</span></span><span class="token class-name">LoadBalanced</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestTemplate</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * &lt;p&gt;title: com.qf&lt;/p&gt;
 * &lt;p&gt;Company: wendao&lt;/p&gt;
 * author zhuximing
 * date 2021/7/16
 * description:
 */</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrdersApp</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrdersApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Bean</span>
    <span class="token comment">//让ribbon拦截RestTemplate发出的所有的请求</span>
    <span class="token comment">//ribbon获取url中的service name</span>
    <span class="token comment">//从nacos注册中心获取实例列表</span>
    <span class="token comment">//负责从实例列表中通过相应的负载均衡算法，获取一个实例</span>
    <span class="token comment">//RestTemplate请求实例</span>
    <span class="token annotation punctuation">@LoadBalanced</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span>  <span class="token function">initRestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="_4-6-4-保存订单接口"><a href="#_4-6-4-保存订单接口" class="header-anchor">#</a> 4.6.4：保存订单接口</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Goods</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestTemplate</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * &lt;p&gt;title: com.qf.controller&lt;/p&gt;
 * &lt;p&gt;Company: wendao&lt;/p&gt;
 * author zhuximing
 * date 2021/7/16
 * description:
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;order&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>


    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;save&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token comment">//获取购买的商品信息（远程调用商品微服务去获取商品信息） 发送http请求</span>
        <span class="token comment">//java 发送http请求，使用apache httpclient</span>
        <span class="token comment">// spring resttemplate  简洁</span>
        <span class="token comment">//String url = &quot;http://localhost:9002/goods/findById/1&quot;;  //硬编码ip和端口</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;http://xx-goods/goods/findById/1&quot;</span> <span class="token punctuation">;</span>  <span class="token comment">//硬编码服务名</span>
        <span class="token class-name">Goods</span> goods <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token class-name">Goods</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>goods<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//保存订单(本地调用)</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;保存订单成功!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



        <span class="token comment">//todo: 扣库存</span>


        <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>


<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h2 id="_4-7-微服务集群演示"><a href="#_4-7-微服务集群演示" class="header-anchor">#</a> 4.7：微服务集群演示</h2> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>以good模块为例，做集群
<span class="token key attr-name">   1</span> <span class="token value attr-value">实例名一样</span>
<span class="token key attr-name">   2</span> <span class="token value attr-value">端口号不一样</span>
<span class="token key attr-name">   3</span> <span class="token value attr-value">注册到同一个nacos</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_4-8-nacos领域模型"><a href="#_4-8-nacos领域模型" class="header-anchor">#</a> 4.8：nacos领域模型    ()</h2> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>nacos的服务由三元组唯一确定   (namespace、group、servicename)
nacos的配置由三元组唯一确定     (namespace、group、dataId)

不同的namespace是相互隔离的，相同namespace但是不同的group也是相互隔离的

默认的namespace是public ，不能删除
默认的group是DEFAULT-GROUP

使用领域模型实现多环境的服务隔离（多环境公用一个nacos）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>开发：dev  测试:sit    生产 :prod</p> <p>1：创建namespace</p> <p><img src="/assets/img/image-20210817102910080.1a611958.png" alt="image-20210817102910080"></p> <p>2：发布服务到指定的namespace</p> <p><img src="/assets/img/image-20210817103155453.cc8382f1.png" alt="image-20210817103155453"></p> <h1 id="五-resttemplate"><a href="#五-resttemplate" class="header-anchor">#</a> 五：RestTemplate</h1> <blockquote><p>实现服务间远程调用</p></blockquote> <h2 id="_5-1-resttemplate简介"><a href="#_5-1-resttemplate简介" class="header-anchor">#</a> 5.1：RestTemplate简介</h2> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>1:RestTemplate是java模拟浏览器发送http请求的工具类
2:RestTemplate基于`Apache`的`HttpClient`实现。HttpClient使用起来太过繁琐。spring提供了一种简单便捷的模板类来进行操作，这就是`RestTemplate`。

Openfeign
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_5-2-forobject"><a href="#_5-2-forobject" class="header-anchor">#</a> 5.2：ForObject</h2> <blockquote><p>返回的是响应结果</p></blockquote> <p>get请求</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span> goods <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token class-name">BaseURL</span><span class="token operator">+</span><span class="token string">&quot;findGoodsById?goodsId=12&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>goods<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;goodsName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>post请求（发送的是json串）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span> goods <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForObject</span><span class="token punctuation">(</span><span class="token class-name">BaseURL</span> <span class="token operator">+</span> <span class="token string">&quot;/save&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token string">&quot;huawei&quot;</span><span class="token punctuation">,</span> <span class="token number">99.99</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>goods<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>提示：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>1:微服务之间数据传输格式统一为json
2：entity的空构造方法要提供
@Data
@AllArgsConstructor
@NoArgsConstructor
public class Goods  {

      private String goodsName;
      private double price;

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_5-3-forentity"><a href="#_5-3-forentity" class="header-anchor">#</a> 5.3：ForEntity</h2> <blockquote><p>返回的是响应体</p></blockquote> <p>get请求</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Goods</span><span class="token punctuation">&gt;</span></span> forEntity <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForEntity</span><span class="token punctuation">(</span><span class="token class-name">BaseURL</span> <span class="token operator">+</span> <span class="token string">&quot;findGoodsById?goodsId=12&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Goods</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;http status:&quot;</span><span class="token operator">+</span>forEntity<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;http response body:&quot;</span><span class="token operator">+</span>forEntity<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>post请求</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&gt;</span></span> responseEntity <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForEntity</span><span class="token punctuation">(</span><span class="token class-name">BaseURL</span> <span class="token operator">+</span> <span class="token string">&quot;/save&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token string">&quot;huawei&quot;</span><span class="token punctuation">,</span> <span class="token number">99.99</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;http status:&quot;</span><span class="token operator">+</span>responseEntity<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;http response body:&quot;</span><span class="token operator">+</span>responseEntity<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="六-负载均衡器ribbon"><a href="#六-负载均衡器ribbon" class="header-anchor">#</a> 六：负载均衡器Ribbon</h1> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>nacos:注册中心，解决服务的注册与发现
Ribbon：客户端的负载均衡器，解决的是服务实例列表的负载均衡的问题
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_6-1-ribbon简介"><a href="#_6-1-ribbon简介" class="header-anchor">#</a> 6.1：Ribbon简介</h2> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>Ribbon是Netflix公司开源的一个负载均衡的项目，是一个&quot;客户端&quot;负载均衡器，运行在客户端上
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Ribbon运行在客户端上  （谁调的服务谁是客户端）</p> <h2 id="_6-2-ribbon在项目中怎么使用"><a href="#_6-2-ribbon在项目中怎么使用" class="header-anchor">#</a> 6.2：Ribbon在项目中怎么使用</h2> <p>第一步：pom依赖</p> <blockquote><p>springcloud alibaba 对Ribbon做了兼容</p></blockquote> <p><img src="/assets/img/image-20201018110223408.f65fefb2.png" alt="image-20201018110223408"></p> <p>第二步：@LoadBalanced注解</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@LoadBalanced</span>
<span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">restTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_6-3-ribbon的工作流程-重点"><a href="#_6-3-ribbon的工作流程-重点" class="header-anchor">#</a> 6.3：Ribbon的工作流程   （重点）</h2> <p><img src="/assets/img/image-20210201170717856.8e53d9a9.png" alt="image-20210201170717856"></p> <h2 id="_6-4-ribbon源码追踪"><a href="#_6-4-ribbon源码追踪" class="header-anchor">#</a> 6.4：Ribbon源码追踪</h2> <p><img src="/assets/img/image-20210817135810619.df41e884.png" alt="image-20210817135810619"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>LoadBalancerInterceptor
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/image-20210817135834178.f6459672.png" alt="image-20210817135834178"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>RibbonLoadBalancerClient
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/image-20210817140127081.878abe1f.png" alt="image-20210817140127081"></p> <p>负载均衡</p> <p><img src="/assets/img/image-20210817140537724.5e21b13a.png" alt="image-20210817140537724"></p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>Ribbon核心组件IRule：根据特定算法从服务列表中选取一个需要访问的服务；
其中IRule是一个接口，有七个自带的落地实现类，可以实现不同的负载均衡算法规则：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/assets/img/image-20210716160640128.4a1b49dd.png" alt="image-20210716160640128"></p> <p><strong>1 最可用策略    （并发最小）</strong></p> <p><strong>2可用过滤策略  （把不可用的过滤掉，可用的进行轮询）</strong></p> <p><strong>3权重响应时间策略  （根据平均响应时间）</strong></p> <p><strong>4重试策略</strong></p> <p><strong>5轮询策略     轮询</strong></p> <p><strong>6随机策略</strong></p> <p>**7zone回避策略  【区域回避策略】   轮询    **</p> <h2 id="_6-5-切换ribbon负载均衡策略"><a href="#_6-5-切换ribbon负载均衡策略" class="header-anchor">#</a> 6.5：切换Ribbon负载均衡策略</h2> <p><img src="/assets/img/image-20210817142501714.d83ef3db.png" alt="image-20210817142501714"></p> <p><img src="/assets/img/image-20210817142523916.8a8c0977.png" alt="image-20210817142523916"></p> <h2 id="_6-6-服务实例列表同步更新"><a href="#_6-6-服务实例列表同步更新" class="header-anchor">#</a> 6.6：服务实例列表同步更新</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>DynamicServerListLoadBalancer.updateListOfServers
//从nacos server获取最新的实例列表
NacosServerList.getServers
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>问题：服务消费者一旦成功调用一次，nacos server关闭后还能继续访问？</p> <p>定时任务每隔35秒更新覆盖本地缓存</p> <h1 id="七-nacos集群搭建"><a href="#七-nacos集群搭建" class="header-anchor">#</a> 七：nacos集群搭建</h1> <h2 id="_7-1-nacos集群架构"><a href="#_7-1-nacos集群架构" class="header-anchor">#</a> 7.1：nacos集群架构</h2> <p><img src="/assets/img/image-20210817150519355.2d2af5bc.png" alt="image-20210817150519355"></p> <h2 id="_7-2-nacos集群搭建"><a href="#_7-2-nacos集群搭建" class="header-anchor">#</a> 7.2：nacos集群搭建</h2> <blockquote><p>伪集群：一台服务器搭建3台nacos 通过端口进行区分</p></blockquote> <h3 id="_7-2-1-集群规划"><a href="#_7-2-1-集群规划" class="header-anchor">#</a> 7.2.1：集群规划</h3> <table><thead><tr><th>服务名</th> <th>ip</th> <th>端口</th> <th>备注</th></tr></thead> <tbody><tr><td>nacos实例1</td> <td>192.168.25.101</td> <td>8848</td> <td></td></tr> <tr><td>nacos实例2</td> <td>192.168.25.101</td> <td>8858</td> <td></td></tr> <tr><td>nacos实例3</td> <td>192.168.25.101</td> <td>8868</td> <td></td></tr> <tr><td>nginx</td> <td>192.168.25.101</td> <td>80</td> <td>反向代理nacos3个实例</td></tr> <tr><td>mysql</td> <td>192.168.25.101</td> <td>3306</td> <td>存储nacos数据</td></tr></tbody></table> <h3 id="_7-2-2-详细步骤"><a href="#_7-2-2-详细步骤" class="header-anchor">#</a> 7.2.2：详细步骤</h3> <p>第一步：上传nacos包到linux服务器并解压</p> <div class="language-she line-numbers-mode"><pre class="language-text"><code>tar -zxvf nacos-server-1.4.1.tar.gz -C /export/server/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>第二步：修改nacos数据源</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /export/server/nacos/conf/
<span class="token function">vim</span> application.properties
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/assets/img/image-20210202093842513.72c7f113.png" alt="image-20210202093842513"></p> <p>创建数据库及表</p> <p>第三步：修改/export/server/nacos/bin/startup.sh 的JAVA_OPT</p> <p><img src="/assets/img/image-20210719092644814.af50b03f.png" alt="image-20210719092644814"></p> <blockquote><p>虚拟机内存调大到2G</p></blockquote> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>原设置：
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -server -Xms2g -Xmx2g -Xmn1g -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span>
修改后：
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=160m&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>第四步：配置/export/server/nacos/conf/cluster.conf配置文件</p> <p>修改集群配置文件的文件名</p> <p>cp cluster.conf.example cluster.conf</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">192.168.25.101</span><span class="token punctuation">:</span><span class="token value attr-value">8848</span>
<span class="token key attr-name">192.168.25.101</span><span class="token punctuation">:</span><span class="token value attr-value">8858</span>
<span class="token key attr-name">192.168.25.101</span><span class="token punctuation">:</span><span class="token value attr-value">8868</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>第五步：复制三份，同时修改监听端口</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@zhuxm01 server<span class="token punctuation">]</span><span class="token comment"># cp nacos/   nacos8848 -r</span>
<span class="token punctuation">[</span>root@zhuxm01 server<span class="token punctuation">]</span><span class="token comment"># cp nacos/   nacos8858 -r</span>
<span class="token punctuation">[</span>root@zhuxm01 server<span class="token punctuation">]</span><span class="token comment"># cp nacos/   nacos8868 -r</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>第六步：分别启动nacos实例</p> <p>创建nacos-cluster-startup.sh</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sh</span> /export/server/nacos8848/bin/startup.sh
<span class="token function">sh</span> /export/server/nacos8858/bin/startup.sh
<span class="token function">sh</span> /export/server/nacos8868/bin/startup.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>第七步：测试</p> <div class="language-pro line-numbers-mode"><pre class="language-text"><code>spring.cloud.nacos.discovery.server-addr=192.168.234.122:8848,192.168.234.122:8858,192.168.234.122:8868
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>第八步：配置nginx反向代理（可选）</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>upstream  nacos-cluster <span class="token punctuation">{</span>
       server    <span class="token number">192.168</span>.<span class="token number">25.101</span><span class="token operator">:</span><span class="token number">8848</span>;
       server    <span class="token number">192.168</span>.<span class="token number">25.101</span><span class="token operator">:</span><span class="token number">8858</span>;
       server    <span class="token number">192.168</span>.<span class="token number">25.101</span><span class="token operator">:</span><span class="token number">8868</span>;
     <span class="token punctuation">}</span>

server <span class="token punctuation">{</span>
        listen       <span class="token number">80</span>;
        server_name  www.nacos.com;
        #charset koi8-r;
        #access_log  logs/host.access.log  main;
        location / <span class="token punctuation">{</span>
           proxy_pass http<span class="token operator">:</span><span class="token comment">//nacos-cluster/;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h1 id="八-spring-cloud-openfeign"><a href="#八-spring-cloud-openfeign" class="header-anchor">#</a> 八：Spring Cloud OpenFeign</h1> <blockquote><p>作为Spring Cloud的子项目之一，Spring Cloud OpenFeign 是一种声明式、模板化的 HTTP 客户端，在 Spring Cloud 中使用 OpenFeign，可以做到使用 HTTP请求远程服务时能与调用本地方法一样的编码体验，开发者完全感知不到这是远程方法，更感知不到这是个 HTTP 请求。同时OpenFeign通过集成Ribbon实现客户端的负载均衡</p></blockquote> <blockquote><p><strong>nacos: 注册中心</strong>，解决是服务的注册与发现</p> <p><strong>Ribbon：客户端负载均衡器</strong>，解决的是服务集群负载均衡的问题</p> <p><strong>OpenFeign：实现远程调用</strong>，声明式 HTTP 客户端 、代替Resttemplate组件</p></blockquote> <h2 id="_8-1-演示案例说明"><a href="#_8-1-演示案例说明" class="header-anchor">#</a> 8.1：演示案例说明</h2> <blockquote><p>cloud-order为服务消费者、cloud-jifen为服务提供者</p> <p>功能1：添加订单，生成一条积分记录</p> <p>功能2：修改订单，修改积分记录</p> <p>功能3：删除订单，删除积分记录</p> <p>功能4：查询订单，获取积分记录</p></blockquote> <h2 id="_8-2-新建积分微服务"><a href="#_8-2-新建积分微服务" class="header-anchor">#</a> 8.2：新建积分微服务</h2> <h3 id="_8-2-1-pom依赖"><a href="#_8-2-1-pom依赖" class="header-anchor">#</a> 8.2.1：pom依赖</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_8-2-2-application-properties"><a href="#_8-2-2-application-properties" class="header-anchor">#</a> 8.2.2：application.properties</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>jifen <span class="token comment">#服务名称，必须，保证唯一</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> www.nacos.com <span class="token comment">#指定nacos-server的地址</span>
        <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos
        <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> sit
        <span class="token key atrule">group</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>group
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9004</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_8-2-3-启动类"><a href="#_8-2-3-启动类" class="header-anchor">#</a> 8.2.3：启动类</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JifenApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">JifenApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_8-2-4-暴露接口"><a href="#_8-2-4-暴露接口" class="header-anchor">#</a> 8.2.4：暴露接口</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/jifen&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JifenController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Jifen</span> jifen<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;调用了积分保存接口&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jifen<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;isSuccess&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;save success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
 
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/update&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Jifen</span> jifen<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jifen<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;isSuccess&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;update success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 
    <span class="token punctuation">}</span>
 
 
 
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/delete&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> jifenId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;删除id为&quot;</span><span class="token operator">+</span>jifenId<span class="token operator">+</span><span class="token string">&quot;的积分信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;isSuccess&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;delete success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
 
 
 
 
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/{jifenId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Jifen</span> <span class="token function">findJifenById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> jifenId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;已经查询到&quot;</span><span class="token operator">+</span>jifenId<span class="token operator">+</span><span class="token string">&quot;积分数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Jifen</span><span class="token punctuation">(</span>jifenId<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span>jifenId<span class="token operator">+</span><span class="token string">&quot;号积分&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
 
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/search&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Jifen</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> uid<span class="token punctuation">,</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;uid:&quot;</span><span class="token operator">+</span>uid<span class="token operator">+</span><span class="token string">&quot;type:&quot;</span><span class="token operator">+</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Jifen</span><span class="token punctuation">(</span>uid<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/searchByEntity&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Jifen</span><span class="token punctuation">&gt;</span></span> <span class="token function">searchMap</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span>  <span class="token class-name">Jifen</span> jifen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jifen<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Jifen</span><span class="token punctuation">&gt;</span></span> jifens <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Jifen</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jifens<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Jifen</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">&quot;下单积分&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jifens<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Jifen</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">&quot;支付积分&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>  jifens<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Jifen</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> jifenId<span class="token punctuation">;</span>
    
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> count<span class="token punctuation">;</span>
    
    <span class="token keyword">private</span> <span class="token class-name">String</span> type<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Goods</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> goodsName<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResultVo</span> <span class="token punctuation">{</span>
    

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> success<span class="token punctuation">;</span>
    
    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> uid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> num<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> type<span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_8-3-openfeign使用"><a href="#_8-3-openfeign使用" class="header-anchor">#</a> 8.3：Openfeign使用</h2> <p>远程调用，order会用，其它的微服务也会用</p> <h3 id="_8-3-1-openfeign依赖"><a href="#_8-3-1-openfeign依赖" class="header-anchor">#</a> 8.3.1：openfeign依赖</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="/assets/img/image-20210202105915087.bef5b82b.png" alt="image-20210202105915087"></p> <h3 id="_8-3-2-开启openfeign"><a href="#_8-3-2-开启openfeign" class="header-anchor">#</a> 8.3.2：开启openfeign</h3> <p><img src="/assets/img/image-20210817162423528.a00521e1.png" alt="image-20210817162423528"></p> <h3 id="_8-3-3-接口声明"><a href="#_8-3-3-接口声明" class="header-anchor">#</a> 8.3.3：接口声明</h3> <p><img src="/assets/img/image-20210817163043484.db029b6b.png" alt="image-20210817163043484"></p> <h3 id="_8-3-4-接口调用"><a href="#_8-3-4-接口调用" class="header-anchor">#</a> 8.3.4：接口调用</h3> <p>扫描openfeign接口</p> <p><img src="/assets/img/image-20210817163230467.a0515739.png" alt="image-20210817163230467"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JifenApi</span> iifenApi<span class="token punctuation">;</span>


    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;test1&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token comment">//通过openfeign远程调用 cloud-jifen服务的/jifen/save接口</span>
        <span class="token class-name">Jifen</span> jifen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jifen</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//url:http://cloud-jifen/jifen/save</span>
        <span class="token class-name">Map</span> save <span class="token operator">=</span> iifenApi<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>jifen<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span>  save<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_8-4-openfeign常用配置-内部集成了ribbon"><a href="#_8-4-openfeign常用配置-内部集成了ribbon" class="header-anchor">#</a> 8.4：Openfeign常用配置   （内部集成了Ribbon）</h2> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring</span><span class="token punctuation">:</span>
<span class="token key attr-name">  application</span><span class="token punctuation">:</span>
<span class="token key attr-name">    name</span><span class="token punctuation">:</span> <span class="token value attr-value">cloud-order #服务名称，必须，保证唯一</span>
<span class="token key attr-name">  cloud</span><span class="token punctuation">:</span>
<span class="token key attr-name">    nacos</span><span class="token punctuation">:</span>
<span class="token key attr-name">      discovery</span><span class="token punctuation">:</span>
<span class="token key attr-name">        server-addr</span><span class="token punctuation">:</span> <span class="token value attr-value">www.nacos.com #指定nacos-server的地址</span>
<span class="token key attr-name">        username</span><span class="token punctuation">:</span> <span class="token value attr-value">nacos</span>
<span class="token key attr-name">        password</span><span class="token punctuation">:</span> <span class="token value attr-value">nacos</span>
<span class="token key attr-name">        namespace</span><span class="token punctuation">:</span> <span class="token value attr-value">sit</span>
<span class="token key attr-name">        group</span><span class="token punctuation">:</span> <span class="token value attr-value">my-group</span>
<span class="token key attr-name">server</span><span class="token punctuation">:</span>
<span class="token key attr-name">  port</span><span class="token punctuation">:</span> <span class="token value attr-value">9002</span>
<span class="token key attr-name">ribbon</span><span class="token punctuation">:</span>
<span class="token key attr-name">  eager-load</span><span class="token punctuation">:</span>        <span class="token value attr-value">#饥饿加载         </span>
<span class="token key attr-name">    enabled</span><span class="token punctuation">:</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">    clients</span><span class="token punctuation">:</span>
<span class="token key attr-name">      -</span> <span class="token value attr-value">cloud-jifen</span>
<span class="token key attr-name">      -</span> <span class="token value attr-value">cloud-goods</span>
<span class="token key attr-name">feign</span><span class="token punctuation">:</span>
<span class="token key attr-name">  client</span><span class="token punctuation">:</span>
<span class="token key attr-name">    config</span><span class="token punctuation">:</span>
<span class="token key attr-name">      cloud-jifen</span><span class="token punctuation">:</span>
<span class="token key attr-name">        connect-timeout</span><span class="token punctuation">:</span> <span class="token value attr-value">1000</span>
<span class="token key attr-name">        read-timeout</span><span class="token punctuation">:</span> <span class="token value attr-value">1  #设置ali-jifen相应的超时时间为1毫秒</span>
<span class="token key attr-name">      default</span><span class="token punctuation">:</span> <span class="token value attr-value">#设置默认的超时时间</span>
<span class="token key attr-name">        connect-timeout</span><span class="token punctuation">:</span> <span class="token value attr-value">1000</span>
<span class="token key attr-name">        read-timeout</span><span class="token punctuation">:</span> <span class="token value attr-value">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h1 id="九-nacos配置中心"><a href="#九-nacos配置中心" class="header-anchor">#</a> 九：Nacos配置中心</h1> <blockquote><p>小结：</p> <p>naocs：注册中心，服务的注册与发现</p> <p>Ribbon：客户端负载均衡器，服务集群的负载均衡</p> <p>Openfeign：发起远程调用，声明式的HTTP客户端，解决服务间的远程调用</p> <p>naocs：配置中心</p></blockquote> <h2 id="_9-1-为什么使用配置中心"><a href="#_9-1-为什么使用配置中心" class="header-anchor">#</a> 9.1：为什么使用配置中心</h2> <p>配置中心：统一的管理入口</p> <h2 id="_9-2-主流配置中心对比"><a href="#_9-2-主流配置中心对比" class="header-anchor">#</a> 9.2：主流配置中心对比</h2> <p><strong>目前市面上用的比较多的配置中心有：Spring Cloud Config、Apollo、Nacos</strong>和Disconf等。
由于Disconf不再维护，下面主要对比一下Spring Cloud Config、Apollo和Nacos。</p> <table><thead><tr><th>对比项目</th> <th>Spring Cloud Config</th> <th>Apollo</th> <th>Nacos</th></tr></thead> <tbody><tr><td>配置实时推送</td> <td>支持（Spring Cloud Bus）</td> <td>支持(HTTP长轮询1s内)</td> <td>支持(HTTP长轮询1s内)</td></tr> <tr><td>版本管理</td> <td>支持（Git）</td> <td>支持</td> <td>支持</td></tr> <tr><td>配置回滚</td> <td>（Git）支持</td> <td>支持</td> <td>支持</td></tr> <tr><td>灰度发布</td> <td>支持</td> <td>支持</td> <td>支持</td></tr> <tr><td>权限管理</td> <td>支持（依赖Git）</td> <td>支持</td> <td>支持</td></tr> <tr><td>多集群</td> <td>支持</td> <td>支持</td> <td>支持</td></tr> <tr><td>多环境</td> <td>支持</td> <td>支持</td> <td>支持</td></tr> <tr><td>监听查询</td> <td>支持</td> <td>支持</td> <td>支持</td></tr> <tr><td>多语言</td> <td>只支持Java</td> <td>主流语言，提供了Open API</td> <td>主流语言，提供了Open API</td></tr> <tr><td>配置格式校验</td> <td>不支持</td> <td>支持</td> <td>支持</td></tr> <tr><td>单机读(QPS)</td> <td>7（限流所致）</td> <td>9000</td> <td>15000</td></tr> <tr><td>单机写(QPS)</td> <td>5（限流所致）</td> <td>1100</td> <td>1800</td></tr> <tr><td>3节点读(QPS)</td> <td>21（限流所致）</td> <td>27000</td> <td>45000</td></tr> <tr><td>3节点写(QPS)</td> <td>5（限流所致）</td> <td>3300</td> <td>5600</td></tr></tbody></table> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>从配置中心角度来看，性能方面Nacos的读写性能最高，Apollo次之，Spring Cloud Config依赖Git场景不适合开放的大规模自动化运维API。
功能方面Apollo最为完善，nacos具有Apollo大部分配置管理功能，而Spring CloudConfig不带运维管理界面，需要自行开发。
Nacos的一大优势是整合了注册中心、配置中心功能，部署和操作相比Apollo都要直观简单，因此它简化了架构复杂度，并减轻运维及部署工作。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>nacos config 官网：https://github.com/alibaba/spring-cloud-alibaba/wiki/Nacos-config</p> <h2 id="_9-3-配置管理领域模型"><a href="#_9-3-配置管理领域模型" class="header-anchor">#</a> 9.3：配置管理领域模型</h2> <p><img src="/assets/img/image-20201101203849080.9bc78cdc.png" alt="image-20201101203849080"></p> <h2 id="_9-4-配置中心入门使用"><a href="#_9-4-配置中心入门使用" class="header-anchor">#</a> 9.4：配置中心入门使用</h2> <p>1：创建文件</p> <p><img src="/assets/img/image-20210818105637846.865c2a43.png" alt="image-20210818105637846"></p> <p><img src="/assets/img/image-20210818105858696.708de199.png" alt="image-20210818105858696"></p> <p><img src="/assets/img/image-20210818105927559.6fd29767.png" alt="image-20210818105927559"></p> <p>2：服务端加载配置信息</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token comment">#从配置中心加载配置文件</span>
<span class="token comment">#文件名是通过公式来拼接${prefix}-${spring.profiles.active}.${file-extension}</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> sit
        <span class="token key atrule">group</span><span class="token punctuation">:</span> DEFAULT_GROUP
        <span class="token key atrule">prefix</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>jifen
        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yml
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> sit


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_9-5-多环境切换"><a href="#_9-5-多环境切换" class="header-anchor">#</a> 9.5：多环境切换</h2> <p>测试环境</p> <p>cloud-jifen-sit.yml</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>jifen <span class="token comment">#服务名称，必须，保证唯一</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#指定nacos-server的地址</span>
        <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos
        <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> sit
        <span class="token key atrule">group</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>group
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9004</span>



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>生产环境cloud-jifen-pro.yml</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>jifen <span class="token comment">#服务名称，必须，保证唯一</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#指定nacos-server的地址</span>
        <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos
        <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> pro
        <span class="token key atrule">group</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>group
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9008</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>环境切换</p> <p><img src="/assets/img/image-20210818113759160.31d47341.png" alt="image-20210818113759160"></p> <h3 id="全局环境切换-常用"><a href="#全局环境切换-常用" class="header-anchor">#</a> 全局环境切换     （常用）</h3> <p>父工程中定义环境变量</p> <p><img src="/assets/img/image-20210904104615186.16d4df4b.png" alt="image-20210904104615186"></p> <p>在各个微服务中引用变量</p> <p><img src="/assets/img/image-20210904104645680.c53cc8b1.png" alt="image-20210904104645680"></p> <h2 id="_9-6-nacos配置动态刷新"><a href="#_9-6-nacos配置动态刷新" class="header-anchor">#</a> 9.6：nacos配置动态刷新</h2> <blockquote><p>动态刷新：不停机动态修改配置,立即生效</p></blockquote> <p><img src="/assets/img/image-20210818114421971.c7dd8b8e.png" alt="image-20210818114421971"></p> <h2 id="_9-7-动态刷新连接池大小"><a href="#_9-7-动态刷新连接池大小" class="header-anchor">#</a> 9.7：动态刷新连接池大小</h2> <p>cloud-jifen整合mybatis</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token comment">&lt;!-- mybatis的起步依赖--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--    mysql驱动    --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--   druid     --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring</span><span class="token punctuation">:</span>
<span class="token key attr-name">  datasource</span><span class="token punctuation">:</span>
<span class="token key attr-name">    druid</span><span class="token punctuation">:</span>
<span class="token key attr-name">      driver-class-name</span><span class="token punctuation">:</span> <span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">      username</span><span class="token punctuation">:</span> <span class="token value attr-value">root</span>
<span class="token key attr-name">      password</span><span class="token punctuation">:</span> <span class="token value attr-value">123456</span>
<span class="token key attr-name">      url</span><span class="token punctuation">:</span> <span class="token value attr-value">jdbc:mysql://127.0.0.1:3306/fengmi_mall?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false</span>
<span class="token key attr-name">      max-active</span><span class="token punctuation">:</span> <span class="token value attr-value">60 #连接池配置</span>
      

<span class="token comment">#配置mybatis相关信息</span>
<span class="token key attr-name">mybatis.mapper-locations</span><span class="token punctuation">=</span><span class="token value attr-value">/mappers/*.xml</span>
<span class="token key attr-name">mybatis.configuration.map-underscore-to-camel-case</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">mybatis.type-aliases-package</span><span class="token punctuation">=</span><span class="token value attr-value">com.qf.entity</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_9-8-nacos共享配置"><a href="#_9-8-nacos共享配置" class="header-anchor">#</a> 9.8：nacos共享配置</h2> <p>1.新建共享配置</p> <p>common.yml</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">druid</span><span class="token punctuation">:</span>
      <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
      <span class="token key atrule">username</span><span class="token punctuation">:</span> root
      <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
      <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/fengmi_mall<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=utf8&amp;useSSL=false</span>
      <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">100</span> <span class="token comment">#连接池配置</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#指定nacos-server的地址</span>
        <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos
        <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> pro
        <span class="token key atrule">group</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>group
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>cloud-jifen个性配置</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>jifen <span class="token comment">#服务名称，必须，保证唯一</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9008</span>
<span class="token key atrule">pic</span><span class="token punctuation">:</span>
  <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.baidu.com

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>2.加载共享配置</p> <p><img src="/assets/img/image-20221115104836807.e97154fa.png" alt="image-20221115104836807"></p> <h2 id="_9-9-配置文件版本管理"><a href="#_9-9-配置文件版本管理" class="header-anchor">#</a> 9.9：配置文件版本管理</h2> <p><img src="/assets/img/image-20210818120648847.0b6d2b4e.png" alt="image-20210818120648847"></p> <p>nacos:注册中心和配置中心--&gt;工作流程</p> <p>ribbon:客户端负载均衡器  --&gt;ribbon工作流程   ip:port   双层Map</p> <p>feign:远程调用(声明式http客户端)</p> <p>RestTemplate：Spring提供的发送http请求的工具类  @LoadBalance</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2024/4/13</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/框架/Spring全家桶/SpringCloudAlibaba/SpringCloud-Gateway.html">
          GateWay
        </a>
        →
      </span></p></div> </main></div> <aside class="page-sidebar"> <div class="page-side-toolbar"><div class="option-box-toc-fixed"><div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:650px"><div style="font-weight:bold;text-align:center;">Nacos</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-0-单体架构" class="toc-sidebar-link">1.0：单体架构</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-1-微服务架构" class="toc-sidebar-link">1.1：微服务架构</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-2-微服务架构的优势" class="toc-sidebar-link">1.2：微服务架构的优势</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-3-微服务架构的缺点-挑战" class="toc-sidebar-link">1.3：微服务架构的缺点(挑战)</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-4-springcloud与微服务关系" class="toc-sidebar-link">1.4：SpringCloud与微服务关系</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-5-springboot和springcloud关系" class="toc-sidebar-link">1.5：SpringBoot和SpringCloud关系</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_2-1-服务注册与发现" class="toc-sidebar-link">2.1：服务注册与发现</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_2-2-注册中心对比" class="toc-sidebar-link">2.2：注册中心对比</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_3-1-nacos功能与架构" class="toc-sidebar-link">3.1：nacos功能与架构</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_3-2-nacos安装" class="toc-sidebar-link">3.2：nacos安装</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_3-2-nacos注册中心工作流程" class="toc-sidebar-link">3.2：nacos注册中心工作流程</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-1-boot与cloud版本" class="toc-sidebar-link">4.1：boot与cloud版本</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-2-springcloud-alibaba" class="toc-sidebar-link">4.2：SpringCloud-alibaba</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-3-确定版本" class="toc-sidebar-link">4.3：确定版本</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-4-创建父工程" class="toc-sidebar-link">4.4：创建父工程</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-5-服务提供者" class="toc-sidebar-link">4.5：服务提供者</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-5-1-pom-xml" class="toc-sidebar-link">4.5.1：pom.xml</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-5-2-application-yml" class="toc-sidebar-link">4.5.2：application.yml</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-5-3-启动类加注解" class="toc-sidebar-link">4.5.3：启动类加注解</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-5-4-查询商品接口" class="toc-sidebar-link">4.5.4：查询商品接口</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-6-服务消费者" class="toc-sidebar-link">4.6：服务消费者</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-6-1-pom-xml" class="toc-sidebar-link">4.6.1：pom.xml</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-6-2-application-yml" class="toc-sidebar-link">4.6.2：application.yml</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-6-3-启动类加注解" class="toc-sidebar-link">4.6.3：启动类加注解</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-6-4-保存订单接口" class="toc-sidebar-link">4.6.4：保存订单接口</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-7-微服务集群演示" class="toc-sidebar-link">4.7：微服务集群演示</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-8-nacos领域模型" class="toc-sidebar-link">4.8：nacos领域模型    ()</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_5-1-resttemplate简介" class="toc-sidebar-link">5.1：RestTemplate简介</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_5-2-forobject" class="toc-sidebar-link">5.2：ForObject</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_5-3-forentity" class="toc-sidebar-link">5.3：ForEntity</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-1-ribbon简介" class="toc-sidebar-link">6.1：Ribbon简介</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-2-ribbon在项目中怎么使用" class="toc-sidebar-link">6.2：Ribbon在项目中怎么使用</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-3-ribbon的工作流程-重点" class="toc-sidebar-link">6.3：Ribbon的工作流程   （重点）</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-4-ribbon源码追踪" class="toc-sidebar-link">6.4：Ribbon源码追踪</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-5-切换ribbon负载均衡策略" class="toc-sidebar-link">6.5：切换Ribbon负载均衡策略</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-6-服务实例列表同步更新" class="toc-sidebar-link">6.6：服务实例列表同步更新</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_7-1-nacos集群架构" class="toc-sidebar-link">7.1：nacos集群架构</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_7-2-nacos集群搭建" class="toc-sidebar-link">7.2：nacos集群搭建</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_7-2-1-集群规划" class="toc-sidebar-link">7.2.1：集群规划</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_7-2-2-详细步骤" class="toc-sidebar-link">7.2.2：详细步骤</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-1-演示案例说明" class="toc-sidebar-link">8.1：演示案例说明</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-2-新建积分微服务" class="toc-sidebar-link">8.2：新建积分微服务</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-2-1-pom依赖" class="toc-sidebar-link">8.2.1：pom依赖</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-2-2-application-properties" class="toc-sidebar-link">8.2.2：application.properties</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-2-3-启动类" class="toc-sidebar-link">8.2.3：启动类</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-2-4-暴露接口" class="toc-sidebar-link">8.2.4：暴露接口</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-3-openfeign使用" class="toc-sidebar-link">8.3：Openfeign使用</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-3-1-openfeign依赖" class="toc-sidebar-link">8.3.1：openfeign依赖</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-3-2-开启openfeign" class="toc-sidebar-link">8.3.2：开启openfeign</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-3-3-接口声明" class="toc-sidebar-link">8.3.3：接口声明</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-3-4-接口调用" class="toc-sidebar-link">8.3.4：接口调用</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-4-openfeign常用配置-内部集成了ribbon" class="toc-sidebar-link">8.4：Openfeign常用配置   （内部集成了Ribbon）</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-1-为什么使用配置中心" class="toc-sidebar-link">9.1：为什么使用配置中心</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-2-主流配置中心对比" class="toc-sidebar-link">9.2：主流配置中心对比</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-3-配置管理领域模型" class="toc-sidebar-link">9.3：配置管理领域模型</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-4-配置中心入门使用" class="toc-sidebar-link">9.4：配置中心入门使用</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-5-多环境切换" class="toc-sidebar-link">9.5：多环境切换</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#全局环境切换-常用" class="toc-sidebar-link">全局环境切换     （常用）</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-6-nacos配置动态刷新" class="toc-sidebar-link">9.6：nacos配置动态刷新</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-7-动态刷新连接池大小" class="toc-sidebar-link">9.7：动态刷新连接池大小</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-8-nacos共享配置" class="toc-sidebar-link">9.8：nacos共享配置</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-9-配置文件版本管理" class="toc-sidebar-link">9.9：配置文件版本管理</a><ul class="toc-sidebar-sub-headers"></ul></li></ul></div></div></div></div></div> <div class="option-box-toc-over"><img src="/images/system/toc.png" class="nozoom"> <span class="show-txt">目录</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:550px"><div style="font-weight:bold;text-align:center;">Nacos</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-0-单体架构" class="toc-sidebar-link">1.0：单体架构</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-1-微服务架构" class="toc-sidebar-link">1.1：微服务架构</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-2-微服务架构的优势" class="toc-sidebar-link">1.2：微服务架构的优势</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-3-微服务架构的缺点-挑战" class="toc-sidebar-link">1.3：微服务架构的缺点(挑战)</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-4-springcloud与微服务关系" class="toc-sidebar-link">1.4：SpringCloud与微服务关系</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_1-5-springboot和springcloud关系" class="toc-sidebar-link">1.5：SpringBoot和SpringCloud关系</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_2-1-服务注册与发现" class="toc-sidebar-link">2.1：服务注册与发现</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_2-2-注册中心对比" class="toc-sidebar-link">2.2：注册中心对比</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_3-1-nacos功能与架构" class="toc-sidebar-link">3.1：nacos功能与架构</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_3-2-nacos安装" class="toc-sidebar-link">3.2：nacos安装</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_3-2-nacos注册中心工作流程" class="toc-sidebar-link">3.2：nacos注册中心工作流程</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-1-boot与cloud版本" class="toc-sidebar-link">4.1：boot与cloud版本</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-2-springcloud-alibaba" class="toc-sidebar-link">4.2：SpringCloud-alibaba</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-3-确定版本" class="toc-sidebar-link">4.3：确定版本</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-4-创建父工程" class="toc-sidebar-link">4.4：创建父工程</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-5-服务提供者" class="toc-sidebar-link">4.5：服务提供者</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-5-1-pom-xml" class="toc-sidebar-link">4.5.1：pom.xml</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-5-2-application-yml" class="toc-sidebar-link">4.5.2：application.yml</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-5-3-启动类加注解" class="toc-sidebar-link">4.5.3：启动类加注解</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-5-4-查询商品接口" class="toc-sidebar-link">4.5.4：查询商品接口</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-6-服务消费者" class="toc-sidebar-link">4.6：服务消费者</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-6-1-pom-xml" class="toc-sidebar-link">4.6.1：pom.xml</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-6-2-application-yml" class="toc-sidebar-link">4.6.2：application.yml</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-6-3-启动类加注解" class="toc-sidebar-link">4.6.3：启动类加注解</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-6-4-保存订单接口" class="toc-sidebar-link">4.6.4：保存订单接口</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-7-微服务集群演示" class="toc-sidebar-link">4.7：微服务集群演示</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_4-8-nacos领域模型" class="toc-sidebar-link">4.8：nacos领域模型    ()</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_5-1-resttemplate简介" class="toc-sidebar-link">5.1：RestTemplate简介</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_5-2-forobject" class="toc-sidebar-link">5.2：ForObject</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_5-3-forentity" class="toc-sidebar-link">5.3：ForEntity</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-1-ribbon简介" class="toc-sidebar-link">6.1：Ribbon简介</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-2-ribbon在项目中怎么使用" class="toc-sidebar-link">6.2：Ribbon在项目中怎么使用</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-3-ribbon的工作流程-重点" class="toc-sidebar-link">6.3：Ribbon的工作流程   （重点）</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-4-ribbon源码追踪" class="toc-sidebar-link">6.4：Ribbon源码追踪</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-5-切换ribbon负载均衡策略" class="toc-sidebar-link">6.5：切换Ribbon负载均衡策略</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_6-6-服务实例列表同步更新" class="toc-sidebar-link">6.6：服务实例列表同步更新</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_7-1-nacos集群架构" class="toc-sidebar-link">7.1：nacos集群架构</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_7-2-nacos集群搭建" class="toc-sidebar-link">7.2：nacos集群搭建</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_7-2-1-集群规划" class="toc-sidebar-link">7.2.1：集群规划</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_7-2-2-详细步骤" class="toc-sidebar-link">7.2.2：详细步骤</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-1-演示案例说明" class="toc-sidebar-link">8.1：演示案例说明</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-2-新建积分微服务" class="toc-sidebar-link">8.2：新建积分微服务</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-2-1-pom依赖" class="toc-sidebar-link">8.2.1：pom依赖</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-2-2-application-properties" class="toc-sidebar-link">8.2.2：application.properties</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-2-3-启动类" class="toc-sidebar-link">8.2.3：启动类</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-2-4-暴露接口" class="toc-sidebar-link">8.2.4：暴露接口</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-3-openfeign使用" class="toc-sidebar-link">8.3：Openfeign使用</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-3-1-openfeign依赖" class="toc-sidebar-link">8.3.1：openfeign依赖</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-3-2-开启openfeign" class="toc-sidebar-link">8.3.2：开启openfeign</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-3-3-接口声明" class="toc-sidebar-link">8.3.3：接口声明</a></li><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-3-4-接口调用" class="toc-sidebar-link">8.3.4：接口调用</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_8-4-openfeign常用配置-内部集成了ribbon" class="toc-sidebar-link">8.4：Openfeign常用配置   （内部集成了Ribbon）</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-1-为什么使用配置中心" class="toc-sidebar-link">9.1：为什么使用配置中心</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-2-主流配置中心对比" class="toc-sidebar-link">9.2：主流配置中心对比</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-3-配置管理领域模型" class="toc-sidebar-link">9.3：配置管理领域模型</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-4-配置中心入门使用" class="toc-sidebar-link">9.4：配置中心入门使用</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-5-多环境切换" class="toc-sidebar-link">9.5：多环境切换</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#全局环境切换-常用" class="toc-sidebar-link">全局环境切换     （常用）</a></li></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-6-nacos配置动态刷新" class="toc-sidebar-link">9.6：nacos配置动态刷新</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-7-动态刷新连接池大小" class="toc-sidebar-link">9.7：动态刷新连接池大小</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-8-nacos共享配置" class="toc-sidebar-link">9.8：nacos共享配置</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html#_9-9-配置文件版本管理" class="toc-sidebar-link">9.9：配置文件版本管理</a><ul class="toc-sidebar-sub-headers"></ul></li></ul></div></div></div></div></div> <div class="option-box"><img src="/images/system/wechat.png" class="nozoom"> <span class="show-txt">手机看</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.9rem">微信扫一扫</span> <img height="180px" src="https://api.qrserver.com/v1/create-qr-code/?data=https://tec.hjcwzx.top/%E6%A1%86%E6%9E%B6/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloudAlibaba/Nacos.html" style="margin:10px;">
                可以<b>手机看</b>或分享至<b>朋友圈</b></div></div></div></div> <div class="option-box"><img src="/images/system/toggle.png" width="30px" class="nozoom"> <span class="show-txt">左栏</span></div> <div class="option-box"><img src="/images/system/xingqiu.png" width="25px" class="nozoom"> <span class="show-txt">星球</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><img height="180px" src="/images/personal/xingqiu.png" style="margin:10px;"> <b>知识星球</b>：技术侦探
            </div></div></div></div> <div class="option-box"><img src="/images/system/wexin4.png" width="25px" class="nozoom"> <span class="show-txt">交流</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.8rem;font-weight:bold;">添加微信一起学习交流</span> <img src="/images/personal/weixin.png" height="180px" style="margin:10px;">
                PS：添加时请备注<b>技术侦探</b>，谢谢！
              </div></div></div></div> <div class="option-box"><img src="/images/system/heart-1.png" width="25px" class="nozoom"> <span class="show-txt">支持我</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.8rem;font-weight:bold;">鼓励/支持/赞赏我</span> <img height="180px" src="/images/personal/encourage-head.png" style="margin:5px;"> <br>1. 不靠它生存但仍希望得到你的鼓励；
                <br>2. 时刻警醒自己保持技术人的初心，沉淀，分享，成长；
              </div></div></div></div> <!----> <div title="GateWay" class="option-box" style="padding-left:2px;text-align:center;"><a href="/框架/Spring全家桶/SpringCloudAlibaba/SpringCloud-Gateway.html"><img src="/images/system/next2.png" width="30px" class="nozoom"> <span class="show-txt">下一篇</span></a></div></div>  <div class="page-side-sitemap"><div class="option-box"><img src="/images/system/sitemap.png" class="nozoom img"> <span class="show-txt">站点图</span> <div class="sitemap-container"><h4>站点导航图
              <a href="/更新日志/更新日志.html" class="sitemap-top-link"> 更新日志</a></h4> <table class="sitemap-table"><tr><td nowrap="nowrap"><div class="sitemap-col-group">常用搜索</div></td> <td><div class="sitemap-col-item"><a href="http://www.baidu.com/" target="_blank" title="百度">
          百度
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.google.com/" target="_blank" title="Google">
          Google
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.bing.com/" target="_blank" title="Bing">
          Bing
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://github.com" target="_blank" title="Github">
          Github
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.programcreek.com/java-api-examples/index.php" target="_blank" title="搜代码">
          搜代码
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></td> <!----></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">技术社区</div></td> <td><div class="sitemap-col-item"><a href="http://www.csdn.net/" target="_blank" title="CDSN">
          CDSN
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="http://www.cnblogs.com/" target="_blank" title="博客园">
          博客园
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.oschina.net" target="_blank" title="OSChina">
          OSChina
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://segmentfault.com/" target="_blank" title="思否">
          思否
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://juejin.im" target="_blank" title="掘金">
          掘金
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.linuxidc.com/" target="_blank" title="Linux公社">
          Linux公社
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://www.ibm.com/developerworks/cn/" target="_blank" title="IBM 开发者">
          IBM 开发者
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="sitemap-col-item"><a href="https://stackoverflow.com" target="_blank" title="StackOverflow">
          StackOverflow
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></td> <!----></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">Java相关</div></td> <!----> <td><a href="/java/javaSE基础/01_Java入门与开发环境搭建.html" class="sitemap-col-item">
          JavaSE基础
        </a><a href="/java/JavaSE高级/01_IO.html" class="sitemap-col-item">
          JavaSE高级
        </a><a href="/java/javaWeb/01_Web开发基础.html" class="sitemap-col-item">
          JavaWeb
        </a><a href="/java/JUC/1、JUC概述.html" class="sitemap-col-item">
          JUC
        </a><a href="/java/补充/JVM.html" class="sitemap-col-item">
          JVM
        </a><a href="/java/补充/枚举.html" class="sitemap-col-item">
          ENUM
        </a><a href="/java/补充/线程池.html" class="sitemap-col-item">
          线程池
        </a><a href="/java/补充/自定义注解.html" class="sitemap-col-item">
          自定义注解
        </a><a href="/java/响应式编程/前置知识.html" class="sitemap-col-item">
          响应式编程
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">Spring</div></td> <!----> <td><a href="/框架/Mybatis/01_MyBatis快速入门.html" class="sitemap-col-item">
          Mybatis
        </a><a href="/框架/Mybatis/03_MybatisPlus.html" class="sitemap-col-item">
          Mybatis Plus
        </a><a href="/框架/Spring全家桶/Spring/01_SpringIOC和DI.html" class="sitemap-col-item">
          Spring
        </a><a href="/框架/Spring全家桶/SpringMVC/01_SpringMVC快速入门及解析.html" class="sitemap-col-item">
          Spring MVC
        </a><a href="/框架/Spring全家桶/SpringBoot/01_SpringBoot_入门.html" class="sitemap-col-item">
          Spring Boot
        </a><a href="/框架/Spring全家桶/SpringCloudAlibaba/Nacos.html" class="sitemap-col-item">
          Spring Cloud Alibaba
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">中间件&amp;插件</div></td> <!----> <td><a href="/中间件/maven/01_Maven基础.html" class="sitemap-col-item">
          Maven中央仓库
        </a><a href="/中间件/ElasticSearch/ElasticSearch.html" class="sitemap-col-item">
          ElasticSearch
        </a><a href="/中间件/redis/Redis笔记全.html" class="sitemap-col-item">
          Redis
        </a><a href="/中间件/redis/布隆过滤器.html" class="sitemap-col-item">
          布隆过滤器
        </a><a href="/中间件/rocketMq/RocketMQ.html" class="sitemap-col-item">
          RocketMQ.
        </a><a href="/中间件/git/笔记.html" class="sitemap-col-item">
          git
        </a><a href="/中间件/自定义Starter/自定义starter.html" class="sitemap-col-item">
          自定义starter
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">运维</div></td> <!----> <td><a href="/部署/nginx/Nginx.html" class="sitemap-col-item">
          Nginx
        </a><a href="/部署/docker/docker.html" class="sitemap-col-item">
          Docker
        </a><a href="/部署/linux/01_Linux_安装.html" class="sitemap-col-item">
          Linux
        </a><a href="/部署/vm/linux安装centos.html" class="sitemap-col-item">
          VM Ware
        </a></td></tr><tr><td nowrap="nowrap"><div class="sitemap-col-group">面向对象</div></td> <!----> <td><a href="/设计模式/创建型模式/" class="sitemap-col-item">
          设计模式
        </a></td></tr></table></div></div></div> <!----> </aside></div><div class="global-ui"><div class="read-more-wrap" style="display:none;position:absolute;bottom:0px;z-index:9999;width:100%;margin-top:-100px;font-family:PingFangSC-Regular, sans-serif;"><div id="read-more-mask" style="position: relative; height: 200px; background: -webkit-gradient(linear, 0 0%, 0 100%, from(rgba(255, 255, 255, 0)), to(rgb(255, 255, 255)));"></div> <a id="read-more-btn" target="_self" style="position: absolute; left: 50%; top: 70%; bottom: 30px;\n        transform: translate(-50%, -50%); width: 160px; height: 36px;\n         line-height: 36px; font-size: 15px; text-align: center;\n          border: 1px solid rgb(222, 104, 109); color: rgb(222, 104, 109);\n           background: rgb(255, 255, 255); cursor: pointer; border-radius: 6px;">阅读全文</a> <div id="btw-modal-wrap" style="display: none;"><div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0);"></div> <div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;"><span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 34px; font-size: 34px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">×</span> <p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px;">
            微信扫码或搜索：<span style="color: #E9405A; font-weight: bold;">智慧对话的未来</span> <br>发送：<span id="hutec-token" class="token" style="color: #e9415a; font-weight: bold; font-size: 17px; margin-bottom: 45px;">}</span> <br>即可<span style="color: #e9415a; font-weight: bold;">立即永久</span>解锁本站全部文章</p> <img src="/images/personal/qrcode.png" style="width: 180px; margin-top: 10px; margin-bottom: 30px; border: 8px solid rgb(230, 230, 230);"></div></div></div></div></div>
    <script src="/assets/js/cg-styles.js?v=1718377004316" defer></script><script src="/assets/js/cg-4.js?v=1718377004316" defer></script><script src="/assets/js/cg-16.js?v=1718377004316" defer></script><script src="/assets/js/cg-1.js?v=1718377004316" defer></script><script src="/assets/js/cg-86.js?v=1718377004316" defer></script><script src="/assets/js/cg-app.js?v=1718377004316" defer></script>
  </body>
</html>
