(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{1021:function(s,a,t){s.exports=t.p+"assets/img/image-20240611235726806.5142e91a.png"},1022:function(s,a,t){s.exports=t.p+"assets/img/image-20240611235830942.fa46aeb2.png"},1023:function(s,a,t){s.exports=t.p+"assets/img/image-20240611235937278.efd1184d.png"},1024:function(s,a,t){s.exports=t.p+"assets/img/image-20240612000011591.6e074f28.png"},1025:function(s,a,t){s.exports=t.p+"assets/img/image-20240612000043044.780dee40.png"},1026:function(s,a,t){s.exports=t.p+"assets/img/image-20240612000129486.d37d6bba.png"},1027:function(s,a,t){s.exports=t.p+"assets/img/image-20240612000116442.4ece9c41.png"},1028:function(s,a,t){s.exports=t.p+"assets/img/image-20240611235355563.8ccc224e.png"},1029:function(s,a,t){s.exports=t.p+"assets/img/image-20240611235406762.12449e16.png"},1030:function(s,a,t){s.exports=t.p+"assets/img/image-20240611235424277.ec861d31.png"},1568:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"使用阿里云本地镜像库拉取镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用阿里云本地镜像库拉取镜像"}},[s._v("#")]),s._v(" 使用阿里云本地镜像库拉取镜像")]),s._v(" "),a("h2",{attrs:{id:"搭建阿里云本地docker镜像库环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建阿里云本地docker镜像库环境"}},[s._v("#")]),s._v(" 搭建阿里云本地docker镜像库环境")]),s._v(" "),a("p",[s._v("登录阿里云容器镜像服务\nhttps://cr.console.aliyun.com/")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("启用个人实例，创建一个命名空间（ALIYUN_NAME_SPACE）\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:t(1021),alt:"image-20240611235726806"}})]),s._v(" "),a("p",[s._v("访问凭证–>获取环境变量")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("用户名(ALIYUN_REGISTRY_USER)\n密码(AIYUN_REGISTRY_PASSWORD)\n仓库地址(ALIYUN_REGISTRY)\n命名空间(ALIYUN_NAME_SPACE)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:t(1022),alt:"image-20240611235830942"}})]),s._v(" "),a("h3",{attrs:{id:"fork本项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fork本项目"}},[s._v("#")]),s._v(" Fork本项目")]),s._v(" "),a("p",[s._v("Fork本项目")]),s._v(" "),a("h4",{attrs:{id:"启动action"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动action"}},[s._v("#")]),s._v(" 启动Action")]),s._v(" "),a("p",[s._v("进入您自己的项目，点击Action，启用Github Action功能")]),s._v(" "),a("h4",{attrs:{id:"配置环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置环境变量"}},[s._v("#")]),s._v(" 配置环境变量")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("进入Settings->Secret and variables->Actions->New Repository secret\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:t(1023),alt:"image-20240611235937278"}})]),s._v(" "),a("h3",{attrs:{id:"添加镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加镜像"}},[s._v("#")]),s._v(" 添加镜像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("打开images.txt文件，添加你想要的镜像，可以带tag，也可以不用(默认latest)\n也可添加 --platform=xxxxx 的参数指定镜像架构\n\n 文件提交后，自动进入Github Action构建\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:t(1024),alt:"image-20240612000011591"}})]),s._v(" "),a("p",[a("img",{attrs:{src:t(1025),alt:"image-20240612000043044"}})]),s._v(" "),a("p",[a("img",{attrs:{src:t(1026),alt:"image-20240612000129486"}})]),s._v(" "),a("p",[a("img",{attrs:{src:t(1027),alt:"image-20240612000116442"}})]),s._v(" "),a("h3",{attrs:{id:"使用镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用镜像"}},[s._v("#")]),s._v(" 使用镜像")]),s._v(" "),a("p",[s._v("回到阿里云，镜像仓库，点击任意镜像，可查看镜像状态。(可以改成公开，拉取镜像免登录)")]),s._v(" "),a("p",[s._v("在国内服务器pull镜像：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker pull registry.cn-hangzhou.aliyuncs.com/shrimp-images/alpine\n\nregistry.cn-hangzhou.aliyuncs.com 即 ALIYUN_REGISTRY\nqd_hjc 即 ALIYUN_NAME_SPACE\nalpine 即阿里云中显示的镜像名\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"多架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多架构"}},[s._v("#")]),s._v(" 多架构")]),s._v(" "),a("p",[s._v("需要在images.txt中用 --platform=xxxxx手动指定镜像架构 指定后的架构会以前缀的形式放在镜像名字前面")]),s._v(" "),a("p",[a("img",{attrs:{src:t(1028),alt:"image-20240611235355563"}})]),s._v(" "),a("h3",{attrs:{id:"镜像重名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像重名"}},[s._v("#")]),s._v(" 镜像重名")]),s._v(" "),a("p",[s._v("程序自动判断是否存在名称相同, 但是属于不同命名空间的情况。 如果存在，会把命名空间作为前缀加在镜像名称前。 例如:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("xhofe/alist\nxiaoyaliu/alist\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:t(1029),alt:"image-20240611235406762"}})]),s._v(" "),a("h3",{attrs:{id:"定时执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定时执行"}},[s._v("#")]),s._v(" 定时执行")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("修改/.github/workflows/docker.yaml文件 添加 schedule即可定时执行(此处cron使用UTC时区)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:t(1030),alt:"image-20240611235424277"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);